"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/settings/departments/route";
exports.ids = ["app/api/settings/departments/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsettings%2Fdepartments%2Froute&page=%2Fapi%2Fsettings%2Fdepartments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsettings%2Fdepartments%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsettings%2Fdepartments%2Froute&page=%2Fapi%2Fsettings%2Fdepartments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsettings%2Fdepartments%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_settings_departments_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/settings/departments/route.ts */ \"(rsc)/./app/api/settings/departments/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_settings_departments_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_settings_departments_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/settings/departments/route\",\n        pathname: \"/api/settings/departments\",\n        filename: \"route\",\n        bundlePath: \"app/api/settings/departments/route\"\n    },\n    resolvedPagePath: \"/Users/miguelgiraldo/DEVSPACE/dev_gladgrade_portal/app/api/settings/departments/route.ts\",\n    nextConfigOutput,\n    userland: _Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_settings_departments_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/settings/departments/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzZXR0aW5ncyUyRmRlcGFydG1lbnRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZzZXR0aW5ncyUyRmRlcGFydG1lbnRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGc2V0dGluZ3MlMkZkZXBhcnRtZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1pZ3VlbGdpcmFsZG8lMkZERVZTUEFDRSUyRmRldl9nbGFkZ3JhZGVfcG9ydGFsJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRm1pZ3VlbGdpcmFsZG8lMkZERVZTUEFDRSUyRmRldl9nbGFkZ3JhZGVfcG9ydGFsJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3QztBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvP2QyYjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL21pZ3VlbGdpcmFsZG8vREVWU1BBQ0UvZGV2X2dsYWRncmFkZV9wb3J0YWwvYXBwL2FwaS9zZXR0aW5ncy9kZXBhcnRtZW50cy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc2V0dGluZ3MvZGVwYXJ0bWVudHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zZXR0aW5ncy9kZXBhcnRtZW50c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc2V0dGluZ3MvZGVwYXJ0bWVudHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWlndWVsZ2lyYWxkby9ERVZTUEFDRS9kZXZfZ2xhZGdyYWRlX3BvcnRhbC9hcHAvYXBpL3NldHRpbmdzL2RlcGFydG1lbnRzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zZXR0aW5ncy9kZXBhcnRtZW50cy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsettings%2Fdepartments%2Froute&page=%2Fapi%2Fsettings%2Fdepartments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsettings%2Fdepartments%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/settings/departments/route.ts":
/*!***********************************************!*\
  !*** ./app/api/settings/departments/route.ts ***!
  \***********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./lib/database.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_database__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Mock data for demonstration\nconst mockDepartments = [\n    {\n        id: 1,\n        name: \"Content Moderation\",\n        employee_count: 8,\n        permissions: [\n            \"content_moderation\",\n            \"review_management\",\n            \"image_approval\"\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    },\n    {\n        id: 2,\n        name: \"Customer Support\",\n        employee_count: 12,\n        permissions: [\n            \"customer_support\",\n            \"basic_reports\"\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    },\n    {\n        id: 3,\n        name: \"Operations\",\n        employee_count: 5,\n        permissions: [\n            \"full_access\",\n            \"system_admin\",\n            \"user_management\"\n        ],\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    }\n];\n// GET /api/settings/departments\nasync function GET() {\n    try {\n        console.log(\"\\uD83D\\uDCCA Fetching departments from PostgreSQL...\");\n        const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(`\n      SELECT\n        d.id,\n        d.name,\n        d.employee_count,\n        d.created_at,\n        d.updated_at,\n        COALESCE(\n          ARRAY_AGG(p.name) FILTER (WHERE p.name IS NOT NULL), \n          ARRAY[]::text[]\n        ) as permissions\n      FROM departments d\n      LEFT JOIN department_permissions dp ON d.id = dp.department_id\n      LEFT JOIN permissions p ON dp.permission_id = p.id\n      GROUP BY d.id, d.name, d.employee_count, d.created_at, d.updated_at\n      ORDER BY d.name\n    `);\n        console.log(`✅ Found ${result.rows.length} departments`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: result.rows\n        });\n    } catch (error) {\n        console.error(\"❌ Error fetching departments:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to fetch departments from database\",\n            details: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/settings/departments\nasync function POST(request) {\n    const client = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.getClient)();\n    try {\n        const { name, employee_count = 0, permissions = [\n            \"basic_access\"\n        ] } = await request.json();\n        if (!name || name.trim() === \"\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Department name is required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`🏢 Creating department: ${name} with ${permissions.length} permissions`);\n        await client.query(\"BEGIN\");\n        // Insert department\n        const deptResult = await client.query(\"INSERT INTO departments (name, employee_count) VALUES ($1, $2) RETURNING *\", [\n            name.trim(),\n            employee_count\n        ]);\n        const department = deptResult.rows[0];\n        // Insert permissions\n        for (const permName of permissions){\n            await client.query(`\n        INSERT INTO department_permissions (department_id, permission_id)\n        SELECT $1, id FROM permissions WHERE name = $2\n        ON CONFLICT (department_id, permission_id) DO NOTHING\n      `, [\n                department.id,\n                permName\n            ]);\n        }\n        await client.query(\"COMMIT\");\n        // Fetch the complete department with permissions\n        const completeResult = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(`\n      SELECT\n        d.id,\n        d.name,\n        d.employee_count,\n        d.created_at,\n        d.updated_at,\n        COALESCE(\n          ARRAY_AGG(p.name) FILTER (WHERE p.name IS NOT NULL), \n          ARRAY[]::text[]\n        ) as permissions\n      FROM departments d\n      LEFT JOIN department_permissions dp ON d.id = dp.department_id\n      LEFT JOIN permissions p ON dp.permission_id = p.id\n      WHERE d.id = $1\n      GROUP BY d.id, d.name, d.employee_count, d.created_at, d.updated_at\n    `, [\n            department.id\n        ]);\n        console.log(\"✅ Department created successfully:\", completeResult.rows[0]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: completeResult.rows[0]\n        });\n    } catch (error) {\n        await client.query(\"ROLLBACK\");\n        console.error(\"❌ Error creating department:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        const errorCode = error && typeof error === \"object\" && \"code\" in error ? error.code : null;\n        if (errorCode === \"23505\") {\n            // Unique constraint violation\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Department name already exists\"\n            }, {\n                status: 409\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to create department\",\n            details: errorMessage\n        }, {\n            status: 500\n        });\n    } finally{\n        client.release();\n    }\n}\n// PUT /api/settings/departments\nasync function PUT(request) {\n    const client = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.getClient)();\n    try {\n        const { id, name, employee_count, permissions } = await request.json();\n        if (!id || !name || name.trim() === \"\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Department ID and name are required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`🔄 Updating department ${id}: ${name}`);\n        await client.query(\"BEGIN\");\n        // Update department\n        await client.query(\"UPDATE departments SET name = $1, employee_count = $2, updated_at = CURRENT_TIMESTAMP WHERE id = $3\", [\n            name.trim(),\n            employee_count,\n            id\n        ]);\n        // Update permissions - remove all existing and add new ones\n        await client.query(\"DELETE FROM department_permissions WHERE department_id = $1\", [\n            id\n        ]);\n        for (const permName of permissions){\n            await client.query(`\n        INSERT INTO department_permissions (department_id, permission_id)\n        SELECT $1, id FROM permissions WHERE name = $2\n        ON CONFLICT (department_id, permission_id) DO NOTHING\n      `, [\n                id,\n                permName\n            ]);\n        }\n        await client.query(\"COMMIT\");\n        // Fetch the updated department with permissions\n        const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(`\n      SELECT\n        d.id,\n        d.name,\n        d.employee_count,\n        d.created_at,\n        d.updated_at,\n        COALESCE(\n          ARRAY_AGG(p.name) FILTER (WHERE p.name IS NOT NULL), \n          ARRAY[]::text[]\n        ) as permissions\n      FROM departments d\n      LEFT JOIN department_permissions dp ON d.id = dp.department_id\n      LEFT JOIN permissions p ON dp.permission_id = p.id\n      WHERE d.id = $1\n      GROUP BY d.id, d.name, d.employee_count, d.created_at, d.updated_at\n    `, [\n            id\n        ]);\n        if (result.rows.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Department not found\"\n            }, {\n                status: 404\n            });\n        }\n        console.log(\"✅ Department updated successfully:\", result.rows[0]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: result.rows[0]\n        });\n    } catch (error) {\n        await client.query(\"ROLLBACK\");\n        console.error(\"❌ Error updating department:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to update department\",\n            details: errorMessage\n        }, {\n            status: 500\n        });\n    } finally{\n        client.release();\n    }\n}\n// DELETE /api/settings/departments/[id]\nasync function DELETE(request) {\n    try {\n        const url = new URL(request.url);\n        const id = Number.parseInt(url.searchParams.get(\"id\") || \"0\");\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Department ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`🗑️ Deleting department ${id}`);\n        // Get department info before deletion\n        const deptResult = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(\"SELECT * FROM departments WHERE id = $1\", [\n            id\n        ]);\n        if (deptResult.rows.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Department not found\"\n            }, {\n                status: 404\n            });\n        }\n        const department = deptResult.rows[0];\n        // Delete department (CASCADE will handle department_permissions)\n        await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(\"DELETE FROM departments WHERE id = $1\", [\n            id\n        ]);\n        console.log(\"✅ Department deleted successfully:\", department);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: department\n        });\n    } catch (error) {\n        console.error(\"❌ Error deleting department:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to delete department\",\n            details: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3NldHRpbmdzL2RlcGFydG1lbnRzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE0RDtBQUNYO0FBRWpELDhCQUE4QjtBQUM5QixNQUFNRyxrQkFBa0I7SUFDdEI7UUFDRUMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGdCQUFnQjtRQUNoQkMsYUFBYTtZQUFDO1lBQXNCO1lBQXFCO1NBQWlCO1FBQzFFQyxZQUFZLElBQUlDLE9BQU9DLFdBQVc7UUFDbENDLFlBQVksSUFBSUYsT0FBT0MsV0FBVztJQUNwQztJQUNBO1FBQ0VOLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxnQkFBZ0I7UUFDaEJDLGFBQWE7WUFBQztZQUFvQjtTQUFnQjtRQUNsREMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1FBQ2xDQyxZQUFZLElBQUlGLE9BQU9DLFdBQVc7SUFDcEM7SUFDQTtRQUNFTixJQUFJO1FBQ0pDLE1BQU07UUFDTkMsZ0JBQWdCO1FBQ2hCQyxhQUFhO1lBQUM7WUFBZTtZQUFnQjtTQUFrQjtRQUMvREMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1FBQ2xDQyxZQUFZLElBQUlGLE9BQU9DLFdBQVc7SUFDcEM7Q0FDRDtBQUVELGdDQUFnQztBQUN6QixlQUFlRTtJQUNwQixJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztRQUVaLE1BQU1DLFNBQVMsTUFBTWQsb0RBQUtBLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7OztJQWdCNUIsQ0FBQztRQUVEWSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUVDLE9BQU9DLElBQUksQ0FBQ0MsTUFBTSxDQUFDLFlBQVksQ0FBQztRQUV2RCxPQUFPakIscURBQVlBLENBQUNrQixJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEMsTUFBTUwsT0FBT0MsSUFBSTtRQUNuQjtJQUNGLEVBQUUsT0FBT0ssT0FBZ0I7UUFDdkJSLFFBQVFRLEtBQUssQ0FBQyxpQ0FBaUNBO1FBQy9DLE1BQU1DLGVBQWVELGlC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QVM7WUFDVEMsTUFBTVk7UUFDUjtJQUNGLEVBQUUsT0FBT1gsT0FBZ0I7UUFDdkJSLFFBQVFRLEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE1BQU1DLGVBQWVELGlCQUFpQkUsUUFBUUYsTUFBTUcsT0FBTyxHQUFHO1FBQzlELE9BQU94QixxREFBWUEsQ0FBQ2tCLElBQUksQ0FDdEI7WUFDRUMsU0FBUztZQUNURSxPQUFPO1lBQ1BJLFNBQVNIO1FBQ1gsR0FDQTtZQUFFSSxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9hcHAvYXBpL3NldHRpbmdzL2RlcGFydG1lbnRzL3JvdXRlLnRzP2ExZWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcbmltcG9ydCB7IHF1ZXJ5LCBnZXRDbGllbnQgfSBmcm9tIFwiQC9saWIvZGF0YWJhc2VcIlxuXG4vLyBNb2NrIGRhdGEgZm9yIGRlbW9uc3RyYXRpb25cbmNvbnN0IG1vY2tEZXBhcnRtZW50cyA9IFtcbiAge1xuICAgIGlkOiAxLFxuICAgIG5hbWU6IFwiQ29udGVudCBNb2RlcmF0aW9uXCIsXG4gICAgZW1wbG95ZWVfY291bnQ6IDgsXG4gICAgcGVybWlzc2lvbnM6IFtcImNvbnRlbnRfbW9kZXJhdGlvblwiLCBcInJldmlld19tYW5hZ2VtZW50XCIsIFwiaW1hZ2VfYXBwcm92YWxcIl0sXG4gICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfSxcbiAge1xuICAgIGlkOiAyLFxuICAgIG5hbWU6IFwiQ3VzdG9tZXIgU3VwcG9ydFwiLFxuICAgIGVtcGxveWVlX2NvdW50OiAxMixcbiAgICBwZXJtaXNzaW9uczogW1wiY3VzdG9tZXJfc3VwcG9ydFwiLCBcImJhc2ljX3JlcG9ydHNcIl0sXG4gICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgfSxcbiAge1xuICAgIGlkOiAzLFxuICAgIG5hbWU6IFwiT3BlcmF0aW9uc1wiLFxuICAgIGVtcGxveWVlX2NvdW50OiA1LFxuICAgIHBlcm1pc3Npb25zOiBbXCJmdWxsX2FjY2Vzc1wiLCBcInN5c3RlbV9hZG1pblwiLCBcInVzZXJfbWFuYWdlbWVudFwiXSxcbiAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9LFxuXVxuXG4vLyBHRVQgL2FwaS9zZXR0aW5ncy9kZXBhcnRtZW50c1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIvCfk4ogRmV0Y2hpbmcgZGVwYXJ0bWVudHMgZnJvbSBQb3N0Z3JlU1FMLi4uXCIpXG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeShgXG4gICAgICBTRUxFQ1RcbiAgICAgICAgZC5pZCxcbiAgICAgICAgZC5uYW1lLFxuICAgICAgICBkLmVtcGxveWVlX2NvdW50LFxuICAgICAgICBkLmNyZWF0ZWRfYXQsXG4gICAgICAgIGQudXBkYXRlZF9hdCxcbiAgICAgICAgQ09BTEVTQ0UoXG4gICAgICAgICAgQVJSQVlfQUdHKHAubmFtZSkgRklMVEVSIChXSEVSRSBwLm5hbWUgSVMgTk9UIE5VTEwpLCBcbiAgICAgICAgICBBUlJBWVtdOjp0ZXh0W11cbiAgICAgICAgKSBhcyBwZXJtaXNzaW9uc1xuICAgICAgRlJPTSBkZXBhcnRtZW50cyBkXG4gICAgICBMRUZUIEpPSU4gZGVwYXJ0bWVudF9wZXJtaXNzaW9ucyBkcCBPTiBkLmlkID0gZHAuZGVwYXJ0bWVudF9pZFxuICAgICAgTEVGVCBKT0lOIHBlcm1pc3Npb25zIHAgT04gZHAucGVybWlzc2lvbl9pZCA9IHAuaWRcbiAgICAgIEdST1VQIEJZIGQuaWQsIGQubmFtZSwgZC5lbXBsb3llZV9jb3VudCwgZC5jcmVhdGVkX2F0LCBkLnVwZGF0ZWRfYXRcbiAgICAgIE9SREVSIEJZIGQubmFtZVxuICAgIGApXG5cbiAgICBjb25zb2xlLmxvZyhg4pyFIEZvdW5kICR7cmVzdWx0LnJvd3MubGVuZ3RofSBkZXBhcnRtZW50c2ApXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3VsdC5yb3dzLFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBmZXRjaGluZyBkZXBhcnRtZW50czpcIiwgZXJyb3IpXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIlxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBmZXRjaCBkZXBhcnRtZW50cyBmcm9tIGRhdGFiYXNlXCIsXG4gICAgICAgIGRldGFpbHM6IGVycm9yTWVzc2FnZSxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH0sXG4gICAgKVxuICB9XG59XG5cbi8vIFBPU1QgL2FwaS9zZXR0aW5ncy9kZXBhcnRtZW50c1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0Q2xpZW50KClcblxuICB0cnkge1xuICAgIGNvbnN0IHsgbmFtZSwgZW1wbG95ZWVfY291bnQgPSAwLCBwZXJtaXNzaW9ucyA9IFtcImJhc2ljX2FjY2Vzc1wiXSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblxuICAgIGlmICghbmFtZSB8fCBuYW1lLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkRlcGFydG1lbnQgbmFtZSBpcyByZXF1aXJlZFwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg8J+PoiBDcmVhdGluZyBkZXBhcnRtZW50OiAke25hbWV9IHdpdGggJHtwZXJtaXNzaW9ucy5sZW5ndGh9IHBlcm1pc3Npb25zYClcblxuICAgIGF3YWl0IGNsaWVudC5xdWVyeShcIkJFR0lOXCIpXG5cbiAgICAvLyBJbnNlcnQgZGVwYXJ0bWVudFxuICAgIGNvbnN0IGRlcHRSZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkoXG4gICAgICBcIklOU0VSVCBJTlRPIGRlcGFydG1lbnRzIChuYW1lLCBlbXBsb3llZV9jb3VudCkgVkFMVUVTICgkMSwgJDIpIFJFVFVSTklORyAqXCIsXG4gICAgICBbbmFtZS50cmltKCksIGVtcGxveWVlX2NvdW50XSxcbiAgICApXG5cbiAgICBjb25zdCBkZXBhcnRtZW50ID0gZGVwdFJlc3VsdC5yb3dzWzBdXG5cbiAgICAvLyBJbnNlcnQgcGVybWlzc2lvbnNcbiAgICBmb3IgKGNvbnN0IHBlcm1OYW1lIG9mIHBlcm1pc3Npb25zKSB7XG4gICAgICBhd2FpdCBjbGllbnQucXVlcnkoXG4gICAgICAgIGBcbiAgICAgICAgSU5TRVJUIElOVE8gZGVwYXJ0bWVudF9wZXJtaXNzaW9ucyAoZGVwYXJ0bWVudF9pZCwgcGVybWlzc2lvbl9pZClcbiAgICAgICAgU0VMRUNUICQxLCBpZCBGUk9NIHBlcm1pc3Npb25zIFdIRVJFIG5hbWUgPSAkMlxuICAgICAgICBPTiBDT05GTElDVCAoZGVwYXJ0bWVudF9pZCwgcGVybWlzc2lvbl9pZCkgRE8gTk9USElOR1xuICAgICAgYCxcbiAgICAgICAgW2RlcGFydG1lbnQuaWQsIHBlcm1OYW1lXSxcbiAgICAgIClcbiAgICB9XG5cbiAgICBhd2FpdCBjbGllbnQucXVlcnkoXCJDT01NSVRcIilcblxuICAgIC8vIEZldGNoIHRoZSBjb21wbGV0ZSBkZXBhcnRtZW50IHdpdGggcGVybWlzc2lvbnNcbiAgICBjb25zdCBjb21wbGV0ZVJlc3VsdCA9IGF3YWl0IHF1ZXJ5KFxuICAgICAgYFxuICAgICAgU0VMRUNUXG4gICAgICAgIGQuaWQsXG4gICAgICAgIGQubmFtZSxcbiAgICAgICAgZC5lbXBsb3llZV9jb3VudCxcbiAgICAgICAgZC5jcmVhdGVkX2F0LFxuICAgICAgICBkLnVwZGF0ZWRfYXQsXG4gICAgICAgIENPQUxFU0NFKFxuICAgICAgICAgIEFSUkFZX0FHRyhwLm5hbWUpIEZJTFRFUiAoV0hFUkUgcC5uYW1lIElTIE5PVCBOVUxMKSwgXG4gICAgICAgICAgQVJSQVlbXTo6dGV4dFtdXG4gICAgICAgICkgYXMgcGVybWlzc2lvbnNcbiAgICAgIEZST00gZGVwYXJ0bWVudHMgZFxuICAgICAgTEVGVCBKT0lOIGRlcGFydG1lbnRfcGVybWlzc2lvbnMgZHAgT04gZC5pZCA9IGRwLmRlcGFydG1lbnRfaWRcbiAgICAgIExFRlQgSk9JTiBwZXJtaXNzaW9ucyBwIE9OIGRwLnBlcm1pc3Npb25faWQgPSBwLmlkXG4gICAgICBXSEVSRSBkLmlkID0gJDFcbiAgICAgIEdST1VQIEJZIGQuaWQsIGQubmFtZSwgZC5lbXBsb3llZV9jb3VudCwgZC5jcmVhdGVkX2F0LCBkLnVwZGF0ZWRfYXRcbiAgICBgLFxuICAgICAgW2RlcGFydG1lbnQuaWRdLFxuICAgIClcblxuICAgIGNvbnNvbGUubG9nKFwi4pyFIERlcGFydG1lbnQgY3JlYXRlZCBzdWNjZXNzZnVsbHk6XCIsIGNvbXBsZXRlUmVzdWx0LnJvd3NbMF0pXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IGNvbXBsZXRlUmVzdWx0LnJvd3NbMF0sXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoXCJST0xMQkFDS1wiKVxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgY3JlYXRpbmcgZGVwYXJ0bWVudDpcIiwgZXJyb3IpXG5cbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvciBvY2N1cnJlZFwiXG4gICAgY29uc3QgZXJyb3JDb2RlID0gZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmIFwiY29kZVwiIGluIGVycm9yID8gKGVycm9yIGFzIGFueSkuY29kZSA6IG51bGxcblxuICAgIGlmIChlcnJvckNvZGUgPT09IFwiMjM1MDVcIikge1xuICAgICAgLy8gVW5pcXVlIGNvbnN0cmFpbnQgdmlvbGF0aW9uXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGVwYXJ0bWVudCBuYW1lIGFscmVhZHkgZXhpc3RzXCIgfSwgeyBzdGF0dXM6IDQwOSB9KVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBjcmVhdGUgZGVwYXJ0bWVudFwiLFxuICAgICAgICBkZXRhaWxzOiBlcnJvck1lc3NhZ2UsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9LFxuICAgIClcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQucmVsZWFzZSgpXG4gIH1cbn1cblxuLy8gUFVUIC9hcGkvc2V0dGluZ3MvZGVwYXJ0bWVudHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0Q2xpZW50KClcblxuICB0cnkge1xuICAgIGNvbnN0IHsgaWQsIG5hbWUsIGVtcGxveWVlX2NvdW50LCBwZXJtaXNzaW9ucyB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblxuICAgIGlmICghaWQgfHwgIW5hbWUgfHwgbmFtZS50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJEZXBhcnRtZW50IElEIGFuZCBuYW1lIGFyZSByZXF1aXJlZFwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg8J+UhCBVcGRhdGluZyBkZXBhcnRtZW50ICR7aWR9OiAke25hbWV9YClcblxuICAgIGF3YWl0IGNsaWVudC5xdWVyeShcIkJFR0lOXCIpXG5cbiAgICAvLyBVcGRhdGUgZGVwYXJ0bWVudFxuICAgIGF3YWl0IGNsaWVudC5xdWVyeShcbiAgICAgIFwiVVBEQVRFIGRlcGFydG1lbnRzIFNFVCBuYW1lID0gJDEsIGVtcGxveWVlX2NvdW50ID0gJDIsIHVwZGF0ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCBXSEVSRSBpZCA9ICQzXCIsXG4gICAgICBbbmFtZS50cmltKCksIGVtcGxveWVlX2NvdW50LCBpZF0sXG4gICAgKVxuXG4gICAgLy8gVXBkYXRlIHBlcm1pc3Npb25zIC0gcmVtb3ZlIGFsbCBleGlzdGluZyBhbmQgYWRkIG5ldyBvbmVzXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KFwiREVMRVRFIEZST00gZGVwYXJ0bWVudF9wZXJtaXNzaW9ucyBXSEVSRSBkZXBhcnRtZW50X2lkID0gJDFcIiwgW2lkXSlcblxuICAgIGZvciAoY29uc3QgcGVybU5hbWUgb2YgcGVybWlzc2lvbnMpIHtcbiAgICAgIGF3YWl0IGNsaWVudC5xdWVyeShcbiAgICAgICAgYFxuICAgICAgICBJTlNFUlQgSU5UTyBkZXBhcnRtZW50X3Blcm1pc3Npb25zIChkZXBhcnRtZW50X2lkLCBwZXJtaXNzaW9uX2lkKVxuICAgICAgICBTRUxFQ1QgJDEsIGlkIEZST00gcGVybWlzc2lvbnMgV0hFUkUgbmFtZSA9ICQyXG4gICAgICAgIE9OIENPTkZMSUNUIChkZXBhcnRtZW50X2lkLCBwZXJtaXNzaW9uX2lkKSBETyBOT1RISU5HXG4gICAgICBgLFxuICAgICAgICBbaWQsIHBlcm1OYW1lXSxcbiAgICAgIClcbiAgICB9XG5cbiAgICBhd2FpdCBjbGllbnQucXVlcnkoXCJDT01NSVRcIilcblxuICAgIC8vIEZldGNoIHRoZSB1cGRhdGVkIGRlcGFydG1lbnQgd2l0aCBwZXJtaXNzaW9uc1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KFxuICAgICAgYFxuICAgICAgU0VMRUNUXG4gICAgICAgIGQuaWQsXG4gICAgICAgIGQubmFtZSxcbiAgICAgICAgZC5lbXBsb3llZV9jb3VudCxcbiAgICAgICAgZC5jcmVhdGVkX2F0LFxuICAgICAgICBkLnVwZGF0ZWRfYXQsXG4gICAgICAgIENPQUxFU0NFKFxuICAgICAgICAgIEFSUkFZX0FHRyhwLm5hbWUpIEZJTFRFUiAoV0hFUkUgcC5uYW1lIElTIE5PVCBOVUxMKSwgXG4gICAgICAgICAgQVJSQVlbXTo6dGV4dFtdXG4gICAgICAgICkgYXMgcGVybWlzc2lvbnNcbiAgICAgIEZST00gZGVwYXJ0bWVudHMgZFxuICAgICAgTEVGVCBKT0lOIGRlcGFydG1lbnRfcGVybWlzc2lvbnMgZHAgT04gZC5pZCA9IGRwLmRlcGFydG1lbnRfaWRcbiAgICAgIExFRlQgSk9JTiBwZXJtaXNzaW9ucyBwIE9OIGRwLnBlcm1pc3Npb25faWQgPSBwLmlkXG4gICAgICBXSEVSRSBkLmlkID0gJDFcbiAgICAgIEdST1VQIEJZIGQuaWQsIGQubmFtZSwgZC5lbXBsb3llZV9jb3VudCwgZC5jcmVhdGVkX2F0LCBkLnVwZGF0ZWRfYXRcbiAgICBgLFxuICAgICAgW2lkXSxcbiAgICApXG5cbiAgICBpZiAocmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGVwYXJ0bWVudCBub3QgZm91bmRcIiB9LCB7IHN0YXR1czogNDA0IH0pXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCLinIUgRGVwYXJ0bWVudCB1cGRhdGVkIHN1Y2Nlc3NmdWxseTpcIiwgcmVzdWx0LnJvd3NbMF0pXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3VsdC5yb3dzWzBdLFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KFwiUk9MTEJBQ0tcIilcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIHVwZGF0aW5nIGRlcGFydG1lbnQ6XCIsIGVycm9yKVxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yIG9jY3VycmVkXCJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogXCJGYWlsZWQgdG8gdXBkYXRlIGRlcGFydG1lbnRcIixcbiAgICAgICAgZGV0YWlsczogZXJyb3JNZXNzYWdlLFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfSxcbiAgICApXG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKVxuICB9XG59XG5cbi8vIERFTEVURSAvYXBpL3NldHRpbmdzL2RlcGFydG1lbnRzL1tpZF1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IGlkID0gTnVtYmVyLnBhcnNlSW50KHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwiaWRcIikgfHwgXCIwXCIpXG5cbiAgICBpZiAoIWlkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRGVwYXJ0bWVudCBJRCBpcyByZXF1aXJlZFwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg8J+Xke+4jyBEZWxldGluZyBkZXBhcnRtZW50ICR7aWR9YClcblxuICAgIC8vIEdldCBkZXBhcnRtZW50IGluZm8gYmVmb3JlIGRlbGV0aW9uXG4gICAgY29uc3QgZGVwdFJlc3VsdCA9IGF3YWl0IHF1ZXJ5KFwiU0VMRUNUICogRlJPTSBkZXBhcnRtZW50cyBXSEVSRSBpZCA9ICQxXCIsIFtpZF0pXG5cbiAgICBpZiAoZGVwdFJlc3VsdC5yb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkRlcGFydG1lbnQgbm90IGZvdW5kXCIgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIH1cblxuICAgIGNvbnN0IGRlcGFydG1lbnQgPSBkZXB0UmVzdWx0LnJvd3NbMF1cblxuICAgIC8vIERlbGV0ZSBkZXBhcnRtZW50IChDQVNDQURFIHdpbGwgaGFuZGxlIGRlcGFydG1lbnRfcGVybWlzc2lvbnMpXG4gICAgYXdhaXQgcXVlcnkoXCJERUxFVEUgRlJPTSBkZXBhcnRtZW50cyBXSEVSRSBpZCA9ICQxXCIsIFtpZF0pXG5cbiAgICBjb25zb2xlLmxvZyhcIuKchSBEZXBhcnRtZW50IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5OlwiLCBkZXBhcnRtZW50KVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBkZXBhcnRtZW50LFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBkZWxldGluZyBkZXBhcnRtZW50OlwiLCBlcnJvcilcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvciBvY2N1cnJlZFwiXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIGRlbGV0ZSBkZXBhcnRtZW50XCIsXG4gICAgICAgIGRldGFpbHM6IGVycm9yTWVzc2FnZSxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH0sXG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicXVlcnkiLCJnZXRDbGllbnQiLCJtb2NrRGVwYXJ0bWVudHMiLCJpZCIsIm5hbWUiLCJlbXBsb3llZV9jb3VudCIsInBlcm1pc3Npb25zIiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRfYXQiLCJHRVQiLCJjb25zb2xlIiwibG9nIiwicmVzdWx0Iiwicm93cyIsImxlbmd0aCIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsImVycm9yIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIiwiZGV0YWlscyIsInN0YXR1cyIsIlBPU1QiLCJyZXF1ZXN0IiwiY2xpZW50IiwidHJpbSIsImRlcHRSZXN1bHQiLCJkZXBhcnRtZW50IiwicGVybU5hbWUiLCJjb21wbGV0ZVJlc3VsdCIsImVycm9yQ29kZSIsImNvZGUiLCJyZWxlYXNlIiwiUFVUIiwiREVMRVRFIiwidXJsIiwiVVJMIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJzZWFyY2hQYXJhbXMiLCJnZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/settings/departments/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closePool: () => (/* binding */ closePool),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getClient: () => (/* binding */ getClient),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Determine connection method based on environment\nconst isProduction = \"development\" === \"production\";\nconst isGoogleCloud = process.env.GOOGLE_CLOUD_PROJECT || process.env.FIREBASE_PROJECT_ID;\n// Database connection configuration\nconst dbConfig = (()=>{\n    // Method 1: Unix Socket (for Google Cloud Run/App Engine)\n    if (isProduction && isGoogleCloud) {\n        console.log(\"\\uD83D\\uDD17 Using Unix Socket connection for Google Cloud\");\n        return {\n            host: `/cloudsql/${process.env.FIREBASE_PROJECT_ID}:us-east4:gg-instance`,\n            database: process.env.DB_NAME || \"corp\",\n            user: process.env.DB_USER || \"postgres\",\n            password: process.env.DB_PASSWORD,\n            ssl: false,\n            max: 20,\n            idleTimeoutMillis: 30000,\n            connectionTimeoutMillis: 10000\n        };\n    }\n    // Method 2: Public IP (for local development)\n    console.log(\"\\uD83D\\uDD17 Using Public IP connection for local development\");\n    return {\n        host: process.env.DB_HOST || \"34.86.121.148\",\n        port: Number.parseInt(process.env.DB_PORT || \"5432\"),\n        database: process.env.DB_NAME || \"corp\",\n        user: process.env.DB_USER || \"postgres\",\n        password: process.env.DB_PASSWORD,\n        ssl: {\n            rejectUnauthorized: false\n        },\n        max: 20,\n        idleTimeoutMillis: 30000,\n        connectionTimeoutMillis: 10000\n    };\n})();\n// Create connection pool\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(dbConfig);\n// Handle pool errors\npool.on(\"error\", (err)=>{\n    console.error(\"❌ Unexpected error on idle client\", err);\n    process.exit(-1);\n});\n// Log connection details (without password)\nconsole.log(\"\\uD83D\\uDD27 Database Configuration:\", {\n    host: dbConfig.host,\n    port: dbConfig.port || \"Unix Socket\",\n    database: dbConfig.database,\n    user: dbConfig.user,\n    ssl: !!dbConfig.ssl,\n    environment: \"development\",\n    isGoogleCloud: !!isGoogleCloud\n});\n// Test database connection\nasync function testConnection() {\n    try {\n        console.log(\"\\uD83E\\uDDEA Testing database connection...\");\n        const client = await pool.connect();\n        const result = await client.query(`\n      SELECT \n        NOW() as current_time, \n        version() as postgres_version,\n        current_database() as database_name,\n        current_user as current_user,\n        inet_server_addr() as server_ip\n    `);\n        client.release();\n        const connectionInfo = result.rows[0];\n        console.log(\"✅ Database connected successfully!\");\n        console.log(\"\\uD83D\\uDD50 Current time:\", connectionInfo.current_time);\n        console.log(\"\\uD83D\\uDDC4️ Database:\", connectionInfo.database_name);\n        console.log(\"\\uD83D\\uDC64 User:\", connectionInfo.current_user);\n        console.log(\"\\uD83C\\uDF10 Server IP:\", connectionInfo.server_ip || \"Unix Socket\");\n        console.log(\"\\uD83D\\uDCCA PostgreSQL version:\", connectionInfo.postgres_version);\n        return {\n            success: true,\n            data: connectionInfo\n        };\n    } catch (error) {\n        console.error(\"❌ Database connection failed:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        // Provide helpful error messages\n        if (errorMessage.includes(\"ECONNREFUSED\")) {\n            console.error(\"\\uD83D\\uDCA1 Tip: Make sure your Google Cloud SQL instance is running and accessible\");\n        }\n        if (errorMessage.includes(\"password authentication failed\")) {\n            console.error(\"\\uD83D\\uDCA1 Tip: Check your database username and password\");\n        }\n        if (errorMessage.includes(\"database\") && errorMessage.includes(\"does not exist\")) {\n            console.error(\"\\uD83D\\uDCA1 Tip: Make sure the 'corp' database exists in your instance\");\n        }\n        return {\n            success: false,\n            error: errorMessage\n        };\n    }\n}\n// Execute a query with error handling\nasync function query(text, params) {\n    const start = Date.now();\n    try {\n        console.log(\"\\uD83D\\uDD0D Executing query:\", text.substring(0, 100) + (text.length > 100 ? \"...\" : \"\"));\n        const result = await pool.query(text, params);\n        const duration = Date.now() - start;\n        console.log(`✅ Query executed in ${duration}ms, returned ${result.rowCount} rows`);\n        return result;\n    } catch (error) {\n        const duration = Date.now() - start;\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        console.error(`❌ Query failed after ${duration}ms:`, errorMessage);\n        console.error(\"\\uD83D\\uDCDD Query:\", text.substring(0, 200));\n        console.error(\"\\uD83D\\uDCCB Params:\", params);\n        throw error;\n    }\n}\n// Get a client from the pool for transactions\nasync function getClient() {\n    return await pool.connect();\n}\n// Close the pool (for graceful shutdown)\nasync function closePool() {\n    await pool.end();\n    console.log(\"\\uD83D\\uDD12 Database pool closed\");\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEMsUUFBUXNCLEtBQUssQ0FBQyx1QkFBYXNCLEtBQUtLLFNBQVMsQ0FBQyxHQUFHO1FBQzdDakQsUUFBUXNCLEtBQUssQ0FBQyx3QkFBY3VCO1FBQzVCLE1BQU12QjtJQUNSO0FBQ0Y7QUFFQSw4Q0FBOEM7QUFDdkMsZUFBZStCO0lBQ3BCLE9BQU8sTUFBTWxDLEtBQUtRLE9BQU87QUFDM0I7QUFFQSx5Q0FBeUM7QUFDbEMsZUFBZTJCO0lBQ3BCLE1BQU1uQyxLQUFLb0MsR0FBRztJQUNkdkQsUUFBUUMsR0FBRyxDQUFDO0FBQ2Q7QUFFQSxpRUFBZWtCLElBQUlBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vbGliL2RhdGFiYXNlLnRzPzRkNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9vbCwgdHlwZSBQb29sQ2xpZW50IH0gZnJvbSBcInBnXCJcblxuLy8gRGV0ZXJtaW5lIGNvbm5lY3Rpb24gbWV0aG9kIGJhc2VkIG9uIGVudmlyb25tZW50XG5jb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCJcbmNvbnN0IGlzR29vZ2xlQ2xvdWQgPSBwcm9jZXNzLmVudi5HT09HTEVfQ0xPVURfUFJPSkVDVCB8fCBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUk9KRUNUX0lEXG5cbi8vIERhdGFiYXNlIGNvbm5lY3Rpb24gY29uZmlndXJhdGlvblxuY29uc3QgZGJDb25maWcgPSAoKCkgPT4ge1xuICAvLyBNZXRob2QgMTogVW5peCBTb2NrZXQgKGZvciBHb29nbGUgQ2xvdWQgUnVuL0FwcCBFbmdpbmUpXG4gIGlmIChpc1Byb2R1Y3Rpb24gJiYgaXNHb29nbGVDbG91ZCkge1xuICAgIGNvbnNvbGUubG9nKFwi8J+UlyBVc2luZyBVbml4IFNvY2tldCBjb25uZWN0aW9uIGZvciBHb29nbGUgQ2xvdWRcIilcbiAgICByZXR1cm4ge1xuICAgICAgaG9zdDogYC9jbG91ZHNxbC8ke3Byb2Nlc3MuZW52LkZJUkVCQVNFX1BST0pFQ1RfSUR9OnVzLWVhc3Q0OmdnLWluc3RhbmNlYCxcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8IFwiY29ycFwiLFxuICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCBcInBvc3RncmVzXCIsXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsXG4gICAgICBzc2w6IGZhbHNlLCAvLyBOb3QgbmVlZGVkIGZvciBVbml4IHNvY2tldFxuICAgICAgbWF4OiAyMCxcbiAgICAgIGlkbGVUaW1lb3V0TWlsbGlzOiAzMDAwMCxcbiAgICAgIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAxMDAwMCxcbiAgICB9XG4gIH1cblxuICAvLyBNZXRob2QgMjogUHVibGljIElQIChmb3IgbG9jYWwgZGV2ZWxvcG1lbnQpXG4gIGNvbnNvbGUubG9nKFwi8J+UlyBVc2luZyBQdWJsaWMgSVAgY29ubmVjdGlvbiBmb3IgbG9jYWwgZGV2ZWxvcG1lbnRcIilcbiAgcmV0dXJuIHtcbiAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUIHx8IFwiMzQuODYuMTIxLjE0OFwiLFxuICAgIHBvcnQ6IE51bWJlci5wYXJzZUludChwcm9jZXNzLmVudi5EQl9QT1JUIHx8IFwiNTQzMlwiKSxcbiAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcImNvcnBcIixcbiAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8IFwicG9zdGdyZXNcIixcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsXG4gICAgc3NsOiB7XG4gICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLCAvLyBSZXF1aXJlZCBmb3IgR29vZ2xlIENsb3VkIFNRTCBwdWJsaWMgSVBcbiAgICB9LFxuICAgIG1heDogMjAsXG4gICAgaWRsZVRpbWVvdXRNaWxsaXM6IDMwMDAwLFxuICAgIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAxMDAwMCxcbiAgfVxufSkoKVxuXG4vLyBDcmVhdGUgY29ubmVjdGlvbiBwb29sXG5jb25zdCBwb29sID0gbmV3IFBvb2woZGJDb25maWcpXG5cbi8vIEhhbmRsZSBwb29sIGVycm9yc1xucG9vbC5vbihcImVycm9yXCIsIChlcnI6IEVycm9yKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoXCLinYwgVW5leHBlY3RlZCBlcnJvciBvbiBpZGxlIGNsaWVudFwiLCBlcnIpXG4gIHByb2Nlc3MuZXhpdCgtMSlcbn0pXG5cbi8vIExvZyBjb25uZWN0aW9uIGRldGFpbHMgKHdpdGhvdXQgcGFzc3dvcmQpXG5jb25zb2xlLmxvZyhcIvCflKcgRGF0YWJhc2UgQ29uZmlndXJhdGlvbjpcIiwge1xuICBob3N0OiBkYkNvbmZpZy5ob3N0LFxuICBwb3J0OiBkYkNvbmZpZy5wb3J0IHx8IFwiVW5peCBTb2NrZXRcIixcbiAgZGF0YWJhc2U6IGRiQ29uZmlnLmRhdGFiYXNlLFxuICB1c2VyOiBkYkNvbmZpZy51c2VyLFxuICBzc2w6ICEhZGJDb25maWcuc3NsLFxuICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXG4gIGlzR29vZ2xlQ2xvdWQ6ICEhaXNHb29nbGVDbG91ZCxcbn0pXG5cbi8vIFRlc3QgZGF0YWJhc2UgY29ubmVjdGlvblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRlc3RDb25uZWN0aW9uKCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwi8J+nqiBUZXN0aW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24uLi5cIilcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICAgIFNFTEVDVCBcbiAgICAgICAgTk9XKCkgYXMgY3VycmVudF90aW1lLCBcbiAgICAgICAgdmVyc2lvbigpIGFzIHBvc3RncmVzX3ZlcnNpb24sXG4gICAgICAgIGN1cnJlbnRfZGF0YWJhc2UoKSBhcyBkYXRhYmFzZV9uYW1lLFxuICAgICAgICBjdXJyZW50X3VzZXIgYXMgY3VycmVudF91c2VyLFxuICAgICAgICBpbmV0X3NlcnZlcl9hZGRyKCkgYXMgc2VydmVyX2lwXG4gICAgYClcblxuICAgIGNsaWVudC5yZWxlYXNlKClcblxuICAgIGNvbnN0IGNvbm5lY3Rpb25JbmZvID0gcmVzdWx0LnJvd3NbMF1cbiAgICBjb25zb2xlLmxvZyhcIuKchSBEYXRhYmFzZSBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5IVwiKVxuICAgIGNvbnNvbGUubG9nKFwi8J+VkCBDdXJyZW50IHRpbWU6XCIsIGNvbm5lY3Rpb25JbmZvLmN1cnJlbnRfdGltZSlcbiAgICBjb25zb2xlLmxvZyhcIvCfl4TvuI8gRGF0YWJhc2U6XCIsIGNvbm5lY3Rpb25JbmZvLmRhdGFiYXNlX25hbWUpXG4gICAgY29uc29sZS5sb2coXCLwn5GkIFVzZXI6XCIsIGNvbm5lY3Rpb25JbmZvLmN1cnJlbnRfdXNlcilcbiAgICBjb25zb2xlLmxvZyhcIvCfjJAgU2VydmVyIElQOlwiLCBjb25uZWN0aW9uSW5mby5zZXJ2ZXJfaXAgfHwgXCJVbml4IFNvY2tldFwiKVxuICAgIGNvbnNvbGUubG9nKFwi8J+TiiBQb3N0Z3JlU1FMIHZlcnNpb246XCIsIGNvbm5lY3Rpb25JbmZvLnBvc3RncmVzX3ZlcnNpb24pXG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb25uZWN0aW9uSW5mbyB9XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDpcIiwgZXJyb3IpXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIlxuXG4gICAgLy8gUHJvdmlkZSBoZWxwZnVsIGVycm9yIG1lc3NhZ2VzXG4gICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcIkVDT05OUkVGVVNFRFwiKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIvCfkqEgVGlwOiBNYWtlIHN1cmUgeW91ciBHb29nbGUgQ2xvdWQgU1FMIGluc3RhbmNlIGlzIHJ1bm5pbmcgYW5kIGFjY2Vzc2libGVcIilcbiAgICB9XG4gICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcInBhc3N3b3JkIGF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIvCfkqEgVGlwOiBDaGVjayB5b3VyIGRhdGFiYXNlIHVzZXJuYW1lIGFuZCBwYXNzd29yZFwiKVxuICAgIH1cbiAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiZGF0YWJhc2VcIikgJiYgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiZG9lcyBub3QgZXhpc3RcIikpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLwn5KhIFRpcDogTWFrZSBzdXJlIHRoZSAnY29ycCcgZGF0YWJhc2UgZXhpc3RzIGluIHlvdXIgaW5zdGFuY2VcIilcbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTWVzc2FnZSB9XG4gIH1cbn1cblxuLy8gRXhlY3V0ZSBhIHF1ZXJ5IHdpdGggZXJyb3IgaGFuZGxpbmdcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeSh0ZXh0OiBzdHJpbmcsIHBhcmFtcz86IGFueVtdKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpXG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIvCflI0gRXhlY3V0aW5nIHF1ZXJ5OlwiLCB0ZXh0LnN1YnN0cmluZygwLCAxMDApICsgKHRleHQubGVuZ3RoID4gMTAwID8gXCIuLi5cIiA6IFwiXCIpKVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeSh0ZXh0LCBwYXJhbXMpXG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRcblxuICAgIGNvbnNvbGUubG9nKGDinIUgUXVlcnkgZXhlY3V0ZWQgaW4gJHtkdXJhdGlvbn1tcywgcmV0dXJuZWQgJHtyZXN1bHQucm93Q291bnR9IHJvd3NgKVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIlxuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBRdWVyeSBmYWlsZWQgYWZ0ZXIgJHtkdXJhdGlvbn1tczpgLCBlcnJvck1lc3NhZ2UpXG4gICAgY29uc29sZS5lcnJvcihcIvCfk50gUXVlcnk6XCIsIHRleHQuc3Vic3RyaW5nKDAsIDIwMCkpXG4gICAgY29uc29sZS5lcnJvcihcIvCfk4sgUGFyYW1zOlwiLCBwYXJhbXMpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vLyBHZXQgYSBjbGllbnQgZnJvbSB0aGUgcG9vbCBmb3IgdHJhbnNhY3Rpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2xpZW50KCk6IFByb21pc2U8UG9vbENsaWVudD4ge1xuICByZXR1cm4gYXdhaXQgcG9vbC5jb25uZWN0KClcbn1cblxuLy8gQ2xvc2UgdGhlIHBvb2wgKGZvciBncmFjZWZ1bCBzaHV0ZG93bilcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZVBvb2woKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHBvb2wuZW5kKClcbiAgY29uc29sZS5sb2coXCLwn5SSIERhdGFiYXNlIHBvb2wgY2xvc2VkXCIpXG59XG5cbmV4cG9ydCBkZWZhdWx0IHBvb2xcbiJdLCJuYW1lcyI6WyJQb29sIiwiaXNQcm9kdWN0aW9uIiwicHJvY2VzcyIsImlzR29vZ2xlQ2xvdWQiLCJlbnYiLCJHT09HTEVfQ0xPVURfUFJPSkVDVCIsIkZJUkVCQVNFX1BST0pFQ1RfSUQiLCJkYkNvbmZpZyIsImNvbnNvbGUiLCJsb2ciLCJob3N0IiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwidXNlciIsIkRCX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwic3NsIiwibWF4IiwiaWRsZVRpbWVvdXRNaWxsaXMiLCJjb25uZWN0aW9uVGltZW91dE1pbGxpcyIsIkRCX0hPU1QiLCJwb3J0IiwiTnVtYmVyIiwicGFyc2VJbnQiLCJEQl9QT1JUIiwicmVqZWN0VW5hdXRob3JpemVkIiwicG9vbCIsIm9uIiwiZXJyIiwiZXJyb3IiLCJleGl0IiwiZW52aXJvbm1lbnQiLCJ0ZXN0Q29ubmVjdGlvbiIsImNsaWVudCIsImNvbm5lY3QiLCJyZXN1bHQiLCJxdWVyeSIsInJlbGVhc2UiLCJjb25uZWN0aW9uSW5mbyIsInJvd3MiLCJjdXJyZW50X3RpbWUiLCJkYXRhYmFzZV9uYW1lIiwiY3VycmVudF91c2VyIiwic2VydmVyX2lwIiwicG9zdGdyZXNfdmVyc2lvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJ0ZXh0IiwicGFyYW1zIiwic3RhcnQiLCJEYXRlIiwibm93Iiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiZHVyYXRpb24iLCJyb3dDb3VudCIsImdldENsaWVudCIsImNsb3NlUG9vbCIsImVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsettings%2Fdepartments%2Froute&page=%2Fapi%2Fsettings%2Fdepartments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsettings%2Fdepartments%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();