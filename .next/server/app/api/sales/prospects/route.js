"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/sales/prospects/route";
exports.ids = ["app/api/sales/prospects/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "async_hooks":
/*!******************************!*\
  !*** external "async_hooks" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("async_hooks");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "console":
/*!**************************!*\
  !*** external "console" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("console");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "diagnostics_channel":
/*!**************************************!*\
  !*** external "diagnostics_channel" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("diagnostics_channel");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "perf_hooks":
/*!*****************************!*\
  !*** external "perf_hooks" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("perf_hooks");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "stream/web":
/*!*****************************!*\
  !*** external "stream/web" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("stream/web");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("string_decoder");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "util/types":
/*!*****************************!*\
  !*** external "util/types" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("util/types");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsales%2Fprospects%2Froute&page=%2Fapi%2Fsales%2Fprospects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsales%2Fprospects%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsales%2Fprospects%2Froute&page=%2Fapi%2Fsales%2Fprospects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsales%2Fprospects%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_sales_prospects_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/sales/prospects/route.ts */ \"(rsc)/./app/api/sales/prospects/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_sales_prospects_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_sales_prospects_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/sales/prospects/route\",\n        pathname: \"/api/sales/prospects\",\n        filename: \"route\",\n        bundlePath: \"app/api/sales/prospects/route\"\n    },\n    resolvedPagePath: \"/Users/miguelgiraldo/DEVSPACE/dev_gladgrade_portal/app/api/sales/prospects/route.ts\",\n    nextConfigOutput,\n    userland: _Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_sales_prospects_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/sales/prospects/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzYWxlcyUyRnByb3NwZWN0cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc2FsZXMlMkZwcm9zcGVjdHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzYWxlcyUyRnByb3NwZWN0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1pZ3VlbGdpcmFsZG8lMkZERVZTUEFDRSUyRmRldl9nbGFkZ3JhZGVfcG9ydGFsJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRm1pZ3VlbGdpcmFsZG8lMkZERVZTUEFDRSUyRmRldl9nbGFkZ3JhZGVfcG9ydGFsJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNtQztBQUNoSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvPzFlMmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL21pZ3VlbGdpcmFsZG8vREVWU1BBQ0UvZGV2X2dsYWRncmFkZV9wb3J0YWwvYXBwL2FwaS9zYWxlcy9wcm9zcGVjdHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NhbGVzL3Byb3NwZWN0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3NhbGVzL3Byb3NwZWN0c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc2FsZXMvcHJvc3BlY3RzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL21pZ3VlbGdpcmFsZG8vREVWU1BBQ0UvZGV2X2dsYWRncmFkZV9wb3J0YWwvYXBwL2FwaS9zYWxlcy9wcm9zcGVjdHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3NhbGVzL3Byb3NwZWN0cy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsales%2Fprospects%2Froute&page=%2Fapi%2Fsales%2Fprospects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsales%2Fprospects%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/sales/prospects/route.ts":
/*!******************************************!*\
  !*** ./app/api/sales/prospects/route.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./lib/database.ts\");\n/* harmony import */ var _lib_auth_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth-utils */ \"(rsc)/./lib/auth-utils.ts\");\n/* harmony import */ var _lib_audit_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/audit-logger */ \"(rsc)/./lib/audit-logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database__WEBPACK_IMPORTED_MODULE_1__, _lib_auth_utils__WEBPACK_IMPORTED_MODULE_2__, _lib_audit_logger__WEBPACK_IMPORTED_MODULE_3__]);\n([_lib_database__WEBPACK_IMPORTED_MODULE_1__, _lib_auth_utils__WEBPACK_IMPORTED_MODULE_2__, _lib_audit_logger__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n// IMPROVED: Get current user from request with better detection\nasync function getCurrentUser(request) {\n    try {\n        // Method 1: Try Firebase UID from header\n        const firebaseUid = request.headers.get(\"x-firebase-uid\");\n        if (firebaseUid) {\n            const user = await (0,_lib_auth_utils__WEBPACK_IMPORTED_MODULE_2__.getEmployeeByAuth)(firebaseUid);\n            if (user) {\n                console.log(\"✅ User found by Firebase UID:\", user.name);\n                return user;\n            }\n        }\n        // Method 2: Try email from header\n        const userEmail = request.headers.get(\"x-user-email\");\n        if (userEmail) {\n            const user = await (0,_lib_auth_utils__WEBPACK_IMPORTED_MODULE_2__.getEmployeeByAuth)(undefined, userEmail);\n            if (user) {\n                console.log(\"✅ User found by email:\", user.name);\n                return user;\n            }\n        }\n        // Method 3: Try to extract from Authorization header (if using Firebase tokens)\n        const authHeader = request.headers.get(\"authorization\");\n        if (authHeader && authHeader.startsWith(\"Bearer \")) {\n            // TODO: Implement Firebase token verification here\n            console.log(\"\\uD83D\\uDD0D Found Bearer token, but verification not implemented yet\");\n        }\n        // Method 4: For testing, check for a test user header\n        const testUser = request.headers.get(\"x-test-user\");\n        if (testUser) {\n            const user = await (0,_lib_auth_utils__WEBPACK_IMPORTED_MODULE_2__.getEmployeeByAuth)(undefined, testUser);\n            if (user) {\n                console.log(\"\\uD83E\\uDDEA Test user found:\", user.name);\n                return user;\n            }\n        }\n        console.log(\"❌ No authenticated user found in request\");\n        return null;\n    } catch (error) {\n        console.error(\"❌ Error getting current user:\", error);\n        return null;\n    }\n}\n// GET /api/sales/prospects - Get prospects with role-based filtering\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const salespersonId = searchParams.get(\"salesperson_id\");\n        const userEmail = request.headers.get(\"x-user-email\");\n        const viewAll = searchParams.get(\"view_all\") === \"true\";\n        console.log(\"\\uD83D\\uDD0D Prospects API called with:\", {\n            salespersonId,\n            userEmail,\n            viewAll\n        });\n        // Get current user to determine access level\n        const currentUser = await getCurrentUser(request);\n        if (!currentUser) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        let whereClause = \"\";\n        let queryParams = [];\n        // Role-based access control\n        const canViewAll = [\n            \"super_admin\",\n            \"sales_manager\",\n            \"admin\"\n        ].includes(currentUser.role);\n        if (viewAll && canViewAll) {\n            // Super admin, sales manager, admin can see all prospects\n            console.log(`🔓 ${currentUser.role} viewing all prospects`);\n            whereClause = \"\" // No filtering\n            ;\n        } else if (salespersonId) {\n            // Specific salesperson filter\n            whereClause = \"WHERE p.assigned_salesperson_id = $1\";\n            queryParams = [\n                Number.parseInt(salespersonId)\n            ];\n        } else {\n            // Regular employees see only their own prospects\n            whereClause = \"WHERE p.assigned_salesperson_id = $1\";\n            queryParams = [\n                currentUser.id\n            ];\n            console.log(`🔒 ${currentUser.role} viewing own prospects only (ID: ${currentUser.id})`);\n        }\n        const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(`SELECT \n        p.*,\n        e.full_name as assigned_salesperson_name,\n        e.email as assigned_salesperson_email,\n        e.role as assigned_salesperson_role,\n        d.name as assigned_salesperson_department\n       FROM prospects p\n       LEFT JOIN employees e ON p.assigned_salesperson_id = e.id\n       LEFT JOIN departments d ON e.department_id = d.id\n       ${whereClause}\n       ORDER BY p.created_at DESC`, queryParams);\n        console.log(`📊 Found ${result.rows.length} prospects for ${currentUser.name} (${currentUser.role})`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: result.rows,\n            count: result.rows.length,\n            user_role: currentUser.role,\n            can_view_all: canViewAll\n        });\n    } catch (error) {\n        console.error(\"❌ Error fetching prospects:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to fetch prospects\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/sales/prospects - Create new prospect (assigned to creator)\nasync function POST(request) {\n    const client = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.getClient)();\n    try {\n        const body = await request.json();\n        console.log(\"\\uD83D\\uDCDD Creating prospect with data:\", body);\n        const { business_name, place_id, address, phone, website, industry, contact_name, contact_email, estimated_value, priority = \"medium\", notes, services = [], // Allow manual assignment for testing\n        assigned_salesperson_id } = body;\n        // Validation\n        if (!business_name?.trim()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Business name is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get current user (the person creating the prospect)\n        const currentUser = await getCurrentUser(request);\n        // If no authenticated user found, use the manually assigned salesperson or default to Ada\n        let finalSalespersonId = assigned_salesperson_id || 7 // Default to Ada for now\n        ;\n        if (currentUser) {\n            // IMPORTANT: The prospect is assigned to the person who creates it\n            finalSalespersonId = currentUser.id;\n            console.log(`🔍 Assigning prospect to authenticated creator: ${currentUser.name} (ID: ${finalSalespersonId})`);\n        } else {\n            console.log(`⚠️ No authenticated user found, using assigned_salesperson_id: ${finalSalespersonId}`);\n        }\n        await client.query(\"BEGIN\");\n        // Insert prospect - assigned to the creator or specified salesperson\n        const prospectResult = await client.query(`INSERT INTO prospects (\n        business_name, place_id, formatted_address, phone, website, business_type,\n        contact_name, contact_email, assigned_salesperson_id, priority, \n        estimated_value, notes, status, created_at\n      ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, NOW())\n      RETURNING *`, [\n            business_name.trim(),\n            place_id || null,\n            address || null,\n            phone || null,\n            website || null,\n            industry || null,\n            contact_name?.trim() || null,\n            contact_email?.toLowerCase().trim() || null,\n            finalSalespersonId,\n            priority,\n            Number.parseFloat(estimated_value?.toString() || \"0\") || 0,\n            notes || null,\n            \"new\"\n        ]);\n        const prospect = prospectResult.rows[0];\n        // Add services to prospect if provided\n        if (services && services.length > 0) {\n            for (const serviceId of services){\n                await client.query(`INSERT INTO prospect_services (prospect_id, service_id, quantity)\n           VALUES ($1, $2, $3)`, [\n                    prospect.id,\n                    serviceId,\n                    1\n                ]);\n            }\n        }\n        // Log initial activity\n        await client.query(`INSERT INTO sales_activities (prospect_id, employee_id, activity_type, subject, description, completed_at)\n       VALUES ($1, $2, $3, $4, $5, NOW())`, [\n            prospect.id,\n            finalSalespersonId,\n            \"prospect_created\",\n            \"New prospect created\",\n            `Prospect ${business_name} created ${currentUser ? `by ${currentUser.name}` : \"via API\"} with ${services.length} services assigned`\n        ]);\n        await client.query(\"COMMIT\");\n        // Log the prospect creation in audit log\n        if (currentUser) {\n            await _lib_audit_logger__WEBPACK_IMPORTED_MODULE_3__[\"default\"].logProspectCreation(currentUser.id, currentUser.name, currentUser.role, prospect.id, {\n                business_name,\n                contact_name,\n                contact_email,\n                assigned_salesperson_id: finalSalespersonId,\n                estimated_value,\n                priority,\n                services_count: services.length\n            });\n        }\n        console.log(\"✅ Prospect created successfully with ID:\", prospect.id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: prospect,\n            message: `Prospect created successfully and assigned to ${currentUser ? currentUser.name : `employee ID ${finalSalespersonId}`}`,\n            debug: {\n                authenticated_user: currentUser ? currentUser.name : \"None\",\n                assigned_to_id: finalSalespersonId\n            }\n        });\n    } catch (error) {\n        await client.query(\"ROLLBACK\");\n        console.error(\"❌ Error creating prospect:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to create prospect\",\n            details: errorMessage\n        }, {\n            status: 500\n        });\n    } finally{\n        client.release();\n    }\n}\n// PUT /api/sales/prospects - Update prospect with ownership change restrictions\nasync function PUT(request) {\n    const client = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.getClient)();\n    try {\n        const body = await request.json();\n        const { id, assigned_salesperson_id, change_reason, ...otherFields } = body;\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Prospect ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get current user\n        const currentUser = await getCurrentUser(request);\n        if (!currentUser) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        await client.query(\"BEGIN\");\n        // Get current prospect data\n        const currentProspectResult = await client.query(\"SELECT * FROM prospects WHERE id = $1\", [\n            id\n        ]);\n        const currentProspect = currentProspectResult.rows[0];\n        if (!currentProspect) {\n            await client.query(\"ROLLBACK\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Prospect not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Check if ownership is being changed\n        const isOwnershipChange = assigned_salesperson_id && assigned_salesperson_id !== currentProspect.assigned_salesperson_id;\n        // Only allow ownership changes by super_admin or sales_manager\n        if (isOwnershipChange) {\n            const allowedRoles = [\n                \"super_admin\",\n                \"sales_manager\"\n            ];\n            if (!allowedRoles.includes(currentUser.role)) {\n                await client.query(\"ROLLBACK\");\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Only Super Admin or Sales Manager can change prospect ownership\"\n                }, {\n                    status: 403\n                });\n            }\n            // Log the ownership change\n            await _lib_audit_logger__WEBPACK_IMPORTED_MODULE_3__[\"default\"].logProspectOwnershipChange(currentUser.id, currentUser.name, currentUser.role, id, currentProspect.assigned_salesperson_id, assigned_salesperson_id, change_reason || \"Ownership reassignment\");\n        }\n        // Update prospect\n        const updateFields = [];\n        const updateValues = [];\n        let paramCount = 0;\n        for (const [key, value] of Object.entries(otherFields)){\n            if (value !== undefined) {\n                paramCount++;\n                updateFields.push(`${key} = $${paramCount}`);\n                updateValues.push(value);\n            }\n        }\n        if (assigned_salesperson_id) {\n            paramCount++;\n            updateFields.push(`assigned_salesperson_id = $${paramCount}`);\n            updateValues.push(assigned_salesperson_id);\n        }\n        paramCount++;\n        updateFields.push(`updated_at = $${paramCount}`);\n        updateValues.push(new Date());\n        updateValues.push(id) // For WHERE clause\n        ;\n        const updateQuery = `\n      UPDATE prospects \n      SET ${updateFields.join(\", \")}\n      WHERE id = $${paramCount + 1}\n      RETURNING *\n    `;\n        const result = await client.query(updateQuery, updateValues);\n        await client.query(\"COMMIT\");\n        // Log the general update\n        await _lib_audit_logger__WEBPACK_IMPORTED_MODULE_3__[\"default\"].log({\n            userId: currentUser.id,\n            userName: currentUser.name,\n            userRole: currentUser.role,\n            actionType: \"UPDATE\",\n            tableName: \"prospects\",\n            recordId: id,\n            actionDescription: `Updated prospect: ${currentProspect.business_name}`,\n            oldValues: currentProspect,\n            newValues: result.rows[0],\n            businessContext: \"sales_pipeline\",\n            severityLevel: isOwnershipChange ? \"warning\" : \"info\"\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: result.rows[0],\n            message: isOwnershipChange ? \"Prospect ownership changed successfully\" : \"Prospect updated successfully\"\n        });\n    } catch (error) {\n        await client.query(\"ROLLBACK\");\n        console.error(\"❌ Error updating prospect:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to update prospect\",\n            details: errorMessage\n        }, {\n            status: 500\n        });\n    } finally{\n        client.release();\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T2pFLE9BQWdCO1FBQ3ZCLE1BQU04QixPQUFPaEQsS0FBSyxDQUFDO1FBQ25CVSxRQUFRUSxLQUFLLENBQUMsOEJBQThCQTtRQUM1QyxNQUFNMEQsZUFBZTFELGlCQUFpQjJCLFFBQVEzQixNQUFNNEIsT0FBTyxHQUFHO1FBRTlELE9BQU8vQyxxREFBWUEsQ0FBQzJCLElBQUksQ0FDdEI7WUFDRUMsU0FBUztZQUNUVCxPQUFPO1lBQ1AwQixTQUFTZ0M7UUFDWCxHQUNBO1lBQUVoRCxRQUFRO1FBQUk7SUFFbEIsU0FBVTtRQUNSb0IsT0FBTzZCLE9BQU87SUFDaEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9hcHAvYXBpL3NhbGVzL3Byb3NwZWN0cy9yb3V0ZS50cz8yZGIzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgeyBxdWVyeSwgZ2V0Q2xpZW50IH0gZnJvbSBcIkAvbGliL2RhdGFiYXNlXCJcbmltcG9ydCB7IGdldEVtcGxveWVlQnlBdXRoIH0gZnJvbSBcIkAvbGliL2F1dGgtdXRpbHNcIlxuaW1wb3J0IEF1ZGl0TG9nZ2VyIGZyb20gXCJAL2xpYi9hdWRpdC1sb2dnZXJcIlxuXG4vLyBJTVBST1ZFRDogR2V0IGN1cnJlbnQgdXNlciBmcm9tIHJlcXVlc3Qgd2l0aCBiZXR0ZXIgZGV0ZWN0aW9uXG5hc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcihyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIE1ldGhvZCAxOiBUcnkgRmlyZWJhc2UgVUlEIGZyb20gaGVhZGVyXG4gICAgY29uc3QgZmlyZWJhc2VVaWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC1maXJlYmFzZS11aWRcIilcbiAgICBpZiAoZmlyZWJhc2VVaWQpIHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRFbXBsb3llZUJ5QXV0aChmaXJlYmFzZVVpZClcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFVzZXIgZm91bmQgYnkgRmlyZWJhc2UgVUlEOlwiLCB1c2VyLm5hbWUpXG4gICAgICAgIHJldHVybiB1c2VyXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWV0aG9kIDI6IFRyeSBlbWFpbCBmcm9tIGhlYWRlclxuICAgIGNvbnN0IHVzZXJFbWFpbCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ4LXVzZXItZW1haWxcIilcbiAgICBpZiAodXNlckVtYWlsKSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0RW1wbG95ZWVCeUF1dGgodW5kZWZpbmVkLCB1c2VyRW1haWwpXG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBjb25zb2xlLmxvZyhcIuKchSBVc2VyIGZvdW5kIGJ5IGVtYWlsOlwiLCB1c2VyLm5hbWUpXG4gICAgICAgIHJldHVybiB1c2VyXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWV0aG9kIDM6IFRyeSB0byBleHRyYWN0IGZyb20gQXV0aG9yaXphdGlvbiBoZWFkZXIgKGlmIHVzaW5nIEZpcmViYXNlIHRva2VucylcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldChcImF1dGhvcml6YXRpb25cIilcbiAgICBpZiAoYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoXCJCZWFyZXIgXCIpKSB7XG4gICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgRmlyZWJhc2UgdG9rZW4gdmVyaWZpY2F0aW9uIGhlcmVcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+UjSBGb3VuZCBCZWFyZXIgdG9rZW4sIGJ1dCB2ZXJpZmljYXRpb24gbm90IGltcGxlbWVudGVkIHlldFwiKVxuICAgIH1cblxuICAgIC8vIE1ldGhvZCA0OiBGb3IgdGVzdGluZywgY2hlY2sgZm9yIGEgdGVzdCB1c2VyIGhlYWRlclxuICAgIGNvbnN0IHRlc3RVc2VyID0gcmVxdWVzdC5oZWFkZXJzLmdldChcIngtdGVzdC11c2VyXCIpXG4gICAgaWYgKHRlc3RVc2VyKSB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0RW1wbG95ZWVCeUF1dGgodW5kZWZpbmVkLCB0ZXN0VXNlcilcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+nqiBUZXN0IHVzZXIgZm91bmQ6XCIsIHVzZXIubmFtZSlcbiAgICAgICAgcmV0dXJuIHVzZXJcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIuKdjCBObyBhdXRoZW50aWNhdGVkIHVzZXIgZm91bmQgaW4gcmVxdWVzdFwiKVxuICAgIHJldHVybiBudWxsXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBnZXR0aW5nIGN1cnJlbnQgdXNlcjpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vLyBHRVQgL2FwaS9zYWxlcy9wcm9zcGVjdHMgLSBHZXQgcHJvc3BlY3RzIHdpdGggcm9sZS1iYXNlZCBmaWx0ZXJpbmdcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcbiAgICBjb25zdCBzYWxlc3BlcnNvbklkID0gc2VhcmNoUGFyYW1zLmdldChcInNhbGVzcGVyc29uX2lkXCIpXG4gICAgY29uc3QgdXNlckVtYWlsID0gcmVxdWVzdC5oZWFkZXJzLmdldChcIngtdXNlci1lbWFpbFwiKVxuICAgIGNvbnN0IHZpZXdBbGwgPSBzZWFyY2hQYXJhbXMuZ2V0KFwidmlld19hbGxcIikgPT09IFwidHJ1ZVwiXG5cbiAgICBjb25zb2xlLmxvZyhcIvCflI0gUHJvc3BlY3RzIEFQSSBjYWxsZWQgd2l0aDpcIiwgeyBzYWxlc3BlcnNvbklkLCB1c2VyRW1haWwsIHZpZXdBbGwgfSlcblxuICAgIC8vIEdldCBjdXJyZW50IHVzZXIgdG8gZGV0ZXJtaW5lIGFjY2VzcyBsZXZlbFxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIocmVxdWVzdClcbiAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuXG4gICAgbGV0IHdoZXJlQ2xhdXNlID0gXCJcIlxuICAgIGxldCBxdWVyeVBhcmFtczogYW55W10gPSBbXVxuXG4gICAgLy8gUm9sZS1iYXNlZCBhY2Nlc3MgY29udHJvbFxuICAgIGNvbnN0IGNhblZpZXdBbGwgPSBbXCJzdXBlcl9hZG1pblwiLCBcInNhbGVzX21hbmFnZXJcIiwgXCJhZG1pblwiXS5pbmNsdWRlcyhjdXJyZW50VXNlci5yb2xlKVxuXG4gICAgaWYgKHZpZXdBbGwgJiYgY2FuVmlld0FsbCkge1xuICAgICAgLy8gU3VwZXIgYWRtaW4sIHNhbGVzIG1hbmFnZXIsIGFkbWluIGNhbiBzZWUgYWxsIHByb3NwZWN0c1xuICAgICAgY29uc29sZS5sb2coYPCflJMgJHtjdXJyZW50VXNlci5yb2xlfSB2aWV3aW5nIGFsbCBwcm9zcGVjdHNgKVxuICAgICAgd2hlcmVDbGF1c2UgPSBcIlwiIC8vIE5vIGZpbHRlcmluZ1xuICAgIH0gZWxzZSBpZiAoc2FsZXNwZXJzb25JZCkge1xuICAgICAgLy8gU3BlY2lmaWMgc2FsZXNwZXJzb24gZmlsdGVyXG4gICAgICB3aGVyZUNsYXVzZSA9IFwiV0hFUkUgcC5hc3NpZ25lZF9zYWxlc3BlcnNvbl9pZCA9ICQxXCJcbiAgICAgIHF1ZXJ5UGFyYW1zID0gW051bWJlci5wYXJzZUludChzYWxlc3BlcnNvbklkKV1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVndWxhciBlbXBsb3llZXMgc2VlIG9ubHkgdGhlaXIgb3duIHByb3NwZWN0c1xuICAgICAgd2hlcmVDbGF1c2UgPSBcIldIRVJFIHAuYXNzaWduZWRfc2FsZXNwZXJzb25faWQgPSAkMVwiXG4gICAgICBxdWVyeVBhcmFtcyA9IFtjdXJyZW50VXNlci5pZF1cbiAgICAgIGNvbnNvbGUubG9nKGDwn5SSICR7Y3VycmVudFVzZXIucm9sZX0gdmlld2luZyBvd24gcHJvc3BlY3RzIG9ubHkgKElEOiAke2N1cnJlbnRVc2VyLmlkfSlgKVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KFxuICAgICAgYFNFTEVDVCBcbiAgICAgICAgcC4qLFxuICAgICAgICBlLmZ1bGxfbmFtZSBhcyBhc3NpZ25lZF9zYWxlc3BlcnNvbl9uYW1lLFxuICAgICAgICBlLmVtYWlsIGFzIGFzc2lnbmVkX3NhbGVzcGVyc29uX2VtYWlsLFxuICAgICAgICBlLnJvbGUgYXMgYXNzaWduZWRfc2FsZXNwZXJzb25fcm9sZSxcbiAgICAgICAgZC5uYW1lIGFzIGFzc2lnbmVkX3NhbGVzcGVyc29uX2RlcGFydG1lbnRcbiAgICAgICBGUk9NIHByb3NwZWN0cyBwXG4gICAgICAgTEVGVCBKT0lOIGVtcGxveWVlcyBlIE9OIHAuYXNzaWduZWRfc2FsZXNwZXJzb25faWQgPSBlLmlkXG4gICAgICAgTEVGVCBKT0lOIGRlcGFydG1lbnRzIGQgT04gZS5kZXBhcnRtZW50X2lkID0gZC5pZFxuICAgICAgICR7d2hlcmVDbGF1c2V9XG4gICAgICAgT1JERVIgQlkgcC5jcmVhdGVkX2F0IERFU0NgLFxuICAgICAgcXVlcnlQYXJhbXMsXG4gICAgKVxuXG4gICAgY29uc29sZS5sb2coYPCfk4ogRm91bmQgJHtyZXN1bHQucm93cy5sZW5ndGh9IHByb3NwZWN0cyBmb3IgJHtjdXJyZW50VXNlci5uYW1lfSAoJHtjdXJyZW50VXNlci5yb2xlfSlgKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiByZXN1bHQucm93cyxcbiAgICAgIGNvdW50OiByZXN1bHQucm93cy5sZW5ndGgsXG4gICAgICB1c2VyX3JvbGU6IGN1cnJlbnRVc2VyLnJvbGUsXG4gICAgICBjYW5fdmlld19hbGw6IGNhblZpZXdBbGwsXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGZldGNoaW5nIHByb3NwZWN0czpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIGZldGNoIHByb3NwZWN0c1wiLFxuICAgICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfSxcbiAgICApXG4gIH1cbn1cblxuLy8gUE9TVCAvYXBpL3NhbGVzL3Byb3NwZWN0cyAtIENyZWF0ZSBuZXcgcHJvc3BlY3QgKGFzc2lnbmVkIHRvIGNyZWF0b3IpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRDbGllbnQoKVxuXG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgY29uc29sZS5sb2coXCLwn5OdIENyZWF0aW5nIHByb3NwZWN0IHdpdGggZGF0YTpcIiwgYm9keSlcblxuICAgIGNvbnN0IHtcbiAgICAgIGJ1c2luZXNzX25hbWUsXG4gICAgICBwbGFjZV9pZCxcbiAgICAgIGFkZHJlc3MsXG4gICAgICBwaG9uZSxcbiAgICAgIHdlYnNpdGUsXG4gICAgICBpbmR1c3RyeSxcbiAgICAgIGNvbnRhY3RfbmFtZSxcbiAgICAgIGNvbnRhY3RfZW1haWwsXG4gICAgICBlc3RpbWF0ZWRfdmFsdWUsXG4gICAgICBwcmlvcml0eSA9IFwibWVkaXVtXCIsXG4gICAgICBub3RlcyxcbiAgICAgIHNlcnZpY2VzID0gW10sXG4gICAgICAvLyBBbGxvdyBtYW51YWwgYXNzaWdubWVudCBmb3IgdGVzdGluZ1xuICAgICAgYXNzaWduZWRfc2FsZXNwZXJzb25faWQsXG4gICAgfSA9IGJvZHlcblxuICAgIC8vIFZhbGlkYXRpb25cbiAgICBpZiAoIWJ1c2luZXNzX25hbWU/LnRyaW0oKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkJ1c2luZXNzIG5hbWUgaXMgcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgLy8gR2V0IGN1cnJlbnQgdXNlciAodGhlIHBlcnNvbiBjcmVhdGluZyB0aGUgcHJvc3BlY3QpXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcihyZXF1ZXN0KVxuXG4gICAgLy8gSWYgbm8gYXV0aGVudGljYXRlZCB1c2VyIGZvdW5kLCB1c2UgdGhlIG1hbnVhbGx5IGFzc2lnbmVkIHNhbGVzcGVyc29uIG9yIGRlZmF1bHQgdG8gQWRhXG4gICAgbGV0IGZpbmFsU2FsZXNwZXJzb25JZCA9IGFzc2lnbmVkX3NhbGVzcGVyc29uX2lkIHx8IDcgLy8gRGVmYXVsdCB0byBBZGEgZm9yIG5vd1xuXG4gICAgaWYgKGN1cnJlbnRVc2VyKSB7XG4gICAgICAvLyBJTVBPUlRBTlQ6IFRoZSBwcm9zcGVjdCBpcyBhc3NpZ25lZCB0byB0aGUgcGVyc29uIHdobyBjcmVhdGVzIGl0XG4gICAgICBmaW5hbFNhbGVzcGVyc29uSWQgPSBjdXJyZW50VXNlci5pZFxuICAgICAgY29uc29sZS5sb2coYPCflI0gQXNzaWduaW5nIHByb3NwZWN0IHRvIGF1dGhlbnRpY2F0ZWQgY3JlYXRvcjogJHtjdXJyZW50VXNlci5uYW1lfSAoSUQ6ICR7ZmluYWxTYWxlc3BlcnNvbklkfSlgKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhg4pqg77iPIE5vIGF1dGhlbnRpY2F0ZWQgdXNlciBmb3VuZCwgdXNpbmcgYXNzaWduZWRfc2FsZXNwZXJzb25faWQ6ICR7ZmluYWxTYWxlc3BlcnNvbklkfWApXG4gICAgfVxuXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KFwiQkVHSU5cIilcblxuICAgIC8vIEluc2VydCBwcm9zcGVjdCAtIGFzc2lnbmVkIHRvIHRoZSBjcmVhdG9yIG9yIHNwZWNpZmllZCBzYWxlc3BlcnNvblxuICAgIGNvbnN0IHByb3NwZWN0UmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KFxuICAgICAgYElOU0VSVCBJTlRPIHByb3NwZWN0cyAoXG4gICAgICAgIGJ1c2luZXNzX25hbWUsIHBsYWNlX2lkLCBmb3JtYXR0ZWRfYWRkcmVzcywgcGhvbmUsIHdlYnNpdGUsIGJ1c2luZXNzX3R5cGUsXG4gICAgICAgIGNvbnRhY3RfbmFtZSwgY29udGFjdF9lbWFpbCwgYXNzaWduZWRfc2FsZXNwZXJzb25faWQsIHByaW9yaXR5LCBcbiAgICAgICAgZXN0aW1hdGVkX3ZhbHVlLCBub3Rlcywgc3RhdHVzLCBjcmVhdGVkX2F0XG4gICAgICApIFZBTFVFUyAoJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCAkOSwgJDEwLCAkMTEsICQxMiwgJDEzLCBOT1coKSlcbiAgICAgIFJFVFVSTklORyAqYCxcbiAgICAgIFtcbiAgICAgICAgYnVzaW5lc3NfbmFtZS50cmltKCksXG4gICAgICAgIHBsYWNlX2lkIHx8IG51bGwsXG4gICAgICAgIGFkZHJlc3MgfHwgbnVsbCxcbiAgICAgICAgcGhvbmUgfHwgbnVsbCxcbiAgICAgICAgd2Vic2l0ZSB8fCBudWxsLFxuICAgICAgICBpbmR1c3RyeSB8fCBudWxsLFxuICAgICAgICBjb250YWN0X25hbWU/LnRyaW0oKSB8fCBudWxsLFxuICAgICAgICBjb250YWN0X2VtYWlsPy50b0xvd2VyQ2FzZSgpLnRyaW0oKSB8fCBudWxsLFxuICAgICAgICBmaW5hbFNhbGVzcGVyc29uSWQsXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICBOdW1iZXIucGFyc2VGbG9hdChlc3RpbWF0ZWRfdmFsdWU/LnRvU3RyaW5nKCkgfHwgXCIwXCIpIHx8IDAsXG4gICAgICAgIG5vdGVzIHx8IG51bGwsXG4gICAgICAgIFwibmV3XCIsXG4gICAgICBdLFxuICAgIClcblxuICAgIGNvbnN0IHByb3NwZWN0ID0gcHJvc3BlY3RSZXN1bHQucm93c1swXVxuXG4gICAgLy8gQWRkIHNlcnZpY2VzIHRvIHByb3NwZWN0IGlmIHByb3ZpZGVkXG4gICAgaWYgKHNlcnZpY2VzICYmIHNlcnZpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3Qgc2VydmljZUlkIG9mIHNlcnZpY2VzKSB7XG4gICAgICAgIGF3YWl0IGNsaWVudC5xdWVyeShcbiAgICAgICAgICBgSU5TRVJUIElOVE8gcHJvc3BlY3Rfc2VydmljZXMgKHByb3NwZWN0X2lkLCBzZXJ2aWNlX2lkLCBxdWFudGl0eSlcbiAgICAgICAgICAgVkFMVUVTICgkMSwgJDIsICQzKWAsXG4gICAgICAgICAgW3Byb3NwZWN0LmlkLCBzZXJ2aWNlSWQsIDFdLFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTG9nIGluaXRpYWwgYWN0aXZpdHlcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoXG4gICAgICBgSU5TRVJUIElOVE8gc2FsZXNfYWN0aXZpdGllcyAocHJvc3BlY3RfaWQsIGVtcGxveWVlX2lkLCBhY3Rpdml0eV90eXBlLCBzdWJqZWN0LCBkZXNjcmlwdGlvbiwgY29tcGxldGVkX2F0KVxuICAgICAgIFZBTFVFUyAoJDEsICQyLCAkMywgJDQsICQ1LCBOT1coKSlgLFxuICAgICAgW1xuICAgICAgICBwcm9zcGVjdC5pZCxcbiAgICAgICAgZmluYWxTYWxlc3BlcnNvbklkLFxuICAgICAgICBcInByb3NwZWN0X2NyZWF0ZWRcIixcbiAgICAgICAgXCJOZXcgcHJvc3BlY3QgY3JlYXRlZFwiLFxuICAgICAgICBgUHJvc3BlY3QgJHtidXNpbmVzc19uYW1lfSBjcmVhdGVkICR7Y3VycmVudFVzZXIgPyBgYnkgJHtjdXJyZW50VXNlci5uYW1lfWAgOiBcInZpYSBBUElcIn0gd2l0aCAke3NlcnZpY2VzLmxlbmd0aH0gc2VydmljZXMgYXNzaWduZWRgLFxuICAgICAgXSxcbiAgICApXG5cbiAgICBhd2FpdCBjbGllbnQucXVlcnkoXCJDT01NSVRcIilcblxuICAgIC8vIExvZyB0aGUgcHJvc3BlY3QgY3JlYXRpb24gaW4gYXVkaXQgbG9nXG4gICAgaWYgKGN1cnJlbnRVc2VyKSB7XG4gICAgICBhd2FpdCBBdWRpdExvZ2dlci5sb2dQcm9zcGVjdENyZWF0aW9uKGN1cnJlbnRVc2VyLmlkLCBjdXJyZW50VXNlci5uYW1lLCBjdXJyZW50VXNlci5yb2xlLCBwcm9zcGVjdC5pZCwge1xuICAgICAgICBidXNpbmVzc19uYW1lLFxuICAgICAgICBjb250YWN0X25hbWUsXG4gICAgICAgIGNvbnRhY3RfZW1haWwsXG4gICAgICAgIGFzc2lnbmVkX3NhbGVzcGVyc29uX2lkOiBmaW5hbFNhbGVzcGVyc29uSWQsXG4gICAgICAgIGVzdGltYXRlZF92YWx1ZSxcbiAgICAgICAgcHJpb3JpdHksXG4gICAgICAgIHNlcnZpY2VzX2NvdW50OiBzZXJ2aWNlcy5sZW5ndGgsXG4gICAgICB9KVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwi4pyFIFByb3NwZWN0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IHdpdGggSUQ6XCIsIHByb3NwZWN0LmlkKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBwcm9zcGVjdCxcbiAgICAgIG1lc3NhZ2U6IGBQcm9zcGVjdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseSBhbmQgYXNzaWduZWQgdG8gJHtjdXJyZW50VXNlciA/IGN1cnJlbnRVc2VyLm5hbWUgOiBgZW1wbG95ZWUgSUQgJHtmaW5hbFNhbGVzcGVyc29uSWR9YH1gLFxuICAgICAgZGVidWc6IHtcbiAgICAgICAgYXV0aGVudGljYXRlZF91c2VyOiBjdXJyZW50VXNlciA/IGN1cnJlbnRVc2VyLm5hbWUgOiBcIk5vbmVcIixcbiAgICAgICAgYXNzaWduZWRfdG9faWQ6IGZpbmFsU2FsZXNwZXJzb25JZCxcbiAgICAgIH0sXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoXCJST0xMQkFDS1wiKVxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgY3JlYXRpbmcgcHJvc3BlY3Q6XCIsIGVycm9yKVxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yIG9jY3VycmVkXCJcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBjcmVhdGUgcHJvc3BlY3RcIixcbiAgICAgICAgZGV0YWlsczogZXJyb3JNZXNzYWdlLFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfSxcbiAgICApXG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKVxuICB9XG59XG5cbi8vIFBVVCAvYXBpL3NhbGVzL3Byb3NwZWN0cyAtIFVwZGF0ZSBwcm9zcGVjdCB3aXRoIG93bmVyc2hpcCBjaGFuZ2UgcmVzdHJpY3Rpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldENsaWVudCgpXG5cbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7IGlkLCBhc3NpZ25lZF9zYWxlc3BlcnNvbl9pZCwgY2hhbmdlX3JlYXNvbiwgLi4ub3RoZXJGaWVsZHMgfSA9IGJvZHlcblxuICAgIGlmICghaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJQcm9zcGVjdCBJRCBpcyByZXF1aXJlZFwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICAvLyBHZXQgY3VycmVudCB1c2VyXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcihyZXF1ZXN0KVxuICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiIH0sIHsgc3RhdHVzOiA0MDEgfSlcbiAgICB9XG5cbiAgICBhd2FpdCBjbGllbnQucXVlcnkoXCJCRUdJTlwiKVxuXG4gICAgLy8gR2V0IGN1cnJlbnQgcHJvc3BlY3QgZGF0YVxuICAgIGNvbnN0IGN1cnJlbnRQcm9zcGVjdFJlc3VsdCA9IGF3YWl0IGNsaWVudC5xdWVyeShcIlNFTEVDVCAqIEZST00gcHJvc3BlY3RzIFdIRVJFIGlkID0gJDFcIiwgW2lkXSlcbiAgICBjb25zdCBjdXJyZW50UHJvc3BlY3QgPSBjdXJyZW50UHJvc3BlY3RSZXN1bHQucm93c1swXVxuXG4gICAgaWYgKCFjdXJyZW50UHJvc3BlY3QpIHtcbiAgICAgIGF3YWl0IGNsaWVudC5xdWVyeShcIlJPTExCQUNLXCIpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiUHJvc3BlY3Qgbm90IGZvdW5kXCIgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIG93bmVyc2hpcCBpcyBiZWluZyBjaGFuZ2VkXG4gICAgY29uc3QgaXNPd25lcnNoaXBDaGFuZ2UgPVxuICAgICAgYXNzaWduZWRfc2FsZXNwZXJzb25faWQgJiYgYXNzaWduZWRfc2FsZXNwZXJzb25faWQgIT09IGN1cnJlbnRQcm9zcGVjdC5hc3NpZ25lZF9zYWxlc3BlcnNvbl9pZFxuXG4gICAgLy8gT25seSBhbGxvdyBvd25lcnNoaXAgY2hhbmdlcyBieSBzdXBlcl9hZG1pbiBvciBzYWxlc19tYW5hZ2VyXG4gICAgaWYgKGlzT3duZXJzaGlwQ2hhbmdlKSB7XG4gICAgICBjb25zdCBhbGxvd2VkUm9sZXMgPSBbXCJzdXBlcl9hZG1pblwiLCBcInNhbGVzX21hbmFnZXJcIl1cbiAgICAgIGlmICghYWxsb3dlZFJvbGVzLmluY2x1ZGVzKGN1cnJlbnRVc2VyLnJvbGUpKSB7XG4gICAgICAgIGF3YWl0IGNsaWVudC5xdWVyeShcIlJPTExCQUNLXCIpXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBcIk9ubHkgU3VwZXIgQWRtaW4gb3IgU2FsZXMgTWFuYWdlciBjYW4gY2hhbmdlIHByb3NwZWN0IG93bmVyc2hpcFwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMyB9LFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIC8vIExvZyB0aGUgb3duZXJzaGlwIGNoYW5nZVxuICAgICAgYXdhaXQgQXVkaXRMb2dnZXIubG9nUHJvc3BlY3RPd25lcnNoaXBDaGFuZ2UoXG4gICAgICAgIGN1cnJlbnRVc2VyLmlkLFxuICAgICAgICBjdXJyZW50VXNlci5uYW1lLFxuICAgICAgICBjdXJyZW50VXNlci5yb2xlLFxuICAgICAgICBpZCxcbiAgICAgICAgY3VycmVudFByb3NwZWN0LmFzc2lnbmVkX3NhbGVzcGVyc29uX2lkLFxuICAgICAgICBhc3NpZ25lZF9zYWxlc3BlcnNvbl9pZCxcbiAgICAgICAgY2hhbmdlX3JlYXNvbiB8fCBcIk93bmVyc2hpcCByZWFzc2lnbm1lbnRcIixcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcHJvc3BlY3RcbiAgICBjb25zdCB1cGRhdGVGaWVsZHMgPSBbXVxuICAgIGNvbnN0IHVwZGF0ZVZhbHVlcyA9IFtdXG4gICAgbGV0IHBhcmFtQ291bnQgPSAwXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvdGhlckZpZWxkcykpIHtcbiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhcmFtQ291bnQrK1xuICAgICAgICB1cGRhdGVGaWVsZHMucHVzaChgJHtrZXl9ID0gJCR7cGFyYW1Db3VudH1gKVxuICAgICAgICB1cGRhdGVWYWx1ZXMucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYXNzaWduZWRfc2FsZXNwZXJzb25faWQpIHtcbiAgICAgIHBhcmFtQ291bnQrK1xuICAgICAgdXBkYXRlRmllbGRzLnB1c2goYGFzc2lnbmVkX3NhbGVzcGVyc29uX2lkID0gJCR7cGFyYW1Db3VudH1gKVxuICAgICAgdXBkYXRlVmFsdWVzLnB1c2goYXNzaWduZWRfc2FsZXNwZXJzb25faWQpXG4gICAgfVxuXG4gICAgcGFyYW1Db3VudCsrXG4gICAgdXBkYXRlRmllbGRzLnB1c2goYHVwZGF0ZWRfYXQgPSAkJHtwYXJhbUNvdW50fWApXG4gICAgdXBkYXRlVmFsdWVzLnB1c2gobmV3IERhdGUoKSlcblxuICAgIHVwZGF0ZVZhbHVlcy5wdXNoKGlkKSAvLyBGb3IgV0hFUkUgY2xhdXNlXG5cbiAgICBjb25zdCB1cGRhdGVRdWVyeSA9IGBcbiAgICAgIFVQREFURSBwcm9zcGVjdHMgXG4gICAgICBTRVQgJHt1cGRhdGVGaWVsZHMuam9pbihcIiwgXCIpfVxuICAgICAgV0hFUkUgaWQgPSAkJHtwYXJhbUNvdW50ICsgMX1cbiAgICAgIFJFVFVSTklORyAqXG4gICAgYFxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KHVwZGF0ZVF1ZXJ5LCB1cGRhdGVWYWx1ZXMpXG5cbiAgICBhd2FpdCBjbGllbnQucXVlcnkoXCJDT01NSVRcIilcblxuICAgIC8vIExvZyB0aGUgZ2VuZXJhbCB1cGRhdGVcbiAgICBhd2FpdCBBdWRpdExvZ2dlci5sb2coe1xuICAgICAgdXNlcklkOiBjdXJyZW50VXNlci5pZCxcbiAgICAgIHVzZXJOYW1lOiBjdXJyZW50VXNlci5uYW1lLFxuICAgICAgdXNlclJvbGU6IGN1cnJlbnRVc2VyLnJvbGUsXG4gICAgICBhY3Rpb25UeXBlOiBcIlVQREFURVwiLFxuICAgICAgdGFibGVOYW1lOiBcInByb3NwZWN0c1wiLFxuICAgICAgcmVjb3JkSWQ6IGlkLFxuICAgICAgYWN0aW9uRGVzY3JpcHRpb246IGBVcGRhdGVkIHByb3NwZWN0OiAke2N1cnJlbnRQcm9zcGVjdC5idXNpbmVzc19uYW1lfWAsXG4gICAgICBvbGRWYWx1ZXM6IGN1cnJlbnRQcm9zcGVjdCxcbiAgICAgIG5ld1ZhbHVlczogcmVzdWx0LnJvd3NbMF0sXG4gICAgICBidXNpbmVzc0NvbnRleHQ6IFwic2FsZXNfcGlwZWxpbmVcIixcbiAgICAgIHNldmVyaXR5TGV2ZWw6IGlzT3duZXJzaGlwQ2hhbmdlID8gXCJ3YXJuaW5nXCIgOiBcImluZm9cIixcbiAgICB9KVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiByZXN1bHQucm93c1swXSxcbiAgICAgIG1lc3NhZ2U6IGlzT3duZXJzaGlwQ2hhbmdlID8gXCJQcm9zcGVjdCBvd25lcnNoaXAgY2hhbmdlZCBzdWNjZXNzZnVsbHlcIiA6IFwiUHJvc3BlY3QgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeShcIlJPTExCQUNLXCIpXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciB1cGRhdGluZyBwcm9zcGVjdDpcIiwgZXJyb3IpXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIlxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIHVwZGF0ZSBwcm9zcGVjdFwiLFxuICAgICAgICBkZXRhaWxzOiBlcnJvck1lc3NhZ2UsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9LFxuICAgIClcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQucmVsZWFzZSgpXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJxdWVyeSIsImdldENsaWVudCIsImdldEVtcGxveWVlQnlBdXRoIiwiQXVkaXRMb2dnZXIiLCJnZXRDdXJyZW50VXNlciIsInJlcXVlc3QiLCJmaXJlYmFzZVVpZCIsImhlYWRlcnMiLCJnZXQiLCJ1c2VyIiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJ1c2VyRW1haWwiLCJ1bmRlZmluZWQiLCJhdXRoSGVhZGVyIiwic3RhcnRzV2l0aCIsInRlc3RVc2VyIiwiZXJyb3IiLCJHRVQiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJzYWxlc3BlcnNvbklkIiwidmlld0FsbCIsImN1cnJlbnRVc2VyIiwianNvbiIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJ3aGVyZUNsYXVzZSIsInF1ZXJ5UGFyYW1zIiwiY2FuVmlld0FsbCIsImluY2x1ZGVzIiwicm9sZSIsIk51bWJlciIsInBhcnNlSW50IiwiaWQiLCJyZXN1bHQiLCJyb3dzIiwibGVuZ3RoIiwiZGF0YSIsImNvdW50IiwidXNlcl9yb2xlIiwiY2FuX3ZpZXdfYWxsIiwiZGV0YWlscyIsIkVycm9yIiwibWVzc2FnZSIsIlBPU1QiLCJjbGllbnQiLCJib2R5IiwiYnVzaW5lc3NfbmFtZSIsInBsYWNlX2lkIiwiYWRkcmVzcyIsInBob25lIiwid2Vic2l0ZSIsImluZHVzdHJ5IiwiY29udGFjdF9uYW1lIiwiY29udGFjdF9lbWFpbCIsImVzdGltYXRlZF92YWx1ZSIsInByaW9yaXR5Iiwibm90ZXMiLCJzZXJ2aWNlcyIsImFzc2lnbmVkX3NhbGVzcGVyc29uX2lkIiwidHJpbSIsImZpbmFsU2FsZXNwZXJzb25JZCIsInByb3NwZWN0UmVzdWx0IiwidG9Mb3dlckNhc2UiLCJwYXJzZUZsb2F0IiwidG9TdHJpbmciLCJwcm9zcGVjdCIsInNlcnZpY2VJZCIsImxvZ1Byb3NwZWN0Q3JlYXRpb24iLCJzZXJ2aWNlc19jb3VudCIsImRlYnVnIiwiYXV0aGVudGljYXRlZF91c2VyIiwiYXNzaWduZWRfdG9faWQiLCJlcnJvck1lc3NhZ2UiLCJyZWxlYXNlIiwiUFVUIiwiY2hhbmdlX3JlYXNvbiIsIm90aGVyRmllbGRzIiwiY3VycmVudFByb3NwZWN0UmVzdWx0IiwiY3VycmVudFByb3NwZWN0IiwiaXNPd25lcnNoaXBDaGFuZ2UiLCJhbGxvd2VkUm9sZXMiLCJsb2dQcm9zcGVjdE93bmVyc2hpcENoYW5nZSIsInVwZGF0ZUZpZWxkcyIsInVwZGF0ZVZhbHVlcyIsInBhcmFtQ291bnQiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJwdXNoIiwiRGF0ZSIsInVwZGF0ZVF1ZXJ5Iiwiam9pbiIsInVzZXJJZCIsInVzZXJOYW1lIiwidXNlclJvbGUiLCJhY3Rpb25UeXBlIiwidGFibGVOYW1lIiwicmVjb3JkSWQiLCJhY3Rpb25EZXNjcmlwdGlvbiIsIm9sZFZhbHVlcyIsIm5ld1ZhbHVlcyIsImJ1c2luZXNzQ29udGV4dCIsInNldmVyaXR5TGV2ZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/sales/prospects/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/audit-logger.ts":
/*!*****************************!*\
  !*** ./lib/audit-logger.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuditLogger: () => (/* binding */ AuditLogger),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./lib/database.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_database__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Comprehensive audit logger for GladGrade Portal\nclass AuditLogger {\n    // Main logging function\n    static async log(logData) {\n        try {\n            const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_0__.query)(`\n        INSERT INTO audit_logs (\n          user_id, user_email, user_name, user_role,\n          action_type, table_name, record_id, action_description,\n          old_values, new_values, changed_fields,\n          ip_address, user_agent,\n          business_context, severity_level\n        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15)\n        RETURNING id\n      `, [\n                logData.userId || null,\n                logData.userEmail || null,\n                logData.userName || null,\n                logData.userRole || null,\n                logData.actionType,\n                logData.tableName || null,\n                logData.recordId || null,\n                logData.actionDescription,\n                logData.oldValues ? JSON.stringify(logData.oldValues) : null,\n                logData.newValues ? JSON.stringify(logData.newValues) : null,\n                logData.changedFields || null,\n                logData.ipAddress || null,\n                logData.userAgent || null,\n                logData.businessContext || \"general\",\n                logData.severityLevel || \"info\"\n            ]);\n            console.log(`📝 Audit log created: ${logData.actionType} - ${logData.actionDescription}`);\n            return result.rows[0].id;\n        } catch (error) {\n            console.error(\"❌ Failed to create audit log:\", error);\n            return null;\n        }\n    }\n    // Specific logging methods for common actions\n    static async logProspectCreation(userId, userName, userRole, prospectId, prospectData) {\n        return await AuditLogger.log({\n            userId,\n            userName,\n            userRole,\n            actionType: \"CREATE\",\n            tableName: \"prospects\",\n            recordId: prospectId,\n            actionDescription: `Created new prospect: ${prospectData.business_name}`,\n            newValues: prospectData,\n            businessContext: \"sales_pipeline\",\n            severityLevel: \"info\"\n        });\n    }\n    static async logProspectOwnershipChange(changedByUserId, changedByName, changedByRole, prospectId, oldOwnerId, newOwnerId, reason, ipAddress, userAgent) {\n        // Log in prospect_ownership_logs table\n        await (0,_lib_database__WEBPACK_IMPORTED_MODULE_0__.query)(`SELECT log_prospect_ownership_change($1, $2, $3, $4, $5, $6, $7)`, [\n            prospectId,\n            oldOwnerId,\n            newOwnerId,\n            changedByUserId,\n            reason,\n            ipAddress,\n            userAgent\n        ]);\n        // Also log in main audit log\n        return await AuditLogger.log({\n            userId: changedByUserId,\n            userName: changedByName,\n            userRole: changedByRole,\n            actionType: \"ASSIGN\",\n            tableName: \"prospects\",\n            recordId: prospectId,\n            actionDescription: `Changed prospect ownership from employee ${oldOwnerId} to employee ${newOwnerId}. Reason: ${reason}`,\n            businessContext: \"sales_pipeline\",\n            severityLevel: \"warning\",\n            ipAddress,\n            userAgent\n        });\n    }\n    static async logProspectConversion(userId, userName, userRole, prospectId, clientId, conversionValue) {\n        return await AuditLogger.log({\n            userId,\n            userName,\n            userRole,\n            actionType: \"CONVERT\",\n            tableName: \"prospects\",\n            recordId: prospectId,\n            actionDescription: `Converted prospect ${prospectId} to client ${clientId} with value $${conversionValue}`,\n            newValues: {\n                client_id: clientId,\n                conversion_value: conversionValue\n            },\n            businessContext: \"sales_pipeline\",\n            severityLevel: \"info\"\n        });\n    }\n    // Get recent activity for dashboard\n    static async getRecentActivity(limit = 50) {\n        try {\n            const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_0__.query)(`\n        SELECT * FROM audit_logs \n        ORDER BY created_at DESC\n        LIMIT $1\n      `, [\n                limit\n            ]);\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error fetching recent activity:\", error);\n            return [];\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AuditLogger);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ1hDLFVBQVVnQjtZQUNWZixtQkFBbUIsQ0FBQyxtQkFBbUIsRUFBRWUsV0FBVyxXQUFXLEVBQUVXLFNBQVMsYUFBYSxFQUFFQyxnQkFBZ0IsQ0FBQztZQUMxR3ZCLFdBQVc7Z0JBQUV3QixXQUFXRjtnQkFBVUcsa0JBQWtCRjtZQUFnQjtZQUNwRW5CLGlCQUFpQjtZQUNqQkMsZUFBZTtRQUNqQjtJQUNGO0lBRUEsb0NBQW9DO0lBQ3BDLGFBQWFxQixrQkFBa0JDLFFBQVEsRUFBRSxFQUFFO1FBQ3pDLElBQUk7WUFDRixNQUFNdkMsU0FBUyxNQUFNSixvREFBS0EsQ0FDeEIsQ0FBQzs7OztNQUlILENBQUMsRUFDQztnQkFBQzJDO2FBQU07WUFHVCxPQUFPdkMsT0FBT21CLElBQUk7UUFDcEIsRUFBRSxPQUFPRSxPQUFPO1lBQ2RILFFBQVFHLEtBQUssQ0FBQyxtQ0FBbUNBO1lBQ2pELE9BQU8sRUFBRTtRQUNYO0lBQ0Y7QUFDRjtBQUVBLGlFQUFleEIsV0FBV0EsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvYXVkaXQtbG9nZ2VyLnRzPzUzMGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcXVlcnkgfSBmcm9tIFwiQC9saWIvZGF0YWJhc2VcIlxuXG5pbnRlcmZhY2UgQXVkaXRMb2dEYXRhIHtcbiAgdXNlcklkPzogbnVtYmVyXG4gIHVzZXJFbWFpbD86IHN0cmluZ1xuICB1c2VyTmFtZT86IHN0cmluZ1xuICB1c2VyUm9sZT86IHN0cmluZ1xuICBhY3Rpb25UeXBlOiBzdHJpbmdcbiAgdGFibGVOYW1lPzogc3RyaW5nXG4gIHJlY29yZElkPzogbnVtYmVyXG4gIGFjdGlvbkRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgb2xkVmFsdWVzPzogYW55XG4gIG5ld1ZhbHVlcz86IGFueVxuICBjaGFuZ2VkRmllbGRzPzogc3RyaW5nW11cbiAgYnVzaW5lc3NDb250ZXh0Pzogc3RyaW5nXG4gIHNldmVyaXR5TGV2ZWw/OiBcImluZm9cIiB8IFwid2FybmluZ1wiIHwgXCJlcnJvclwiIHwgXCJjcml0aWNhbFwiXG4gIGlwQWRkcmVzcz86IHN0cmluZ1xuICB1c2VyQWdlbnQ/OiBzdHJpbmdcbn1cblxuLy8gQ29tcHJlaGVuc2l2ZSBhdWRpdCBsb2dnZXIgZm9yIEdsYWRHcmFkZSBQb3J0YWxcbmV4cG9ydCBjbGFzcyBBdWRpdExvZ2dlciB7XG4gIC8vIE1haW4gbG9nZ2luZyBmdW5jdGlvblxuICBzdGF0aWMgYXN5bmMgbG9nKGxvZ0RhdGE6IEF1ZGl0TG9nRGF0YSk6IFByb21pc2U8bnVtYmVyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeShcbiAgICAgICAgYFxuICAgICAgICBJTlNFUlQgSU5UTyBhdWRpdF9sb2dzIChcbiAgICAgICAgICB1c2VyX2lkLCB1c2VyX2VtYWlsLCB1c2VyX25hbWUsIHVzZXJfcm9sZSxcbiAgICAgICAgICBhY3Rpb25fdHlwZSwgdGFibGVfbmFtZSwgcmVjb3JkX2lkLCBhY3Rpb25fZGVzY3JpcHRpb24sXG4gICAgICAgICAgb2xkX3ZhbHVlcywgbmV3X3ZhbHVlcywgY2hhbmdlZF9maWVsZHMsXG4gICAgICAgICAgaXBfYWRkcmVzcywgdXNlcl9hZ2VudCxcbiAgICAgICAgICBidXNpbmVzc19jb250ZXh0LCBzZXZlcml0eV9sZXZlbFxuICAgICAgICApIFZBTFVFUyAoJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCAkOSwgJDEwLCAkMTEsICQxMiwgJDEzLCAkMTQsICQxNSlcbiAgICAgICAgUkVUVVJOSU5HIGlkXG4gICAgICBgLFxuICAgICAgICBbXG4gICAgICAgICAgbG9nRGF0YS51c2VySWQgfHwgbnVsbCxcbiAgICAgICAgICBsb2dEYXRhLnVzZXJFbWFpbCB8fCBudWxsLFxuICAgICAgICAgIGxvZ0RhdGEudXNlck5hbWUgfHwgbnVsbCxcbiAgICAgICAgICBsb2dEYXRhLnVzZXJSb2xlIHx8IG51bGwsXG4gICAgICAgICAgbG9nRGF0YS5hY3Rpb25UeXBlLFxuICAgICAgICAgIGxvZ0RhdGEudGFibGVOYW1lIHx8IG51bGwsXG4gICAgICAgICAgbG9nRGF0YS5yZWNvcmRJZCB8fCBudWxsLFxuICAgICAgICAgIGxvZ0RhdGEuYWN0aW9uRGVzY3JpcHRpb24sXG4gICAgICAgICAgbG9nRGF0YS5vbGRWYWx1ZXMgPyBKU09OLnN0cmluZ2lmeShsb2dEYXRhLm9sZFZhbHVlcykgOiBudWxsLFxuICAgICAgICAgIGxvZ0RhdGEubmV3VmFsdWVzID8gSlNPTi5zdHJpbmdpZnkobG9nRGF0YS5uZXdWYWx1ZXMpIDogbnVsbCxcbiAgICAgICAgICBsb2dEYXRhLmNoYW5nZWRGaWVsZHMgfHwgbnVsbCxcbiAgICAgICAgICBsb2dEYXRhLmlwQWRkcmVzcyB8fCBudWxsLFxuICAgICAgICAgIGxvZ0RhdGEudXNlckFnZW50IHx8IG51bGwsXG4gICAgICAgICAgbG9nRGF0YS5idXNpbmVzc0NvbnRleHQgfHwgXCJnZW5lcmFsXCIsXG4gICAgICAgICAgbG9nRGF0YS5zZXZlcml0eUxldmVsIHx8IFwiaW5mb1wiLFxuICAgICAgICBdLFxuICAgICAgKVxuXG4gICAgICBjb25zb2xlLmxvZyhg8J+TnSBBdWRpdCBsb2cgY3JlYXRlZDogJHtsb2dEYXRhLmFjdGlvblR5cGV9IC0gJHtsb2dEYXRhLmFjdGlvbkRlc2NyaXB0aW9ufWApXG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0uaWRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBGYWlsZWQgdG8gY3JlYXRlIGF1ZGl0IGxvZzpcIiwgZXJyb3IpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8vIFNwZWNpZmljIGxvZ2dpbmcgbWV0aG9kcyBmb3IgY29tbW9uIGFjdGlvbnNcbiAgc3RhdGljIGFzeW5jIGxvZ1Byb3NwZWN0Q3JlYXRpb24oXG4gICAgdXNlcklkOiBudW1iZXIsXG4gICAgdXNlck5hbWU6IHN0cmluZyxcbiAgICB1c2VyUm9sZTogc3RyaW5nLFxuICAgIHByb3NwZWN0SWQ6IG51bWJlcixcbiAgICBwcm9zcGVjdERhdGE6IGFueSxcbiAgKSB7XG4gICAgcmV0dXJuIGF3YWl0IEF1ZGl0TG9nZ2VyLmxvZyh7XG4gICAgICB1c2VySWQsXG4gICAgICB1c2VyTmFtZSxcbiAgICAgIHVzZXJSb2xlLFxuICAgICAgYWN0aW9uVHlwZTogXCJDUkVBVEVcIixcbiAgICAgIHRhYmxlTmFtZTogXCJwcm9zcGVjdHNcIixcbiAgICAgIHJlY29yZElkOiBwcm9zcGVjdElkLFxuICAgICAgYWN0aW9uRGVzY3JpcHRpb246IGBDcmVhdGVkIG5ldyBwcm9zcGVjdDogJHtwcm9zcGVjdERhdGEuYnVzaW5lc3NfbmFtZX1gLFxuICAgICAgbmV3VmFsdWVzOiBwcm9zcGVjdERhdGEsXG4gICAgICBidXNpbmVzc0NvbnRleHQ6IFwic2FsZXNfcGlwZWxpbmVcIixcbiAgICAgIHNldmVyaXR5TGV2ZWw6IFwiaW5mb1wiLFxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9nUHJvc3BlY3RPd25lcnNoaXBDaGFuZ2UoXG4gICAgY2hhbmdlZEJ5VXNlcklkOiBudW1iZXIsXG4gICAgY2hhbmdlZEJ5TmFtZTogc3RyaW5nLFxuICAgIGNoYW5nZWRCeVJvbGU6IHN0cmluZyxcbiAgICBwcm9zcGVjdElkOiBudW1iZXIsXG4gICAgb2xkT3duZXJJZDogbnVtYmVyLFxuICAgIG5ld093bmVySWQ6IG51bWJlcixcbiAgICByZWFzb246IHN0cmluZyxcbiAgICBpcEFkZHJlc3M/OiBzdHJpbmcsXG4gICAgdXNlckFnZW50Pzogc3RyaW5nLFxuICApIHtcbiAgICAvLyBMb2cgaW4gcHJvc3BlY3Rfb3duZXJzaGlwX2xvZ3MgdGFibGVcbiAgICBhd2FpdCBxdWVyeShgU0VMRUNUIGxvZ19wcm9zcGVjdF9vd25lcnNoaXBfY2hhbmdlKCQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICQ3KWAsIFtcbiAgICAgIHByb3NwZWN0SWQsXG4gICAgICBvbGRPd25lcklkLFxuICAgICAgbmV3T3duZXJJZCxcbiAgICAgIGNoYW5nZWRCeVVzZXJJZCxcbiAgICAgIHJlYXNvbixcbiAgICAgIGlwQWRkcmVzcyxcbiAgICAgIHVzZXJBZ2VudCxcbiAgICBdKVxuXG4gICAgLy8gQWxzbyBsb2cgaW4gbWFpbiBhdWRpdCBsb2dcbiAgICByZXR1cm4gYXdhaXQgQXVkaXRMb2dnZXIubG9nKHtcbiAgICAgIHVzZXJJZDogY2hhbmdlZEJ5VXNlcklkLFxuICAgICAgdXNlck5hbWU6IGNoYW5nZWRCeU5hbWUsXG4gICAgICB1c2VyUm9sZTogY2hhbmdlZEJ5Um9sZSxcbiAgICAgIGFjdGlvblR5cGU6IFwiQVNTSUdOXCIsXG4gICAgICB0YWJsZU5hbWU6IFwicHJvc3BlY3RzXCIsXG4gICAgICByZWNvcmRJZDogcHJvc3BlY3RJZCxcbiAgICAgIGFjdGlvbkRlc2NyaXB0aW9uOiBgQ2hhbmdlZCBwcm9zcGVjdCBvd25lcnNoaXAgZnJvbSBlbXBsb3llZSAke29sZE93bmVySWR9IHRvIGVtcGxveWVlICR7bmV3T3duZXJJZH0uIFJlYXNvbjogJHtyZWFzb259YCxcbiAgICAgIGJ1c2luZXNzQ29udGV4dDogXCJzYWxlc19waXBlbGluZVwiLFxuICAgICAgc2V2ZXJpdHlMZXZlbDogXCJ3YXJuaW5nXCIsXG4gICAgICBpcEFkZHJlc3MsXG4gICAgICB1c2VyQWdlbnQsXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBsb2dQcm9zcGVjdENvbnZlcnNpb24oXG4gICAgdXNlcklkOiBudW1iZXIsXG4gICAgdXNlck5hbWU6IHN0cmluZyxcbiAgICB1c2VyUm9sZTogc3RyaW5nLFxuICAgIHByb3NwZWN0SWQ6IG51bWJlcixcbiAgICBjbGllbnRJZDogbnVtYmVyLFxuICAgIGNvbnZlcnNpb25WYWx1ZTogbnVtYmVyLFxuICApIHtcbiAgICByZXR1cm4gYXdhaXQgQXVkaXRMb2dnZXIubG9nKHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIHVzZXJOYW1lLFxuICAgICAgdXNlclJvbGUsXG4gICAgICBhY3Rpb25UeXBlOiBcIkNPTlZFUlRcIixcbiAgICAgIHRhYmxlTmFtZTogXCJwcm9zcGVjdHNcIixcbiAgICAgIHJlY29yZElkOiBwcm9zcGVjdElkLFxuICAgICAgYWN0aW9uRGVzY3JpcHRpb246IGBDb252ZXJ0ZWQgcHJvc3BlY3QgJHtwcm9zcGVjdElkfSB0byBjbGllbnQgJHtjbGllbnRJZH0gd2l0aCB2YWx1ZSAkJHtjb252ZXJzaW9uVmFsdWV9YCxcbiAgICAgIG5ld1ZhbHVlczogeyBjbGllbnRfaWQ6IGNsaWVudElkLCBjb252ZXJzaW9uX3ZhbHVlOiBjb252ZXJzaW9uVmFsdWUgfSxcbiAgICAgIGJ1c2luZXNzQ29udGV4dDogXCJzYWxlc19waXBlbGluZVwiLFxuICAgICAgc2V2ZXJpdHlMZXZlbDogXCJpbmZvXCIsXG4gICAgfSlcbiAgfVxuXG4gIC8vIEdldCByZWNlbnQgYWN0aXZpdHkgZm9yIGRhc2hib2FyZFxuICBzdGF0aWMgYXN5bmMgZ2V0UmVjZW50QWN0aXZpdHkobGltaXQgPSA1MCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeShcbiAgICAgICAgYFxuICAgICAgICBTRUxFQ1QgKiBGUk9NIGF1ZGl0X2xvZ3MgXG4gICAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICAgICAgICBMSU1JVCAkMVxuICAgICAgYCxcbiAgICAgICAgW2xpbWl0XSxcbiAgICAgIClcblxuICAgICAgcmV0dXJuIHJlc3VsdC5yb3dzXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyByZWNlbnQgYWN0aXZpdHk6XCIsIGVycm9yKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1ZGl0TG9nZ2VyXG4iXSwibmFtZXMiOlsicXVlcnkiLCJBdWRpdExvZ2dlciIsImxvZyIsImxvZ0RhdGEiLCJyZXN1bHQiLCJ1c2VySWQiLCJ1c2VyRW1haWwiLCJ1c2VyTmFtZSIsInVzZXJSb2xlIiwiYWN0aW9uVHlwZSIsInRhYmxlTmFtZSIsInJlY29yZElkIiwiYWN0aW9uRGVzY3JpcHRpb24iLCJvbGRWYWx1ZXMiLCJKU09OIiwic3RyaW5naWZ5IiwibmV3VmFsdWVzIiwiY2hhbmdlZEZpZWxkcyIsImlwQWRkcmVzcyIsInVzZXJBZ2VudCIsImJ1c2luZXNzQ29udGV4dCIsInNldmVyaXR5TGV2ZWwiLCJjb25zb2xlIiwicm93cyIsImlkIiwiZXJyb3IiLCJsb2dQcm9zcGVjdENyZWF0aW9uIiwicHJvc3BlY3RJZCIsInByb3NwZWN0RGF0YSIsImJ1c2luZXNzX25hbWUiLCJsb2dQcm9zcGVjdE93bmVyc2hpcENoYW5nZSIsImNoYW5nZWRCeVVzZXJJZCIsImNoYW5nZWRCeU5hbWUiLCJjaGFuZ2VkQnlSb2xlIiwib2xkT3duZXJJZCIsIm5ld093bmVySWQiLCJyZWFzb24iLCJsb2dQcm9zcGVjdENvbnZlcnNpb24iLCJjbGllbnRJZCIsImNvbnZlcnNpb25WYWx1ZSIsImNsaWVudF9pZCIsImNvbnZlcnNpb25fdmFsdWUiLCJnZXRSZWNlbnRBY3Rpdml0eSIsImxpbWl0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/audit-logger.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth-utils.ts":
/*!***************************!*\
  !*** ./lib/auth-utils.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentFirebaseUser: () => (/* binding */ getCurrentFirebaseUser),\n/* harmony export */   getEmployeeByAuth: () => (/* binding */ getEmployeeByAuth)\n/* harmony export */ });\n/* harmony import */ var _services_firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/services/firebase */ \"(rsc)/./services/firebase.ts\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./lib/database.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_database__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Get current user from Firebase Auth (client-side)\nasync function getCurrentFirebaseUser() {\n    return new Promise((resolve)=>{\n        const unsubscribe = _services_firebase__WEBPACK_IMPORTED_MODULE_0__.auth.onAuthStateChanged((user)=>{\n            unsubscribe();\n            resolve(user);\n        });\n    });\n}\n// Get employee data by Firebase UID or email\nasync function getEmployeeByAuth(uid, email) {\n    try {\n        console.log(\"\\uD83D\\uDD0D getEmployeeByAuth called with:\", {\n            uid,\n            email\n        });\n        let result;\n        if (uid) {\n            console.log(\"\\uD83D\\uDD0D Looking up by Firebase UID:\", uid);\n            result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(`SELECT e.id, e.full_name, e.email, e.role, e.status, e.department_id,\n                d.name as department_name\n         FROM employees e\n         LEFT JOIN departments d ON e.department_id = d.id\n         WHERE e.firebase_uid = $1 AND e.status = 'active'`, [\n                uid\n            ]);\n            console.log(\"\\uD83D\\uDCCA UID lookup result:\", result.rows.length, \"rows\");\n        }\n        // Fallback to email if UID lookup fails or no UID provided\n        if ((!result || result.rows.length === 0) && email) {\n            console.log(\"\\uD83D\\uDD0D Looking up by email:\", email);\n            result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(`SELECT e.id, e.full_name, e.email, e.role, e.status, e.department_id,\n                d.name as department_name\n         FROM employees e\n         LEFT JOIN departments d ON e.department_id = d.id\n         WHERE LOWER(e.email) = LOWER($1) AND e.status = 'active'`, [\n                email\n            ]);\n            console.log(\"\\uD83D\\uDCCA Email lookup result:\", result.rows.length, \"rows\");\n            if (result.rows.length > 0) {\n                console.log(\"✅ Found employee:\", result.rows[0]);\n            }\n        }\n        if (!result || result.rows.length === 0) {\n            console.log(\"❌ No employee found\");\n            return null;\n        }\n        const employee = result.rows[0];\n        const employeeData = {\n            id: employee.id,\n            name: employee.full_name,\n            email: employee.email,\n            role: employee.role,\n            status: employee.status,\n            department_id: employee.department_id,\n            department_name: employee.department_name\n        };\n        console.log(\"✅ Returning employee data:\", employeeData);\n        return employeeData;\n    } catch (error) {\n        console.error(\"❌ Error getting employee by auth:\", error);\n        return null;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC11dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTBDO0FBQ0o7QUFjdEMsb0RBQW9EO0FBQzdDLGVBQWVFO0lBQ3BCLE9BQU8sSUFBSUMsUUFBUSxDQUFDQztRQUNsQixNQUFNQyxjQUFjTCxvREFBSUEsQ0FBQ00sa0JBQWtCLENBQUMsQ0FBQ0M7WUFDM0NGO1lBQ0FELFFBQVFHO1FBQ1Y7SUFDRjtBQUNGO0FBRUEsNkNBQTZDO0FBQ3RDLGVBQWVDLGtCQUFrQkMsR0FBWSxFQUFFQyxLQUFjO0lBQ2xFLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDLCtDQUFxQztZQUFFSDtZQUFLQztRQUFNO1FBRTlELElBQUlHO1FBRUosSUFBSUosS0FBSztZQUNQRSxRQUFRQyxHQUFHLENBQUMsNENBQWtDSDtZQUM5Q0ksU0FBUyxNQUFNWixvREFBS0EsQ0FDbEIsQ0FBQzs7OzswREFJaUQsQ0FBQyxFQUNuRDtnQkFBQ1E7YUFBSTtZQUVQRSxRQUFRQyxHQUFHLENBQUMsbUNBQXlCQyxPQUFPQyxJQUFJLENBQUNDLE1BQU0sRUFBRTtRQUMzRDtRQUVBLDJEQUEyRDtRQUMzRCxJQUFJLENBQUMsQ0FBQ0YsVUFBVUEsT0FBT0MsSUFBSSxDQUFDQyxNQUFNLEtBQUssTUFBTUwsT0FBTztZQUNsREMsUUFBUUMsR0FBRyxDQUFDLHFDQUEyQkY7WUFDdkNHLFNBQVMsTUFBTVosb0RBQUtBLENBQ2xCLENBQUM7Ozs7aUVBSXdELENBQUMsRUFDMUQ7Z0JBQUNTO2FBQU07WUFFVEMsUUFBUUMsR0FBRyxDQUFDLHFDQUEyQkMsT0FBT0MsSUFBSSxDQUFDQyxNQUFNLEVBQUU7WUFDM0QsSUFBSUYsT0FBT0MsSUFBSSxDQUFDQyxNQUFNLEdBQUcsR0FBRztnQkFDMUJKLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJDLE9BQU9DLElBQUksQ0FBQyxFQUFFO1lBQ2pEO1FBQ0Y7UUFFQSxJQUFJLENBQUNELFVBQVVBLE9BQU9DLElBQUksQ0FBQ0MsTUFBTSxLQUFLLEdBQUc7WUFDdkNKLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU87UUFDVDtRQUVBLE1BQU1JLFdBQVdILE9BQU9DLElBQUksQ0FBQyxFQUFFO1FBQy9CLE1BQU1HLGVBQWU7WUFDbkJDLElBQUlGLFNBQVNFLEVBQUU7WUFDZkMsTUFBTUgsU0FBU0ksU0FBUztZQUN4QlYsT0FBT00sU0FBU04sS0FBSztZQUNyQlcsTUFBTUwsU0FBU0ssSUFBSTtZQUNuQkMsUUFBUU4sU0FBU00sTUFBTTtZQUN2QkMsZUFBZVAsU0FBU08sYUFBYTtZQUNyQ0MsaUJBQWlCUixTQUFTUSxlQUFlO1FBQzNDO1FBRUFiLFFBQVFDLEdBQUcsQ0FBQyw4QkFBOEJLO1FBQzFDLE9BQU9BO0lBQ1QsRUFBRSxPQUFPUSxPQUFPO1FBQ2RkLFFBQVFjLEtBQUssQ0FBQyxxQ0FBcUNBO1FBQ25ELE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9hdXRoLXV0aWxzLnRzPzM4MTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXV0aCB9IGZyb20gXCJAL3NlcnZpY2VzL2ZpcmViYXNlXCJcbmltcG9ydCB7IHF1ZXJ5IH0gZnJvbSBcIkAvbGliL2RhdGFiYXNlXCJcbmltcG9ydCB0eXBlIHsgVXNlciB9IGZyb20gXCJmaXJlYmFzZS9hdXRoXCJcblxuLy8gVHlwZSBkZWZpbml0aW9uc1xuaW50ZXJmYWNlIEVtcGxveWVlRGF0YSB7XG4gIGlkOiBudW1iZXJcbiAgbmFtZTogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmdcbiAgcm9sZTogc3RyaW5nXG4gIHN0YXR1czogc3RyaW5nXG4gIGRlcGFydG1lbnRfaWQ6IG51bWJlciB8IG51bGxcbiAgZGVwYXJ0bWVudF9uYW1lOiBzdHJpbmcgfCBudWxsXG59XG5cbi8vIEdldCBjdXJyZW50IHVzZXIgZnJvbSBGaXJlYmFzZSBBdXRoIChjbGllbnQtc2lkZSlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXJyZW50RmlyZWJhc2VVc2VyKCk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSBhdXRoLm9uQXV0aFN0YXRlQ2hhbmdlZCgodXNlcjogVXNlciB8IG51bGwpID0+IHtcbiAgICAgIHVuc3Vic2NyaWJlKClcbiAgICAgIHJlc29sdmUodXNlcilcbiAgICB9KVxuICB9KVxufVxuXG4vLyBHZXQgZW1wbG95ZWUgZGF0YSBieSBGaXJlYmFzZSBVSUQgb3IgZW1haWxcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbXBsb3llZUJ5QXV0aCh1aWQ/OiBzdHJpbmcsIGVtYWlsPzogc3RyaW5nKTogUHJvbWlzZTxFbXBsb3llZURhdGEgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCLwn5SNIGdldEVtcGxveWVlQnlBdXRoIGNhbGxlZCB3aXRoOlwiLCB7IHVpZCwgZW1haWwgfSlcblxuICAgIGxldCByZXN1bHRcblxuICAgIGlmICh1aWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+UjSBMb29raW5nIHVwIGJ5IEZpcmViYXNlIFVJRDpcIiwgdWlkKVxuICAgICAgcmVzdWx0ID0gYXdhaXQgcXVlcnkoXG4gICAgICAgIGBTRUxFQ1QgZS5pZCwgZS5mdWxsX25hbWUsIGUuZW1haWwsIGUucm9sZSwgZS5zdGF0dXMsIGUuZGVwYXJ0bWVudF9pZCxcbiAgICAgICAgICAgICAgICBkLm5hbWUgYXMgZGVwYXJ0bWVudF9uYW1lXG4gICAgICAgICBGUk9NIGVtcGxveWVlcyBlXG4gICAgICAgICBMRUZUIEpPSU4gZGVwYXJ0bWVudHMgZCBPTiBlLmRlcGFydG1lbnRfaWQgPSBkLmlkXG4gICAgICAgICBXSEVSRSBlLmZpcmViYXNlX3VpZCA9ICQxIEFORCBlLnN0YXR1cyA9ICdhY3RpdmUnYCxcbiAgICAgICAgW3VpZF0sXG4gICAgICApXG4gICAgICBjb25zb2xlLmxvZyhcIvCfk4ogVUlEIGxvb2t1cCByZXN1bHQ6XCIsIHJlc3VsdC5yb3dzLmxlbmd0aCwgXCJyb3dzXCIpXG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gZW1haWwgaWYgVUlEIGxvb2t1cCBmYWlscyBvciBubyBVSUQgcHJvdmlkZWRcbiAgICBpZiAoKCFyZXN1bHQgfHwgcmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSAmJiBlbWFpbCkge1xuICAgICAgY29uc29sZS5sb2coXCLwn5SNIExvb2tpbmcgdXAgYnkgZW1haWw6XCIsIGVtYWlsKVxuICAgICAgcmVzdWx0ID0gYXdhaXQgcXVlcnkoXG4gICAgICAgIGBTRUxFQ1QgZS5pZCwgZS5mdWxsX25hbWUsIGUuZW1haWwsIGUucm9sZSwgZS5zdGF0dXMsIGUuZGVwYXJ0bWVudF9pZCxcbiAgICAgICAgICAgICAgICBkLm5hbWUgYXMgZGVwYXJ0bWVudF9uYW1lXG4gICAgICAgICBGUk9NIGVtcGxveWVlcyBlXG4gICAgICAgICBMRUZUIEpPSU4gZGVwYXJ0bWVudHMgZCBPTiBlLmRlcGFydG1lbnRfaWQgPSBkLmlkXG4gICAgICAgICBXSEVSRSBMT1dFUihlLmVtYWlsKSA9IExPV0VSKCQxKSBBTkQgZS5zdGF0dXMgPSAnYWN0aXZlJ2AsXG4gICAgICAgIFtlbWFpbF0sXG4gICAgICApXG4gICAgICBjb25zb2xlLmxvZyhcIvCfk4ogRW1haWwgbG9va3VwIHJlc3VsdDpcIiwgcmVzdWx0LnJvd3MubGVuZ3RoLCBcInJvd3NcIilcbiAgICAgIGlmIChyZXN1bHQucm93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIEZvdW5kIGVtcGxveWVlOlwiLCByZXN1bHQucm93c1swXSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXJlc3VsdCB8fCByZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKFwi4p2MIE5vIGVtcGxveWVlIGZvdW5kXCIpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGVtcGxveWVlID0gcmVzdWx0LnJvd3NbMF1cbiAgICBjb25zdCBlbXBsb3llZURhdGEgPSB7XG4gICAgICBpZDogZW1wbG95ZWUuaWQsXG4gICAgICBuYW1lOiBlbXBsb3llZS5mdWxsX25hbWUsXG4gICAgICBlbWFpbDogZW1wbG95ZWUuZW1haWwsXG4gICAgICByb2xlOiBlbXBsb3llZS5yb2xlLFxuICAgICAgc3RhdHVzOiBlbXBsb3llZS5zdGF0dXMsXG4gICAgICBkZXBhcnRtZW50X2lkOiBlbXBsb3llZS5kZXBhcnRtZW50X2lkLFxuICAgICAgZGVwYXJ0bWVudF9uYW1lOiBlbXBsb3llZS5kZXBhcnRtZW50X25hbWUsXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCLinIUgUmV0dXJuaW5nIGVtcGxveWVlIGRhdGE6XCIsIGVtcGxveWVlRGF0YSlcbiAgICByZXR1cm4gZW1wbG95ZWVEYXRhXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBnZXR0aW5nIGVtcGxveWVlIGJ5IGF1dGg6XCIsIGVycm9yKVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJhdXRoIiwicXVlcnkiLCJnZXRDdXJyZW50RmlyZWJhc2VVc2VyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ1bnN1YnNjcmliZSIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsInVzZXIiLCJnZXRFbXBsb3llZUJ5QXV0aCIsInVpZCIsImVtYWlsIiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsInJvd3MiLCJsZW5ndGgiLCJlbXBsb3llZSIsImVtcGxveWVlRGF0YSIsImlkIiwibmFtZSIsImZ1bGxfbmFtZSIsInJvbGUiLCJzdGF0dXMiLCJkZXBhcnRtZW50X2lkIiwiZGVwYXJ0bWVudF9uYW1lIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth-utils.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closePool: () => (/* binding */ closePool),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getClient: () => (/* binding */ getClient),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Determine connection method based on environment\nconst isProduction = \"development\" === \"production\";\nconst isGoogleCloud = process.env.GOOGLE_CLOUD_PROJECT || process.env.FIREBASE_PROJECT_ID;\n// Database connection configuration\nconst dbConfig = (()=>{\n    // Method 1: Unix Socket (for Google Cloud Run/App Engine)\n    if (isProduction && isGoogleCloud) {\n        console.log(\"\\uD83D\\uDD17 Using Unix Socket connection for Google Cloud\");\n        return {\n            host: `/cloudsql/${process.env.FIREBASE_PROJECT_ID}:us-east4:gg-instance`,\n            database: process.env.DB_NAME || \"corp\",\n            user: process.env.DB_USER || \"postgres\",\n            password: process.env.DB_PASSWORD,\n            ssl: false,\n            max: 20,\n            idleTimeoutMillis: 30000,\n            connectionTimeoutMillis: 10000\n        };\n    }\n    // Method 2: Public IP (for local development)\n    console.log(\"\\uD83D\\uDD17 Using Public IP connection for local development\");\n    return {\n        host: process.env.DB_HOST || \"34.86.121.148\",\n        port: Number.parseInt(process.env.DB_PORT || \"5432\"),\n        database: process.env.DB_NAME || \"corp\",\n        user: process.env.DB_USER || \"postgres\",\n        password: process.env.DB_PASSWORD,\n        ssl: {\n            rejectUnauthorized: false\n        },\n        max: 20,\n        idleTimeoutMillis: 30000,\n        connectionTimeoutMillis: 10000\n    };\n})();\n// Create connection pool\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(dbConfig);\n// Handle pool errors\npool.on(\"error\", (err)=>{\n    console.error(\"❌ Unexpected error on idle client\", err);\n    process.exit(-1);\n});\n// Log connection details (without password)\nconsole.log(\"\\uD83D\\uDD27 Database Configuration:\", {\n    host: dbConfig.host,\n    port: dbConfig.port || \"Unix Socket\",\n    database: dbConfig.database,\n    user: dbConfig.user,\n    ssl: !!dbConfig.ssl,\n    environment: \"development\",\n    isGoogleCloud: !!isGoogleCloud\n});\n// Test database connection\nasync function testConnection() {\n    try {\n        console.log(\"\\uD83E\\uDDEA Testing database connection...\");\n        const client = await pool.connect();\n        const result = await client.query(`\n      SELECT \n        NOW() as current_time, \n        version() as postgres_version,\n        current_database() as database_name,\n        current_user as current_user,\n        inet_server_addr() as server_ip\n    `);\n        client.release();\n        const connectionInfo = result.rows[0];\n        console.log(\"✅ Database connected successfully!\");\n        console.log(\"\\uD83D\\uDD50 Current time:\", connectionInfo.current_time);\n        console.log(\"\\uD83D\\uDDC4️ Database:\", connectionInfo.database_name);\n        console.log(\"\\uD83D\\uDC64 User:\", connectionInfo.current_user);\n        console.log(\"\\uD83C\\uDF10 Server IP:\", connectionInfo.server_ip || \"Unix Socket\");\n        console.log(\"\\uD83D\\uDCCA PostgreSQL version:\", connectionInfo.postgres_version);\n        return {\n            success: true,\n            data: connectionInfo\n        };\n    } catch (error) {\n        console.error(\"❌ Database connection failed:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        // Provide helpful error messages\n        if (errorMessage.includes(\"ECONNREFUSED\")) {\n            console.error(\"\\uD83D\\uDCA1 Tip: Make sure your Google Cloud SQL instance is running and accessible\");\n        }\n        if (errorMessage.includes(\"password authentication failed\")) {\n            console.error(\"\\uD83D\\uDCA1 Tip: Check your database username and password\");\n        }\n        if (errorMessage.includes(\"database\") && errorMessage.includes(\"does not exist\")) {\n            console.error(\"\\uD83D\\uDCA1 Tip: Make sure the 'corp' database exists in your instance\");\n        }\n        return {\n            success: false,\n            error: errorMessage\n        };\n    }\n}\n// Execute a query with error handling\nasync function query(text, params) {\n    const start = Date.now();\n    try {\n        console.log(\"\\uD83D\\uDD0D Executing query:\", text.substring(0, 100) + (text.length > 100 ? \"...\" : \"\"));\n        const result = await pool.query(text, params);\n        const duration = Date.now() - start;\n        console.log(`✅ Query executed in ${duration}ms, returned ${result.rowCount} rows`);\n        return result;\n    } catch (error) {\n        const duration = Date.now() - start;\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        console.error(`❌ Query failed after ${duration}ms:`, errorMessage);\n        console.error(\"\\uD83D\\uDCDD Query:\", text.substring(0, 200));\n        console.error(\"\\uD83D\\uDCCB Params:\", params);\n        throw error;\n    }\n}\n// Get a client from the pool for transactions\nasync function getClient() {\n    return await pool.connect();\n}\n// Close the pool (for graceful shutdown)\nasync function closePool() {\n    await pool.end();\n    console.log(\"\\uD83D\\uDD12 Database pool closed\");\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEMsUUFBUXNCLEtBQUssQ0FBQyx1QkFBYXNCLEtBQUtLLFNBQVMsQ0FBQyxHQUFHO1FBQzdDakQsUUFBUXNCLEtBQUssQ0FBQyx3QkFBY3VCO1FBQzVCLE1BQU12QjtJQUNSO0FBQ0Y7QUFFQSw4Q0FBOEM7QUFDdkMsZUFBZStCO0lBQ3BCLE9BQU8sTUFBTWxDLEtBQUtRLE9BQU87QUFDM0I7QUFFQSx5Q0FBeUM7QUFDbEMsZUFBZTJCO0lBQ3BCLE1BQU1uQyxLQUFLb0MsR0FBRztJQUNkdkQsUUFBUUMsR0FBRyxDQUFDO0FBQ2Q7QUFFQSxpRUFBZWtCLElBQUlBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vbGliL2RhdGFiYXNlLnRzPzRkNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9vbCwgdHlwZSBQb29sQ2xpZW50IH0gZnJvbSBcInBnXCJcblxuLy8gRGV0ZXJtaW5lIGNvbm5lY3Rpb24gbWV0aG9kIGJhc2VkIG9uIGVudmlyb25tZW50XG5jb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCJcbmNvbnN0IGlzR29vZ2xlQ2xvdWQgPSBwcm9jZXNzLmVudi5HT09HTEVfQ0xPVURfUFJPSkVDVCB8fCBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUk9KRUNUX0lEXG5cbi8vIERhdGFiYXNlIGNvbm5lY3Rpb24gY29uZmlndXJhdGlvblxuY29uc3QgZGJDb25maWcgPSAoKCkgPT4ge1xuICAvLyBNZXRob2QgMTogVW5peCBTb2NrZXQgKGZvciBHb29nbGUgQ2xvdWQgUnVuL0FwcCBFbmdpbmUpXG4gIGlmIChpc1Byb2R1Y3Rpb24gJiYgaXNHb29nbGVDbG91ZCkge1xuICAgIGNvbnNvbGUubG9nKFwi8J+UlyBVc2luZyBVbml4IFNvY2tldCBjb25uZWN0aW9uIGZvciBHb29nbGUgQ2xvdWRcIilcbiAgICByZXR1cm4ge1xuICAgICAgaG9zdDogYC9jbG91ZHNxbC8ke3Byb2Nlc3MuZW52LkZJUkVCQVNFX1BST0pFQ1RfSUR9OnVzLWVhc3Q0OmdnLWluc3RhbmNlYCxcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8IFwiY29ycFwiLFxuICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCBcInBvc3RncmVzXCIsXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsXG4gICAgICBzc2w6IGZhbHNlLCAvLyBOb3QgbmVlZGVkIGZvciBVbml4IHNvY2tldFxuICAgICAgbWF4OiAyMCxcbiAgICAgIGlkbGVUaW1lb3V0TWlsbGlzOiAzMDAwMCxcbiAgICAgIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAxMDAwMCxcbiAgICB9XG4gIH1cblxuICAvLyBNZXRob2QgMjogUHVibGljIElQIChmb3IgbG9jYWwgZGV2ZWxvcG1lbnQpXG4gIGNvbnNvbGUubG9nKFwi8J+UlyBVc2luZyBQdWJsaWMgSVAgY29ubmVjdGlvbiBmb3IgbG9jYWwgZGV2ZWxvcG1lbnRcIilcbiAgcmV0dXJuIHtcbiAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUIHx8IFwiMzQuODYuMTIxLjE0OFwiLFxuICAgIHBvcnQ6IE51bWJlci5wYXJzZUludChwcm9jZXNzLmVudi5EQl9QT1JUIHx8IFwiNTQzMlwiKSxcbiAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcImNvcnBcIixcbiAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8IFwicG9zdGdyZXNcIixcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsXG4gICAgc3NsOiB7XG4gICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLCAvLyBSZXF1aXJlZCBmb3IgR29vZ2xlIENsb3VkIFNRTCBwdWJsaWMgSVBcbiAgICB9LFxuICAgIG1heDogMjAsXG4gICAgaWRsZVRpbWVvdXRNaWxsaXM6IDMwMDAwLFxuICAgIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAxMDAwMCxcbiAgfVxufSkoKVxuXG4vLyBDcmVhdGUgY29ubmVjdGlvbiBwb29sXG5jb25zdCBwb29sID0gbmV3IFBvb2woZGJDb25maWcpXG5cbi8vIEhhbmRsZSBwb29sIGVycm9yc1xucG9vbC5vbihcImVycm9yXCIsIChlcnI6IEVycm9yKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoXCLinYwgVW5leHBlY3RlZCBlcnJvciBvbiBpZGxlIGNsaWVudFwiLCBlcnIpXG4gIHByb2Nlc3MuZXhpdCgtMSlcbn0pXG5cbi8vIExvZyBjb25uZWN0aW9uIGRldGFpbHMgKHdpdGhvdXQgcGFzc3dvcmQpXG5jb25zb2xlLmxvZyhcIvCflKcgRGF0YWJhc2UgQ29uZmlndXJhdGlvbjpcIiwge1xuICBob3N0OiBkYkNvbmZpZy5ob3N0LFxuICBwb3J0OiBkYkNvbmZpZy5wb3J0IHx8IFwiVW5peCBTb2NrZXRcIixcbiAgZGF0YWJhc2U6IGRiQ29uZmlnLmRhdGFiYXNlLFxuICB1c2VyOiBkYkNvbmZpZy51c2VyLFxuICBzc2w6ICEhZGJDb25maWcuc3NsLFxuICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXG4gIGlzR29vZ2xlQ2xvdWQ6ICEhaXNHb29nbGVDbG91ZCxcbn0pXG5cbi8vIFRlc3QgZGF0YWJhc2UgY29ubmVjdGlvblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRlc3RDb25uZWN0aW9uKCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwi8J+nqiBUZXN0aW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24uLi5cIilcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICAgIFNFTEVDVCBcbiAgICAgICAgTk9XKCkgYXMgY3VycmVudF90aW1lLCBcbiAgICAgICAgdmVyc2lvbigpIGFzIHBvc3RncmVzX3ZlcnNpb24sXG4gICAgICAgIGN1cnJlbnRfZGF0YWJhc2UoKSBhcyBkYXRhYmFzZV9uYW1lLFxuICAgICAgICBjdXJyZW50X3VzZXIgYXMgY3VycmVudF91c2VyLFxuICAgICAgICBpbmV0X3NlcnZlcl9hZGRyKCkgYXMgc2VydmVyX2lwXG4gICAgYClcblxuICAgIGNsaWVudC5yZWxlYXNlKClcblxuICAgIGNvbnN0IGNvbm5lY3Rpb25JbmZvID0gcmVzdWx0LnJvd3NbMF1cbiAgICBjb25zb2xlLmxvZyhcIuKchSBEYXRhYmFzZSBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5IVwiKVxuICAgIGNvbnNvbGUubG9nKFwi8J+VkCBDdXJyZW50IHRpbWU6XCIsIGNvbm5lY3Rpb25JbmZvLmN1cnJlbnRfdGltZSlcbiAgICBjb25zb2xlLmxvZyhcIvCfl4TvuI8gRGF0YWJhc2U6XCIsIGNvbm5lY3Rpb25JbmZvLmRhdGFiYXNlX25hbWUpXG4gICAgY29uc29sZS5sb2coXCLwn5GkIFVzZXI6XCIsIGNvbm5lY3Rpb25JbmZvLmN1cnJlbnRfdXNlcilcbiAgICBjb25zb2xlLmxvZyhcIvCfjJAgU2VydmVyIElQOlwiLCBjb25uZWN0aW9uSW5mby5zZXJ2ZXJfaXAgfHwgXCJVbml4IFNvY2tldFwiKVxuICAgIGNvbnNvbGUubG9nKFwi8J+TiiBQb3N0Z3JlU1FMIHZlcnNpb246XCIsIGNvbm5lY3Rpb25JbmZvLnBvc3RncmVzX3ZlcnNpb24pXG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb25uZWN0aW9uSW5mbyB9XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDpcIiwgZXJyb3IpXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIlxuXG4gICAgLy8gUHJvdmlkZSBoZWxwZnVsIGVycm9yIG1lc3NhZ2VzXG4gICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcIkVDT05OUkVGVVNFRFwiKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIvCfkqEgVGlwOiBNYWtlIHN1cmUgeW91ciBHb29nbGUgQ2xvdWQgU1FMIGluc3RhbmNlIGlzIHJ1bm5pbmcgYW5kIGFjY2Vzc2libGVcIilcbiAgICB9XG4gICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcInBhc3N3b3JkIGF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIvCfkqEgVGlwOiBDaGVjayB5b3VyIGRhdGFiYXNlIHVzZXJuYW1lIGFuZCBwYXNzd29yZFwiKVxuICAgIH1cbiAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiZGF0YWJhc2VcIikgJiYgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiZG9lcyBub3QgZXhpc3RcIikpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLwn5KhIFRpcDogTWFrZSBzdXJlIHRoZSAnY29ycCcgZGF0YWJhc2UgZXhpc3RzIGluIHlvdXIgaW5zdGFuY2VcIilcbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTWVzc2FnZSB9XG4gIH1cbn1cblxuLy8gRXhlY3V0ZSBhIHF1ZXJ5IHdpdGggZXJyb3IgaGFuZGxpbmdcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeSh0ZXh0OiBzdHJpbmcsIHBhcmFtcz86IGFueVtdKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpXG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIvCflI0gRXhlY3V0aW5nIHF1ZXJ5OlwiLCB0ZXh0LnN1YnN0cmluZygwLCAxMDApICsgKHRleHQubGVuZ3RoID4gMTAwID8gXCIuLi5cIiA6IFwiXCIpKVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeSh0ZXh0LCBwYXJhbXMpXG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRcblxuICAgIGNvbnNvbGUubG9nKGDinIUgUXVlcnkgZXhlY3V0ZWQgaW4gJHtkdXJhdGlvbn1tcywgcmV0dXJuZWQgJHtyZXN1bHQucm93Q291bnR9IHJvd3NgKVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIlxuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBRdWVyeSBmYWlsZWQgYWZ0ZXIgJHtkdXJhdGlvbn1tczpgLCBlcnJvck1lc3NhZ2UpXG4gICAgY29uc29sZS5lcnJvcihcIvCfk50gUXVlcnk6XCIsIHRleHQuc3Vic3RyaW5nKDAsIDIwMCkpXG4gICAgY29uc29sZS5lcnJvcihcIvCfk4sgUGFyYW1zOlwiLCBwYXJhbXMpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vLyBHZXQgYSBjbGllbnQgZnJvbSB0aGUgcG9vbCBmb3IgdHJhbnNhY3Rpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2xpZW50KCk6IFByb21pc2U8UG9vbENsaWVudD4ge1xuICByZXR1cm4gYXdhaXQgcG9vbC5jb25uZWN0KClcbn1cblxuLy8gQ2xvc2UgdGhlIHBvb2wgKGZvciBncmFjZWZ1bCBzaHV0ZG93bilcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZVBvb2woKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHBvb2wuZW5kKClcbiAgY29uc29sZS5sb2coXCLwn5SSIERhdGFiYXNlIHBvb2wgY2xvc2VkXCIpXG59XG5cbmV4cG9ydCBkZWZhdWx0IHBvb2xcbiJdLCJuYW1lcyI6WyJQb29sIiwiaXNQcm9kdWN0aW9uIiwicHJvY2VzcyIsImlzR29vZ2xlQ2xvdWQiLCJlbnYiLCJHT09HTEVfQ0xPVURfUFJPSkVDVCIsIkZJUkVCQVNFX1BST0pFQ1RfSUQiLCJkYkNvbmZpZyIsImNvbnNvbGUiLCJsb2ciLCJob3N0IiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwidXNlciIsIkRCX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwic3NsIiwibWF4IiwiaWRsZVRpbWVvdXRNaWxsaXMiLCJjb25uZWN0aW9uVGltZW91dE1pbGxpcyIsIkRCX0hPU1QiLCJwb3J0IiwiTnVtYmVyIiwicGFyc2VJbnQiLCJEQl9QT1JUIiwicmVqZWN0VW5hdXRob3JpemVkIiwicG9vbCIsIm9uIiwiZXJyIiwiZXJyb3IiLCJleGl0IiwiZW52aXJvbm1lbnQiLCJ0ZXN0Q29ubmVjdGlvbiIsImNsaWVudCIsImNvbm5lY3QiLCJyZXN1bHQiLCJxdWVyeSIsInJlbGVhc2UiLCJjb25uZWN0aW9uSW5mbyIsInJvd3MiLCJjdXJyZW50X3RpbWUiLCJkYXRhYmFzZV9uYW1lIiwiY3VycmVudF91c2VyIiwic2VydmVyX2lwIiwicG9zdGdyZXNfdmVyc2lvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJ0ZXh0IiwicGFyYW1zIiwic3RhcnQiLCJEYXRlIiwibm93Iiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiZHVyYXRpb24iLCJyb3dDb3VudCIsImdldENsaWVudCIsImNsb3NlUG9vbCIsImVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./services/firebase.ts":
/*!******************************!*\
  !*** ./services/firebase.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   storage: () => (/* binding */ storage)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"(rsc)/./node_modules/firebase/app/dist/index.mjs\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"(rsc)/./node_modules/firebase/auth/dist/index.mjs\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(rsc)/./node_modules/firebase/firestore/dist/index.mjs\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/storage */ \"(rsc)/./node_modules/firebase/storage/dist/index.mjs\");\n\n\n\n\n// Debug: Log environment variables (remove in production)\nconsole.log(\"Firebase Config Debug:\", {\n    apiKey:  true ? \"✓ Set\" : 0,\n    authDomain:  true ? \"✓ Set\" : 0,\n    projectId:  true ? \"✓ Set\" : 0,\n    storageBucket:  true ? \"✓ Set\" : 0,\n    messagingSenderId:  true ? \"✓ Set\" : 0,\n    appId:  true ? \"✓ Set\" : 0\n});\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDD3_U64MVrZp2iNxYWVX9_hHytC9x_WVo\",\n    authDomain: \"reactgladgrade.firebaseapp.com\",\n    projectId: \"reactgladgrade\",\n    storageBucket: \"reactgladgrade.appspot.com\",\n    messagingSenderId: \"360532994710\",\n    appId: \"1:360532994710:web:7376b3b3bab542567bf0b7\",\n    measurementId: \"G-G7Y7B5CME3\"\n};\n// Validate required fields\nconst requiredFields = [\n    \"apiKey\",\n    \"authDomain\",\n    \"projectId\",\n    \"appId\"\n];\nconst missingFields = requiredFields.filter((field)=>!firebaseConfig[field]);\nif (missingFields.length > 0) {\n    console.error(\"Missing Firebase configuration fields:\", missingFields);\n    console.error(\"Current config:\", firebaseConfig);\n    console.error(\"Make sure your .env.local file is in the root directory and restart the dev server\");\n    throw new Error(`Missing Firebase configuration: ${missingFields.join(\", \")}`);\n}\n// Initialize Firebase\nlet app = null;\nlet auth = null;\nlet db = null;\nlet storage = null;\ntry {\n    app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig);\n    auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(app);\n    db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(app);\n    storage = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_3__.getStorage)(app);\n    console.log(\"✅ Firebase initialized successfully\");\n} catch (error) {\n    console.error(\"❌ Firebase initialization failed:\", error);\n    throw error;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (app);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zZXJ2aWNlcy9maXJlYmFzZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE0QztBQUNMO0FBQ1U7QUFDSjtBQUU3QywwREFBMEQ7QUFDMURJLFFBQVFDLEdBQUcsQ0FBQywwQkFBMEI7SUFDcENDLFFBQVFDLEtBQXdDLEdBQUcsVUFBVSxDQUFXO0lBQ3hFRyxZQUFZSCxLQUE0QyxHQUFHLFVBQVUsQ0FBVztJQUNoRkssV0FBV0wsS0FBMkMsR0FBRyxVQUFVLENBQVc7SUFDOUVPLGVBQWVQLEtBQStDLEdBQUcsVUFBVSxDQUFXO0lBQ3RGUyxtQkFBbUJULEtBQW9ELEdBQUcsVUFBVSxDQUFXO0lBQy9GVyxPQUFPWCxLQUF1QyxHQUFHLFVBQVUsQ0FBVztBQUN4RTtBQUVBLHdDQUF3QztBQUN4QyxNQUFNYSxpQkFBaUI7SUFDckJkLFFBQVFDLHlDQUF3QztJQUNoREcsWUFBWUgsZ0NBQTRDO0lBQ3hESyxXQUFXTCxnQkFBMkM7SUFDdERPLGVBQWVQLDRCQUErQztJQUM5RFMsbUJBQW1CVCxjQUFvRDtJQUN2RVcsT0FBT1gsMkNBQXVDO0lBQzlDYyxlQUFlZCxjQUErQztBQUNoRTtBQUVBLDJCQUEyQjtBQUMzQixNQUFNZ0IsaUJBQWlCO0lBQUM7SUFBVTtJQUFjO0lBQWE7Q0FBUTtBQUNyRSxNQUFNQyxnQkFBZ0JELGVBQWVFLE1BQU0sQ0FBQyxDQUFDQyxRQUFVLENBQUNOLGNBQWMsQ0FBQ00sTUFBcUM7QUFFNUcsSUFBSUYsY0FBY0csTUFBTSxHQUFHLEdBQUc7SUFDNUJ2QixRQUFRd0IsS0FBSyxDQUFDLDBDQUEwQ0o7SUFDeERwQixRQUFRd0IsS0FBSyxDQUFDLG1CQUFtQlI7SUFDakNoQixRQUFRd0IsS0FBSyxDQUFDO0lBQ2QsTUFBTSxJQUFJQyxNQUFNLENBQUMsZ0NBQWdDLEVBQUVMLGNBQWNNLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDL0U7QUFFQSxzQkFBc0I7QUFDdEIsSUFBSUMsTUFBVztBQUNmLElBQUlDLE9BQVk7QUFDaEIsSUFBSUMsS0FBVTtBQUNkLElBQUlDLFVBQWU7QUFFbkIsSUFBSTtJQUNGSCxNQUFNL0IsMkRBQWFBLENBQUNvQjtJQUNwQlksT0FBTy9CLHNEQUFPQSxDQUFDOEI7SUFDZkUsS0FBSy9CLGdFQUFZQSxDQUFDNkI7SUFDbEJHLFVBQVUvQiw0REFBVUEsQ0FBQzRCO0lBQ3JCM0IsUUFBUUMsR0FBRyxDQUFDO0FBQ2QsRUFBRSxPQUFPdUIsT0FBTztJQUNkeEIsUUFBUXdCLEtBQUssQ0FBQyxxQ0FBcUNBO0lBQ25ELE1BQU1BO0FBQ1I7QUFFNEI7QUFDNUIsaUVBQWVHLEdBQUdBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vc2VydmljZXMvZmlyZWJhc2UudHM/OGNlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiXG5pbXBvcnQgeyBnZXRBdXRoIH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIlxuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiXG5pbXBvcnQgeyBnZXRTdG9yYWdlIH0gZnJvbSBcImZpcmViYXNlL3N0b3JhZ2VcIlxuXG4vLyBEZWJ1ZzogTG9nIGVudmlyb25tZW50IHZhcmlhYmxlcyAocmVtb3ZlIGluIHByb2R1Y3Rpb24pXG5jb25zb2xlLmxvZyhcIkZpcmViYXNlIENvbmZpZyBEZWJ1ZzpcIiwge1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVkgPyBcIuKckyBTZXRcIiA6IFwi4pyXIE1pc3NpbmdcIixcbiAgYXV0aERvbWFpbjogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfQVVUSF9ET01BSU4gPyBcIuKckyBTZXRcIiA6IFwi4pyXIE1pc3NpbmdcIixcbiAgcHJvamVjdElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9QUk9KRUNUX0lEID8gXCLinJMgU2V0XCIgOiBcIuKclyBNaXNzaW5nXCIsXG4gIHN0b3JhZ2VCdWNrZXQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VUID8gXCLinJMgU2V0XCIgOiBcIuKclyBNaXNzaW5nXCIsXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEID8gXCLinJMgU2V0XCIgOiBcIuKclyBNaXNzaW5nXCIsXG4gIGFwcElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9BUFBfSUQgPyBcIuKckyBTZXRcIiA6IFwi4pyXIE1pc3NpbmdcIixcbn0pXG5cbi8vIFlvdXIgd2ViIGFwcCdzIEZpcmViYXNlIGNvbmZpZ3VyYXRpb25cbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVksXG4gIGF1dGhEb21haW46IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FVVEhfRE9NQUlOLFxuICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gIHN0b3JhZ2VCdWNrZXQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VULFxuICBtZXNzYWdpbmdTZW5kZXJJZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVTU0FHSU5HX1NFTkRFUl9JRCxcbiAgYXBwSWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQUF9JRCxcbiAgbWVhc3VyZW1lbnRJZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVBU1VSRU1FTlRfSUQsXG59XG5cbi8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuY29uc3QgcmVxdWlyZWRGaWVsZHMgPSBbXCJhcGlLZXlcIiwgXCJhdXRoRG9tYWluXCIsIFwicHJvamVjdElkXCIsIFwiYXBwSWRcIl1cbmNvbnN0IG1pc3NpbmdGaWVsZHMgPSByZXF1aXJlZEZpZWxkcy5maWx0ZXIoKGZpZWxkKSA9PiAhZmlyZWJhc2VDb25maWdbZmllbGQgYXMga2V5b2YgdHlwZW9mIGZpcmViYXNlQ29uZmlnXSlcblxuaWYgKG1pc3NpbmdGaWVsZHMubGVuZ3RoID4gMCkge1xuICBjb25zb2xlLmVycm9yKFwiTWlzc2luZyBGaXJlYmFzZSBjb25maWd1cmF0aW9uIGZpZWxkczpcIiwgbWlzc2luZ0ZpZWxkcylcbiAgY29uc29sZS5lcnJvcihcIkN1cnJlbnQgY29uZmlnOlwiLCBmaXJlYmFzZUNvbmZpZylcbiAgY29uc29sZS5lcnJvcihcIk1ha2Ugc3VyZSB5b3VyIC5lbnYubG9jYWwgZmlsZSBpcyBpbiB0aGUgcm9vdCBkaXJlY3RvcnkgYW5kIHJlc3RhcnQgdGhlIGRldiBzZXJ2ZXJcIilcbiAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpcmViYXNlIGNvbmZpZ3VyYXRpb246ICR7bWlzc2luZ0ZpZWxkcy5qb2luKFwiLCBcIil9YClcbn1cblxuLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZVxubGV0IGFwcDogYW55ID0gbnVsbFxubGV0IGF1dGg6IGFueSA9IG51bGxcbmxldCBkYjogYW55ID0gbnVsbFxubGV0IHN0b3JhZ2U6IGFueSA9IG51bGxcblxudHJ5IHtcbiAgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZylcbiAgYXV0aCA9IGdldEF1dGgoYXBwKVxuICBkYiA9IGdldEZpcmVzdG9yZShhcHApXG4gIHN0b3JhZ2UgPSBnZXRTdG9yYWdlKGFwcClcbiAgY29uc29sZS5sb2coXCLinIUgRmlyZWJhc2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XCIpXG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmVycm9yKFwi4p2MIEZpcmViYXNlIGluaXRpYWxpemF0aW9uIGZhaWxlZDpcIiwgZXJyb3IpXG4gIHRocm93IGVycm9yXG59XG5cbmV4cG9ydCB7IGF1dGgsIGRiLCBzdG9yYWdlIH1cbmV4cG9ydCBkZWZhdWx0IGFwcFxuIl0sIm5hbWVzIjpbImluaXRpYWxpemVBcHAiLCJnZXRBdXRoIiwiZ2V0RmlyZXN0b3JlIiwiZ2V0U3RvcmFnZSIsImNvbnNvbGUiLCJsb2ciLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBJX0tFWSIsImF1dGhEb21haW4iLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9BVVRIX0RPTUFJTiIsInByb2plY3RJZCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQiLCJzdG9yYWdlQnVja2V0IiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQiLCJhcHBJZCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQUF9JRCIsImZpcmViYXNlQ29uZmlnIiwibWVhc3VyZW1lbnRJZCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX01FQVNVUkVNRU5UX0lEIiwicmVxdWlyZWRGaWVsZHMiLCJtaXNzaW5nRmllbGRzIiwiZmlsdGVyIiwiZmllbGQiLCJsZW5ndGgiLCJlcnJvciIsIkVycm9yIiwiam9pbiIsImFwcCIsImF1dGgiLCJkYiIsInN0b3JhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./services/firebase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/@firebase","vendor-chunks/undici","vendor-chunks/@grpc","vendor-chunks/firebase","vendor-chunks/protobufjs","vendor-chunks/long","vendor-chunks/@protobufjs","vendor-chunks/lodash.camelcase","vendor-chunks/tslib","vendor-chunks/idb"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsales%2Fprospects%2Froute&page=%2Fapi%2Fsales%2Fprospects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsales%2Fprospects%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();