"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/clients/[id]/route";
exports.ids = ["app/api/clients/[id]/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2F%5Bid%5D%2Froute&page=%2Fapi%2Fclients%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2F%5Bid%5D%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2F%5Bid%5D%2Froute&page=%2Fapi%2Fclients%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2F%5Bid%5D%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_clients_id_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/clients/[id]/route.ts */ \"(rsc)/./app/api/clients/[id]/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_clients_id_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_clients_id_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/clients/[id]/route\",\n        pathname: \"/api/clients/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/clients/[id]/route\"\n    },\n    resolvedPagePath: \"/Users/miguelgiraldo/DEVSPACE/dev_gladgrade_portal/app/api/clients/[id]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_miguelgiraldo_DEVSPACE_dev_gladgrade_portal_app_api_clients_id_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/clients/[id]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjbGllbnRzJTJGJTVCaWQlNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNsaWVudHMlMkYlNUJpZCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNsaWVudHMlMkYlNUJpZCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1pZ3VlbGdpcmFsZG8lMkZERVZTUEFDRSUyRmRldl9nbGFkZ3JhZGVfcG9ydGFsJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRm1pZ3VlbGdpcmFsZG8lMkZERVZTUEFDRSUyRmRldl9nbGFkZ3JhZGVfcG9ydGFsJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNnQztBQUM3RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvP2E0NGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL21pZ3VlbGdpcmFsZG8vREVWU1BBQ0UvZGV2X2dsYWRncmFkZV9wb3J0YWwvYXBwL2FwaS9jbGllbnRzL1tpZF0vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NsaWVudHMvW2lkXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NsaWVudHMvW2lkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2xpZW50cy9baWRdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL21pZ3VlbGdpcmFsZG8vREVWU1BBQ0UvZGV2X2dsYWRncmFkZV9wb3J0YWwvYXBwL2FwaS9jbGllbnRzL1tpZF0vcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NsaWVudHMvW2lkXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2F%5Bid%5D%2Froute&page=%2Fapi%2Fclients%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2F%5Bid%5D%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/clients/[id]/route.ts":
/*!***************************************!*\
  !*** ./app/api/clients/[id]/route.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./lib/database.ts\");\n/* harmony import */ var _lib_audit_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/audit-logger */ \"(rsc)/./lib/audit-logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database__WEBPACK_IMPORTED_MODULE_1__, _lib_audit_logger__WEBPACK_IMPORTED_MODULE_2__]);\n([_lib_database__WEBPACK_IMPORTED_MODULE_1__, _lib_audit_logger__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n// Get single client details\nasync function GET(request, { params }) {\n    try {\n        const clientId = Number.parseInt(params.id);\n        const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(`\n      SELECT \n        bc.*,\n        e.name as sales_rep_name,\n        e.email as sales_rep_email\n      FROM business_clients bc\n      LEFT JOIN employees e ON bc.sales_rep_id = e.id\n      WHERE bc.id = $1\n      `, [\n            clientId\n        ]);\n        if (result.rows.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Client not found\"\n            }, {\n                status: 404\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: result.rows[0]\n        });\n    } catch (error) {\n        console.error(\"❌ Error fetching client:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to fetch client\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Update client details with audit logging\nasync function PUT(request, { params }) {\n    try {\n        const clientId = Number.parseInt(params.id);\n        const updates = await request.json();\n        // Get current user for audit logging\n        // Get current user (using same pattern as prospects API)\n        async function getCurrentUser(request) {\n            try {\n                const firebaseUid = request.headers.get(\"x-firebase-uid\");\n                if (firebaseUid) {\n                    const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(\"SELECT id, full_name as name, email, role FROM employees WHERE firebase_uid = $1 AND status = 'active'\", [\n                        firebaseUid\n                    ]);\n                    if (result.rows.length > 0) return result.rows[0];\n                }\n                const userEmail = request.headers.get(\"x-user-email\");\n                if (userEmail) {\n                    const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(\"SELECT id, full_name as name, email, role FROM employees WHERE email = $1 AND status = 'active'\", [\n                        userEmail.toLowerCase()\n                    ]);\n                    if (result.rows.length > 0) return result.rows[0];\n                }\n                return null;\n            } catch (error) {\n                console.error(\"❌ Error getting current user:\", error);\n                return null;\n            }\n        }\n        // Then call it like this:\n        const currentUser = await getCurrentUser(request);\n        // Get current client data for audit comparison\n        const currentResult = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(\"SELECT * FROM business_clients WHERE id = $1\", [\n            clientId\n        ]);\n        if (currentResult.rows.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Client not found\"\n            }, {\n                status: 404\n            });\n        }\n        const currentData = currentResult.rows[0];\n        // Build update query dynamically\n        const allowedFields = [\n            \"business_name\",\n            \"contact_name\",\n            \"contact_email\",\n            \"phone\",\n            \"website\",\n            \"business_address\",\n            \"industry_category_id\",\n            \"claim_status\",\n            \"sales_rep_id\"\n        ];\n        const updateFields = [];\n        const updateValues = [];\n        const changedFields = [];\n        let paramIndex = 1;\n        for (const [key, value] of Object.entries(updates)){\n            if (allowedFields.includes(key) && currentData[key] !== value) {\n                updateFields.push(`${key} = $${paramIndex}`);\n                updateValues.push(value);\n                changedFields.push(key);\n                paramIndex++;\n            }\n        }\n        if (updateFields.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"No changes detected\",\n                data: currentData\n            });\n        }\n        // Add updated_at timestamp\n        updateFields.push(`updated_at = NOW()`);\n        updateValues.push(clientId) // For WHERE clause\n        ;\n        const updateQuery = `\n      UPDATE business_clients \n      SET ${updateFields.join(\", \")}\n      WHERE id = $${paramIndex}\n      RETURNING *\n    `;\n        const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.query)(updateQuery, updateValues);\n        const updatedClient = result.rows[0];\n        // Log the changes with audit system - Fix TypeScript errors\n        if (currentUser) {\n            await _lib_audit_logger__WEBPACK_IMPORTED_MODULE_2__.AuditLogger.log({\n                userId: currentUser.id,\n                userEmail: currentUser.email,\n                userName: currentUser.name,\n                userRole: currentUser.role,\n                actionType: \"UPDATE\",\n                tableName: \"business_clients\",\n                recordId: clientId,\n                actionDescription: `Updated client: ${currentData.business_name}`,\n                oldValues: Object.fromEntries(changedFields.map((field)=>[\n                        field,\n                        currentData[field]\n                    ])),\n                newValues: Object.fromEntries(changedFields.map((field)=>[\n                        field,\n                        updates[field]\n                    ])),\n                changedFields,\n                businessContext: \"client_management\",\n                severityLevel: \"info\",\n                ipAddress: request.headers.get(\"x-forwarded-for\") || request.headers.get(\"x-real-ip\") || undefined,\n                userAgent: request.headers.get(\"user-agent\") || undefined\n            });\n            console.log(`✅ Client ${clientId} updated by ${currentUser.name}. Changed fields: ${changedFields.join(\", \")}`);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: updatedClient,\n            message: `Client updated successfully. Changed: ${changedFields.join(\", \")}`,\n            changedFields\n        });\n    } catch (error) {\n        console.error(\"❌ Error updating client:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to update client\"\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MUIsWUFBWTJCLGFBQWEsQ0FBQyxDQUFDO2dCQUNqRUMsV0FBV3BCLE9BQU9xQixXQUFXLENBQUN6QixjQUFjMEIsR0FBRyxDQUFDLENBQUNDLFFBQVU7d0JBQUNBO3dCQUFPL0IsV0FBVyxDQUFDK0IsTUFBTTtxQkFBQztnQkFDdEZDLFdBQVd4QixPQUFPcUIsV0FBVyxDQUFDekIsY0FBYzBCLEdBQUcsQ0FBQyxDQUFDQyxRQUFVO3dCQUFDQTt3QkFBT3hDLE9BQU8sQ0FBQ3dDLE1BQU07cUJBQUM7Z0JBQ2xGM0I7Z0JBQ0E2QixpQkFBaUI7Z0JBQ2pCQyxlQUFlO2dCQUNmQyxXQUFXNUQsUUFBUW1CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQnBCLFFBQVFtQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQkFBZ0J5QztnQkFDekZDLFdBQVc5RCxRQUFRbUIsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCeUM7WUFDbEQ7WUFFQS9DLFFBQVEyQixHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUV2QyxTQUFTLFlBQVksRUFBRXFCLFlBQVlzQixJQUFJLENBQUMsa0JBQWtCLEVBQUVoQixjQUFjVSxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ2hIO1FBRUEsT0FBTzNDLHFEQUFZQSxDQUFDYSxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEcsTUFBTTJCO1lBQ05ILFNBQVMsQ0FBQyxzQ0FBc0MsRUFBRVIsY0FBY1UsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUM1RVY7UUFDRjtJQUNGLEVBQUUsT0FBT2xCLE9BQU87UUFDZEcsUUFBUUgsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsT0FBT2YscURBQVlBLENBQUNhLElBQUksQ0FBQztZQUFFQyxTQUFTO1lBQU9DLE9BQU87UUFBMEIsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDL0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9hcHAvYXBpL2NsaWVudHMvW2lkXS9yb3V0ZS50cz8yMDI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgeyBxdWVyeSB9IGZyb20gXCJAL2xpYi9kYXRhYmFzZVwiXG5pbXBvcnQgeyBBdWRpdExvZ2dlciB9IGZyb20gXCJAL2xpYi9hdWRpdC1sb2dnZXJcIlxuaW1wb3J0IHsgZ2V0RW1wbG95ZWVCeUF1dGggfSBmcm9tIFwiQC9saWIvYXV0aC11dGlsc1wiXG5cbi8vIEdldCBzaW5nbGUgY2xpZW50IGRldGFpbHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QsIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50SWQgPSBOdW1iZXIucGFyc2VJbnQocGFyYW1zLmlkKVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoXG4gICAgICBgXG4gICAgICBTRUxFQ1QgXG4gICAgICAgIGJjLiosXG4gICAgICAgIGUubmFtZSBhcyBzYWxlc19yZXBfbmFtZSxcbiAgICAgICAgZS5lbWFpbCBhcyBzYWxlc19yZXBfZW1haWxcbiAgICAgIEZST00gYnVzaW5lc3NfY2xpZW50cyBiY1xuICAgICAgTEVGVCBKT0lOIGVtcGxveWVlcyBlIE9OIGJjLnNhbGVzX3JlcF9pZCA9IGUuaWRcbiAgICAgIFdIRVJFIGJjLmlkID0gJDFcbiAgICAgIGAsXG4gICAgICBbY2xpZW50SWRdLFxuICAgIClcblxuICAgIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJDbGllbnQgbm90IGZvdW5kXCIgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YTogcmVzdWx0LnJvd3NbMF0sXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGZldGNoaW5nIGNsaWVudDpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkZhaWxlZCB0byBmZXRjaCBjbGllbnRcIiB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn1cblxuLy8gVXBkYXRlIGNsaWVudCBkZXRhaWxzIHdpdGggYXVkaXQgbG9nZ2luZ1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjbGllbnRJZCA9IE51bWJlci5wYXJzZUludChwYXJhbXMuaWQpXG4gICAgY29uc3QgdXBkYXRlcyA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG5cbiAgICAvLyBHZXQgY3VycmVudCB1c2VyIGZvciBhdWRpdCBsb2dnaW5nXG4gICAgLy8gR2V0IGN1cnJlbnQgdXNlciAodXNpbmcgc2FtZSBwYXR0ZXJuIGFzIHByb3NwZWN0cyBBUEkpXG4gIGFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpcmViYXNlVWlkID0gcmVxdWVzdC5oZWFkZXJzLmdldChcIngtZmlyZWJhc2UtdWlkXCIpXG4gICAgICBpZiAoZmlyZWJhc2VVaWQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoXG4gICAgICAgICAgXCJTRUxFQ1QgaWQsIGZ1bGxfbmFtZSBhcyBuYW1lLCBlbWFpbCwgcm9sZSBGUk9NIGVtcGxveWVlcyBXSEVSRSBmaXJlYmFzZV91aWQgPSAkMSBBTkQgc3RhdHVzID0gJ2FjdGl2ZSdcIixcbiAgICAgICAgICBbZmlyZWJhc2VVaWRdXG4gICAgICAgIClcbiAgICAgICAgaWYgKHJlc3VsdC5yb3dzLmxlbmd0aCA+IDApIHJldHVybiByZXN1bHQucm93c1swXVxuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VyRW1haWwgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC11c2VyLWVtYWlsXCIpXG4gICAgICBpZiAodXNlckVtYWlsKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KFxuICAgICAgICAgIFwiU0VMRUNUIGlkLCBmdWxsX25hbWUgYXMgbmFtZSwgZW1haWwsIHJvbGUgRlJPTSBlbXBsb3llZXMgV0hFUkUgZW1haWwgPSAkMSBBTkQgc3RhdHVzID0gJ2FjdGl2ZSdcIixcbiAgICAgICAgICBbdXNlckVtYWlsLnRvTG93ZXJDYXNlKCldXG4gICAgICAgIClcbiAgICAgICAgaWYgKHJlc3VsdC5yb3dzLmxlbmd0aCA+IDApIHJldHVybiByZXN1bHQucm93c1swXVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGdldHRpbmcgY3VycmVudCB1c2VyOlwiLCBlcnJvcilcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgLy8gVGhlbiBjYWxsIGl0IGxpa2UgdGhpczpcbiAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcihyZXF1ZXN0KVxuXG4gICAgLy8gR2V0IGN1cnJlbnQgY2xpZW50IGRhdGEgZm9yIGF1ZGl0IGNvbXBhcmlzb25cbiAgICBjb25zdCBjdXJyZW50UmVzdWx0ID0gYXdhaXQgcXVlcnkoXCJTRUxFQ1QgKiBGUk9NIGJ1c2luZXNzX2NsaWVudHMgV0hFUkUgaWQgPSAkMVwiLCBbY2xpZW50SWRdKVxuXG4gICAgaWYgKGN1cnJlbnRSZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJDbGllbnQgbm90IGZvdW5kXCIgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnREYXRhID0gY3VycmVudFJlc3VsdC5yb3dzWzBdXG5cbiAgICAvLyBCdWlsZCB1cGRhdGUgcXVlcnkgZHluYW1pY2FsbHlcbiAgICBjb25zdCBhbGxvd2VkRmllbGRzID0gW1xuICAgICAgXCJidXNpbmVzc19uYW1lXCIsXG4gICAgICBcImNvbnRhY3RfbmFtZVwiLCBcbiAgICAgIFwiY29udGFjdF9lbWFpbFwiLFxuICAgICAgXCJwaG9uZVwiLFxuICAgICAgXCJ3ZWJzaXRlXCIsXG4gICAgICBcImJ1c2luZXNzX2FkZHJlc3NcIixcbiAgICAgIFwiaW5kdXN0cnlfY2F0ZWdvcnlfaWRcIixcbiAgICAgIFwiY2xhaW1fc3RhdHVzXCIsXG4gICAgICBcInNhbGVzX3JlcF9pZFwiXG4gICAgXVxuXG4gICAgY29uc3QgdXBkYXRlRmllbGRzID0gW11cbiAgICBjb25zdCB1cGRhdGVWYWx1ZXMgPSBbXVxuICAgIGNvbnN0IGNoYW5nZWRGaWVsZHMgPSBbXVxuICAgIGxldCBwYXJhbUluZGV4ID0gMVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModXBkYXRlcykpIHtcbiAgICAgIGlmIChhbGxvd2VkRmllbGRzLmluY2x1ZGVzKGtleSkgJiYgY3VycmVudERhdGFba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdXBkYXRlRmllbGRzLnB1c2goYCR7a2V5fSA9ICQke3BhcmFtSW5kZXh9YClcbiAgICAgICAgdXBkYXRlVmFsdWVzLnB1c2godmFsdWUpXG4gICAgICAgIGNoYW5nZWRGaWVsZHMucHVzaChrZXkpXG4gICAgICAgIHBhcmFtSW5kZXgrK1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh1cGRhdGVGaWVsZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBcIk5vIGNoYW5nZXMgZGV0ZWN0ZWRcIixcbiAgICAgICAgZGF0YTogY3VycmVudERhdGEsXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIEFkZCB1cGRhdGVkX2F0IHRpbWVzdGFtcFxuICAgIHVwZGF0ZUZpZWxkcy5wdXNoKGB1cGRhdGVkX2F0ID0gTk9XKClgKVxuICAgIHVwZGF0ZVZhbHVlcy5wdXNoKGNsaWVudElkKSAvLyBGb3IgV0hFUkUgY2xhdXNlXG5cbiAgICBjb25zdCB1cGRhdGVRdWVyeSA9IGBcbiAgICAgIFVQREFURSBidXNpbmVzc19jbGllbnRzIFxuICAgICAgU0VUICR7dXBkYXRlRmllbGRzLmpvaW4oXCIsIFwiKX1cbiAgICAgIFdIRVJFIGlkID0gJCR7cGFyYW1JbmRleH1cbiAgICAgIFJFVFVSTklORyAqXG4gICAgYFxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkodXBkYXRlUXVlcnksIHVwZGF0ZVZhbHVlcylcbiAgICBjb25zdCB1cGRhdGVkQ2xpZW50ID0gcmVzdWx0LnJvd3NbMF1cblxuICAgIC8vIExvZyB0aGUgY2hhbmdlcyB3aXRoIGF1ZGl0IHN5c3RlbSAtIEZpeCBUeXBlU2NyaXB0IGVycm9yc1xuICAgIGlmIChjdXJyZW50VXNlcikge1xuICAgICAgYXdhaXQgQXVkaXRMb2dnZXIubG9nKHtcbiAgICAgICAgdXNlcklkOiBjdXJyZW50VXNlci5pZCxcbiAgICAgICAgdXNlckVtYWlsOiBjdXJyZW50VXNlci5lbWFpbCxcbiAgICAgICAgdXNlck5hbWU6IGN1cnJlbnRVc2VyLm5hbWUsXG4gICAgICAgIHVzZXJSb2xlOiBjdXJyZW50VXNlci5yb2xlLFxuICAgICAgICBhY3Rpb25UeXBlOiBcIlVQREFURVwiLFxuICAgICAgICB0YWJsZU5hbWU6IFwiYnVzaW5lc3NfY2xpZW50c1wiLFxuICAgICAgICByZWNvcmRJZDogY2xpZW50SWQsXG4gICAgICAgIGFjdGlvbkRlc2NyaXB0aW9uOiBgVXBkYXRlZCBjbGllbnQ6ICR7Y3VycmVudERhdGEuYnVzaW5lc3NfbmFtZX1gLFxuICAgICAgICBvbGRWYWx1ZXM6IE9iamVjdC5mcm9tRW50cmllcyhjaGFuZ2VkRmllbGRzLm1hcCgoZmllbGQpID0+IFtmaWVsZCwgY3VycmVudERhdGFbZmllbGRdXSkpLFxuICAgICAgICBuZXdWYWx1ZXM6IE9iamVjdC5mcm9tRW50cmllcyhjaGFuZ2VkRmllbGRzLm1hcCgoZmllbGQpID0+IFtmaWVsZCwgdXBkYXRlc1tmaWVsZF1dKSksXG4gICAgICAgIGNoYW5nZWRGaWVsZHMsXG4gICAgICAgIGJ1c2luZXNzQ29udGV4dDogXCJjbGllbnRfbWFuYWdlbWVudFwiLFxuICAgICAgICBzZXZlcml0eUxldmVsOiBcImluZm9cIixcbiAgICAgICAgaXBBZGRyZXNzOiByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtZm9yXCIpIHx8IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ4LXJlYWwtaXBcIikgfHwgdW5kZWZpbmVkLFxuICAgICAgICB1c2VyQWdlbnQ6IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ1c2VyLWFnZW50XCIpIHx8IHVuZGVmaW5lZCxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnNvbGUubG9nKGDinIUgQ2xpZW50ICR7Y2xpZW50SWR9IHVwZGF0ZWQgYnkgJHtjdXJyZW50VXNlci5uYW1lfS4gQ2hhbmdlZCBmaWVsZHM6ICR7Y2hhbmdlZEZpZWxkcy5qb2luKFwiLCBcIil9YClcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHVwZGF0ZWRDbGllbnQsXG4gICAgICBtZXNzYWdlOiBgQ2xpZW50IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LiBDaGFuZ2VkOiAke2NoYW5nZWRGaWVsZHMuam9pbihcIiwgXCIpfWAsXG4gICAgICBjaGFuZ2VkRmllbGRzLFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciB1cGRhdGluZyBjbGllbnQ6XCIsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJGYWlsZWQgdG8gdXBkYXRlIGNsaWVudFwiIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInF1ZXJ5IiwiQXVkaXRMb2dnZXIiLCJHRVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwiY2xpZW50SWQiLCJOdW1iZXIiLCJwYXJzZUludCIsImlkIiwicmVzdWx0Iiwicm93cyIsImxlbmd0aCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwiY29uc29sZSIsIlBVVCIsInVwZGF0ZXMiLCJnZXRDdXJyZW50VXNlciIsImZpcmViYXNlVWlkIiwiaGVhZGVycyIsImdldCIsInVzZXJFbWFpbCIsInRvTG93ZXJDYXNlIiwiY3VycmVudFVzZXIiLCJjdXJyZW50UmVzdWx0IiwiY3VycmVudERhdGEiLCJhbGxvd2VkRmllbGRzIiwidXBkYXRlRmllbGRzIiwidXBkYXRlVmFsdWVzIiwiY2hhbmdlZEZpZWxkcyIsInBhcmFtSW5kZXgiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJpbmNsdWRlcyIsInB1c2giLCJtZXNzYWdlIiwidXBkYXRlUXVlcnkiLCJqb2luIiwidXBkYXRlZENsaWVudCIsImxvZyIsInVzZXJJZCIsImVtYWlsIiwidXNlck5hbWUiLCJuYW1lIiwidXNlclJvbGUiLCJyb2xlIiwiYWN0aW9uVHlwZSIsInRhYmxlTmFtZSIsInJlY29yZElkIiwiYWN0aW9uRGVzY3JpcHRpb24iLCJidXNpbmVzc19uYW1lIiwib2xkVmFsdWVzIiwiZnJvbUVudHJpZXMiLCJtYXAiLCJmaWVsZCIsIm5ld1ZhbHVlcyIsImJ1c2luZXNzQ29udGV4dCIsInNldmVyaXR5TGV2ZWwiLCJpcEFkZHJlc3MiLCJ1bmRlZmluZWQiLCJ1c2VyQWdlbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/clients/[id]/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/audit-logger.ts":
/*!*****************************!*\
  !*** ./lib/audit-logger.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuditLogger: () => (/* binding */ AuditLogger),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./lib/database.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_database__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Comprehensive audit logger for GladGrade Portal\nclass AuditLogger {\n    // Main logging function\n    static async log(logData) {\n        try {\n            const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_0__.query)(`\n        INSERT INTO audit_logs (\n          user_id, user_email, user_name, user_role,\n          action_type, table_name, record_id, action_description,\n          old_values, new_values, changed_fields,\n          ip_address, user_agent,\n          business_context, severity_level\n        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15)\n        RETURNING id\n      `, [\n                logData.userId || null,\n                logData.userEmail || null,\n                logData.userName || null,\n                logData.userRole || null,\n                logData.actionType,\n                logData.tableName || null,\n                logData.recordId || null,\n                logData.actionDescription,\n                logData.oldValues ? JSON.stringify(logData.oldValues) : null,\n                logData.newValues ? JSON.stringify(logData.newValues) : null,\n                logData.changedFields || null,\n                logData.ipAddress || null,\n                logData.userAgent || null,\n                logData.businessContext || \"general\",\n                logData.severityLevel || \"info\"\n            ]);\n            console.log(`📝 Audit log created: ${logData.actionType} - ${logData.actionDescription}`);\n            return result.rows[0].id;\n        } catch (error) {\n            console.error(\"❌ Failed to create audit log:\", error);\n            return null;\n        }\n    }\n    // Specific logging methods for common actions\n    static async logProspectCreation(userId, userName, userRole, prospectId, prospectData) {\n        return await AuditLogger.log({\n            userId,\n            userName,\n            userRole,\n            actionType: \"CREATE\",\n            tableName: \"prospects\",\n            recordId: prospectId,\n            actionDescription: `Created new prospect: ${prospectData.business_name}`,\n            newValues: prospectData,\n            businessContext: \"sales_pipeline\",\n            severityLevel: \"info\"\n        });\n    }\n    static async logProspectOwnershipChange(changedByUserId, changedByName, changedByRole, prospectId, oldOwnerId, newOwnerId, reason, ipAddress, userAgent) {\n        // Log in prospect_ownership_logs table\n        await (0,_lib_database__WEBPACK_IMPORTED_MODULE_0__.query)(`SELECT log_prospect_ownership_change($1, $2, $3, $4, $5, $6, $7)`, [\n            prospectId,\n            oldOwnerId,\n            newOwnerId,\n            changedByUserId,\n            reason,\n            ipAddress,\n            userAgent\n        ]);\n        // Also log in main audit log\n        return await AuditLogger.log({\n            userId: changedByUserId,\n            userName: changedByName,\n            userRole: changedByRole,\n            actionType: \"ASSIGN\",\n            tableName: \"prospects\",\n            recordId: prospectId,\n            actionDescription: `Changed prospect ownership from employee ${oldOwnerId} to employee ${newOwnerId}. Reason: ${reason}`,\n            businessContext: \"sales_pipeline\",\n            severityLevel: \"warning\",\n            ipAddress,\n            userAgent\n        });\n    }\n    static async logProspectConversion(userId, userName, userRole, prospectId, clientId, conversionValue) {\n        return await AuditLogger.log({\n            userId,\n            userName,\n            userRole,\n            actionType: \"CONVERT\",\n            tableName: \"prospects\",\n            recordId: prospectId,\n            actionDescription: `Converted prospect ${prospectId} to client ${clientId} with value $${conversionValue}`,\n            newValues: {\n                client_id: clientId,\n                conversion_value: conversionValue\n            },\n            businessContext: \"sales_pipeline\",\n            severityLevel: \"info\"\n        });\n    }\n    // Get recent activity for dashboard\n    static async getRecentActivity(limit = 50) {\n        try {\n            const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_0__.query)(`\n        SELECT * FROM audit_logs \n        ORDER BY created_at DESC\n        LIMIT $1\n      `, [\n                limit\n            ]);\n            return result.rows;\n        } catch (error) {\n            console.error(\"Error fetching recent activity:\", error);\n            return [];\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AuditLogger);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ1hDLFVBQVVnQjtZQUNWZixtQkFBbUIsQ0FBQyxtQkFBbUIsRUFBRWUsV0FBVyxXQUFXLEVBQUVXLFNBQVMsYUFBYSxFQUFFQyxnQkFBZ0IsQ0FBQztZQUMxR3ZCLFdBQVc7Z0JBQUV3QixXQUFXRjtnQkFBVUcsa0JBQWtCRjtZQUFnQjtZQUNwRW5CLGlCQUFpQjtZQUNqQkMsZUFBZTtRQUNqQjtJQUNGO0lBRUEsb0NBQW9DO0lBQ3BDLGFBQWFxQixrQkFBa0JDLFFBQVEsRUFBRSxFQUFFO1FBQ3pDLElBQUk7WUFDRixNQUFNdkMsU0FBUyxNQUFNSixvREFBS0EsQ0FDeEIsQ0FBQzs7OztNQUlILENBQUMsRUFDQztnQkFBQzJDO2FBQU07WUFHVCxPQUFPdkMsT0FBT21CLElBQUk7UUFDcEIsRUFBRSxPQUFPRSxPQUFPO1lBQ2RILFFBQVFHLEtBQUssQ0FBQyxtQ0FBbUNBO1lBQ2pELE9BQU8sRUFBRTtRQUNYO0lBQ0Y7QUFDRjtBQUVBLGlFQUFleEIsV0FBV0EsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvYXVkaXQtbG9nZ2VyLnRzPzUzMGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcXVlcnkgfSBmcm9tIFwiQC9saWIvZGF0YWJhc2VcIlxuXG5pbnRlcmZhY2UgQXVkaXRMb2dEYXRhIHtcbiAgdXNlcklkPzogbnVtYmVyXG4gIHVzZXJFbWFpbD86IHN0cmluZ1xuICB1c2VyTmFtZT86IHN0cmluZ1xuICB1c2VyUm9sZT86IHN0cmluZ1xuICBhY3Rpb25UeXBlOiBzdHJpbmdcbiAgdGFibGVOYW1lPzogc3RyaW5nXG4gIHJlY29yZElkPzogbnVtYmVyXG4gIGFjdGlvbkRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgb2xkVmFsdWVzPzogYW55XG4gIG5ld1ZhbHVlcz86IGFueVxuICBjaGFuZ2VkRmllbGRzPzogc3RyaW5nW11cbiAgYnVzaW5lc3NDb250ZXh0Pzogc3RyaW5nXG4gIHNldmVyaXR5TGV2ZWw/OiBcImluZm9cIiB8IFwid2FybmluZ1wiIHwgXCJlcnJvclwiIHwgXCJjcml0aWNhbFwiXG4gIGlwQWRkcmVzcz86IHN0cmluZ1xuICB1c2VyQWdlbnQ/OiBzdHJpbmdcbn1cblxuLy8gQ29tcHJlaGVuc2l2ZSBhdWRpdCBsb2dnZXIgZm9yIEdsYWRHcmFkZSBQb3J0YWxcbmV4cG9ydCBjbGFzcyBBdWRpdExvZ2dlciB7XG4gIC8vIE1haW4gbG9nZ2luZyBmdW5jdGlvblxuICBzdGF0aWMgYXN5bmMgbG9nKGxvZ0RhdGE6IEF1ZGl0TG9nRGF0YSk6IFByb21pc2U8bnVtYmVyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeShcbiAgICAgICAgYFxuICAgICAgICBJTlNFUlQgSU5UTyBhdWRpdF9sb2dzIChcbiAgICAgICAgICB1c2VyX2lkLCB1c2VyX2VtYWlsLCB1c2VyX25hbWUsIHVzZXJfcm9sZSxcbiAgICAgICAgICBhY3Rpb25fdHlwZSwgdGFibGVfbmFtZSwgcmVjb3JkX2lkLCBhY3Rpb25fZGVzY3JpcHRpb24sXG4gICAgICAgICAgb2xkX3ZhbHVlcywgbmV3X3ZhbHVlcywgY2hhbmdlZF9maWVsZHMsXG4gICAgICAgICAgaXBfYWRkcmVzcywgdXNlcl9hZ2VudCxcbiAgICAgICAgICBidXNpbmVzc19jb250ZXh0LCBzZXZlcml0eV9sZXZlbFxuICAgICAgICApIFZBTFVFUyAoJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCAkOSwgJDEwLCAkMTEsICQxMiwgJDEzLCAkMTQsICQxNSlcbiAgICAgICAgUkVUVVJOSU5HIGlkXG4gICAgICBgLFxuICAgICAgICBbXG4gICAgICAgICAgbG9nRGF0YS51c2VySWQgfHwgbnVsbCxcbiAgICAgICAgICBsb2dEYXRhLnVzZXJFbWFpbCB8fCBudWxsLFxuICAgICAgICAgIGxvZ0RhdGEudXNlck5hbWUgfHwgbnVsbCxcbiAgICAgICAgICBsb2dEYXRhLnVzZXJSb2xlIHx8IG51bGwsXG4gICAgICAgICAgbG9nRGF0YS5hY3Rpb25UeXBlLFxuICAgICAgICAgIGxvZ0RhdGEudGFibGVOYW1lIHx8IG51bGwsXG4gICAgICAgICAgbG9nRGF0YS5yZWNvcmRJZCB8fCBudWxsLFxuICAgICAgICAgIGxvZ0RhdGEuYWN0aW9uRGVzY3JpcHRpb24sXG4gICAgICAgICAgbG9nRGF0YS5vbGRWYWx1ZXMgPyBKU09OLnN0cmluZ2lmeShsb2dEYXRhLm9sZFZhbHVlcykgOiBudWxsLFxuICAgICAgICAgIGxvZ0RhdGEubmV3VmFsdWVzID8gSlNPTi5zdHJpbmdpZnkobG9nRGF0YS5uZXdWYWx1ZXMpIDogbnVsbCxcbiAgICAgICAgICBsb2dEYXRhLmNoYW5nZWRGaWVsZHMgfHwgbnVsbCxcbiAgICAgICAgICBsb2dEYXRhLmlwQWRkcmVzcyB8fCBudWxsLFxuICAgICAgICAgIGxvZ0RhdGEudXNlckFnZW50IHx8IG51bGwsXG4gICAgICAgICAgbG9nRGF0YS5idXNpbmVzc0NvbnRleHQgfHwgXCJnZW5lcmFsXCIsXG4gICAgICAgICAgbG9nRGF0YS5zZXZlcml0eUxldmVsIHx8IFwiaW5mb1wiLFxuICAgICAgICBdLFxuICAgICAgKVxuXG4gICAgICBjb25zb2xlLmxvZyhg8J+TnSBBdWRpdCBsb2cgY3JlYXRlZDogJHtsb2dEYXRhLmFjdGlvblR5cGV9IC0gJHtsb2dEYXRhLmFjdGlvbkRlc2NyaXB0aW9ufWApXG4gICAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0uaWRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBGYWlsZWQgdG8gY3JlYXRlIGF1ZGl0IGxvZzpcIiwgZXJyb3IpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8vIFNwZWNpZmljIGxvZ2dpbmcgbWV0aG9kcyBmb3IgY29tbW9uIGFjdGlvbnNcbiAgc3RhdGljIGFzeW5jIGxvZ1Byb3NwZWN0Q3JlYXRpb24oXG4gICAgdXNlcklkOiBudW1iZXIsXG4gICAgdXNlck5hbWU6IHN0cmluZyxcbiAgICB1c2VyUm9sZTogc3RyaW5nLFxuICAgIHByb3NwZWN0SWQ6IG51bWJlcixcbiAgICBwcm9zcGVjdERhdGE6IGFueSxcbiAgKSB7XG4gICAgcmV0dXJuIGF3YWl0IEF1ZGl0TG9nZ2VyLmxvZyh7XG4gICAgICB1c2VySWQsXG4gICAgICB1c2VyTmFtZSxcbiAgICAgIHVzZXJSb2xlLFxuICAgICAgYWN0aW9uVHlwZTogXCJDUkVBVEVcIixcbiAgICAgIHRhYmxlTmFtZTogXCJwcm9zcGVjdHNcIixcbiAgICAgIHJlY29yZElkOiBwcm9zcGVjdElkLFxuICAgICAgYWN0aW9uRGVzY3JpcHRpb246IGBDcmVhdGVkIG5ldyBwcm9zcGVjdDogJHtwcm9zcGVjdERhdGEuYnVzaW5lc3NfbmFtZX1gLFxuICAgICAgbmV3VmFsdWVzOiBwcm9zcGVjdERhdGEsXG4gICAgICBidXNpbmVzc0NvbnRleHQ6IFwic2FsZXNfcGlwZWxpbmVcIixcbiAgICAgIHNldmVyaXR5TGV2ZWw6IFwiaW5mb1wiLFxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9nUHJvc3BlY3RPd25lcnNoaXBDaGFuZ2UoXG4gICAgY2hhbmdlZEJ5VXNlcklkOiBudW1iZXIsXG4gICAgY2hhbmdlZEJ5TmFtZTogc3RyaW5nLFxuICAgIGNoYW5nZWRCeVJvbGU6IHN0cmluZyxcbiAgICBwcm9zcGVjdElkOiBudW1iZXIsXG4gICAgb2xkT3duZXJJZDogbnVtYmVyLFxuICAgIG5ld093bmVySWQ6IG51bWJlcixcbiAgICByZWFzb246IHN0cmluZyxcbiAgICBpcEFkZHJlc3M/OiBzdHJpbmcsXG4gICAgdXNlckFnZW50Pzogc3RyaW5nLFxuICApIHtcbiAgICAvLyBMb2cgaW4gcHJvc3BlY3Rfb3duZXJzaGlwX2xvZ3MgdGFibGVcbiAgICBhd2FpdCBxdWVyeShgU0VMRUNUIGxvZ19wcm9zcGVjdF9vd25lcnNoaXBfY2hhbmdlKCQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICQ3KWAsIFtcbiAgICAgIHByb3NwZWN0SWQsXG4gICAgICBvbGRPd25lcklkLFxuICAgICAgbmV3T3duZXJJZCxcbiAgICAgIGNoYW5nZWRCeVVzZXJJZCxcbiAgICAgIHJlYXNvbixcbiAgICAgIGlwQWRkcmVzcyxcbiAgICAgIHVzZXJBZ2VudCxcbiAgICBdKVxuXG4gICAgLy8gQWxzbyBsb2cgaW4gbWFpbiBhdWRpdCBsb2dcbiAgICByZXR1cm4gYXdhaXQgQXVkaXRMb2dnZXIubG9nKHtcbiAgICAgIHVzZXJJZDogY2hhbmdlZEJ5VXNlcklkLFxuICAgICAgdXNlck5hbWU6IGNoYW5nZWRCeU5hbWUsXG4gICAgICB1c2VyUm9sZTogY2hhbmdlZEJ5Um9sZSxcbiAgICAgIGFjdGlvblR5cGU6IFwiQVNTSUdOXCIsXG4gICAgICB0YWJsZU5hbWU6IFwicHJvc3BlY3RzXCIsXG4gICAgICByZWNvcmRJZDogcHJvc3BlY3RJZCxcbiAgICAgIGFjdGlvbkRlc2NyaXB0aW9uOiBgQ2hhbmdlZCBwcm9zcGVjdCBvd25lcnNoaXAgZnJvbSBlbXBsb3llZSAke29sZE93bmVySWR9IHRvIGVtcGxveWVlICR7bmV3T3duZXJJZH0uIFJlYXNvbjogJHtyZWFzb259YCxcbiAgICAgIGJ1c2luZXNzQ29udGV4dDogXCJzYWxlc19waXBlbGluZVwiLFxuICAgICAgc2V2ZXJpdHlMZXZlbDogXCJ3YXJuaW5nXCIsXG4gICAgICBpcEFkZHJlc3MsXG4gICAgICB1c2VyQWdlbnQsXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBsb2dQcm9zcGVjdENvbnZlcnNpb24oXG4gICAgdXNlcklkOiBudW1iZXIsXG4gICAgdXNlck5hbWU6IHN0cmluZyxcbiAgICB1c2VyUm9sZTogc3RyaW5nLFxuICAgIHByb3NwZWN0SWQ6IG51bWJlcixcbiAgICBjbGllbnRJZDogbnVtYmVyLFxuICAgIGNvbnZlcnNpb25WYWx1ZTogbnVtYmVyLFxuICApIHtcbiAgICByZXR1cm4gYXdhaXQgQXVkaXRMb2dnZXIubG9nKHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIHVzZXJOYW1lLFxuICAgICAgdXNlclJvbGUsXG4gICAgICBhY3Rpb25UeXBlOiBcIkNPTlZFUlRcIixcbiAgICAgIHRhYmxlTmFtZTogXCJwcm9zcGVjdHNcIixcbiAgICAgIHJlY29yZElkOiBwcm9zcGVjdElkLFxuICAgICAgYWN0aW9uRGVzY3JpcHRpb246IGBDb252ZXJ0ZWQgcHJvc3BlY3QgJHtwcm9zcGVjdElkfSB0byBjbGllbnQgJHtjbGllbnRJZH0gd2l0aCB2YWx1ZSAkJHtjb252ZXJzaW9uVmFsdWV9YCxcbiAgICAgIG5ld1ZhbHVlczogeyBjbGllbnRfaWQ6IGNsaWVudElkLCBjb252ZXJzaW9uX3ZhbHVlOiBjb252ZXJzaW9uVmFsdWUgfSxcbiAgICAgIGJ1c2luZXNzQ29udGV4dDogXCJzYWxlc19waXBlbGluZVwiLFxuICAgICAgc2V2ZXJpdHlMZXZlbDogXCJpbmZvXCIsXG4gICAgfSlcbiAgfVxuXG4gIC8vIEdldCByZWNlbnQgYWN0aXZpdHkgZm9yIGRhc2hib2FyZFxuICBzdGF0aWMgYXN5bmMgZ2V0UmVjZW50QWN0aXZpdHkobGltaXQgPSA1MCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeShcbiAgICAgICAgYFxuICAgICAgICBTRUxFQ1QgKiBGUk9NIGF1ZGl0X2xvZ3MgXG4gICAgICAgIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQ1xuICAgICAgICBMSU1JVCAkMVxuICAgICAgYCxcbiAgICAgICAgW2xpbWl0XSxcbiAgICAgIClcblxuICAgICAgcmV0dXJuIHJlc3VsdC5yb3dzXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyByZWNlbnQgYWN0aXZpdHk6XCIsIGVycm9yKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1ZGl0TG9nZ2VyXG4iXSwibmFtZXMiOlsicXVlcnkiLCJBdWRpdExvZ2dlciIsImxvZyIsImxvZ0RhdGEiLCJyZXN1bHQiLCJ1c2VySWQiLCJ1c2VyRW1haWwiLCJ1c2VyTmFtZSIsInVzZXJSb2xlIiwiYWN0aW9uVHlwZSIsInRhYmxlTmFtZSIsInJlY29yZElkIiwiYWN0aW9uRGVzY3JpcHRpb24iLCJvbGRWYWx1ZXMiLCJKU09OIiwic3RyaW5naWZ5IiwibmV3VmFsdWVzIiwiY2hhbmdlZEZpZWxkcyIsImlwQWRkcmVzcyIsInVzZXJBZ2VudCIsImJ1c2luZXNzQ29udGV4dCIsInNldmVyaXR5TGV2ZWwiLCJjb25zb2xlIiwicm93cyIsImlkIiwiZXJyb3IiLCJsb2dQcm9zcGVjdENyZWF0aW9uIiwicHJvc3BlY3RJZCIsInByb3NwZWN0RGF0YSIsImJ1c2luZXNzX25hbWUiLCJsb2dQcm9zcGVjdE93bmVyc2hpcENoYW5nZSIsImNoYW5nZWRCeVVzZXJJZCIsImNoYW5nZWRCeU5hbWUiLCJjaGFuZ2VkQnlSb2xlIiwib2xkT3duZXJJZCIsIm5ld093bmVySWQiLCJyZWFzb24iLCJsb2dQcm9zcGVjdENvbnZlcnNpb24iLCJjbGllbnRJZCIsImNvbnZlcnNpb25WYWx1ZSIsImNsaWVudF9pZCIsImNvbnZlcnNpb25fdmFsdWUiLCJnZXRSZWNlbnRBY3Rpdml0eSIsImxpbWl0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/audit-logger.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closePool: () => (/* binding */ closePool),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getClient: () => (/* binding */ getClient),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Determine connection method based on environment\nconst isProduction = \"development\" === \"production\";\nconst isGoogleCloud = process.env.GOOGLE_CLOUD_PROJECT || process.env.FIREBASE_PROJECT_ID;\n// Database connection configuration\nconst dbConfig = (()=>{\n    // Method 1: Unix Socket (for Google Cloud Run/App Engine)\n    if (isProduction && isGoogleCloud) {\n        console.log(\"\\uD83D\\uDD17 Using Unix Socket connection for Google Cloud\");\n        return {\n            host: `/cloudsql/${process.env.FIREBASE_PROJECT_ID}:us-east4:gg-instance`,\n            database: process.env.DB_NAME || \"corp\",\n            user: process.env.DB_USER || \"postgres\",\n            password: process.env.DB_PASSWORD,\n            ssl: false,\n            max: 20,\n            idleTimeoutMillis: 30000,\n            connectionTimeoutMillis: 10000\n        };\n    }\n    // Method 2: Public IP (for local development)\n    console.log(\"\\uD83D\\uDD17 Using Public IP connection for local development\");\n    return {\n        host: process.env.DB_HOST || \"34.86.121.148\",\n        port: Number.parseInt(process.env.DB_PORT || \"5432\"),\n        database: process.env.DB_NAME || \"corp\",\n        user: process.env.DB_USER || \"postgres\",\n        password: process.env.DB_PASSWORD,\n        ssl: {\n            rejectUnauthorized: false\n        },\n        max: 20,\n        idleTimeoutMillis: 30000,\n        connectionTimeoutMillis: 10000\n    };\n})();\n// Create connection pool\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(dbConfig);\n// Handle pool errors\npool.on(\"error\", (err)=>{\n    console.error(\"❌ Unexpected error on idle client\", err);\n    process.exit(-1);\n});\n// Log connection details (without password)\nconsole.log(\"\\uD83D\\uDD27 Database Configuration:\", {\n    host: dbConfig.host,\n    port: dbConfig.port || \"Unix Socket\",\n    database: dbConfig.database,\n    user: dbConfig.user,\n    ssl: !!dbConfig.ssl,\n    environment: \"development\",\n    isGoogleCloud: !!isGoogleCloud\n});\n// Test database connection\nasync function testConnection() {\n    try {\n        console.log(\"\\uD83E\\uDDEA Testing database connection...\");\n        const client = await pool.connect();\n        const result = await client.query(`\n      SELECT \n        NOW() as current_time, \n        version() as postgres_version,\n        current_database() as database_name,\n        current_user as current_user,\n        inet_server_addr() as server_ip\n    `);\n        client.release();\n        const connectionInfo = result.rows[0];\n        console.log(\"✅ Database connected successfully!\");\n        console.log(\"\\uD83D\\uDD50 Current time:\", connectionInfo.current_time);\n        console.log(\"\\uD83D\\uDDC4️ Database:\", connectionInfo.database_name);\n        console.log(\"\\uD83D\\uDC64 User:\", connectionInfo.current_user);\n        console.log(\"\\uD83C\\uDF10 Server IP:\", connectionInfo.server_ip || \"Unix Socket\");\n        console.log(\"\\uD83D\\uDCCA PostgreSQL version:\", connectionInfo.postgres_version);\n        return {\n            success: true,\n            data: connectionInfo\n        };\n    } catch (error) {\n        console.error(\"❌ Database connection failed:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        // Provide helpful error messages\n        if (errorMessage.includes(\"ECONNREFUSED\")) {\n            console.error(\"\\uD83D\\uDCA1 Tip: Make sure your Google Cloud SQL instance is running and accessible\");\n        }\n        if (errorMessage.includes(\"password authentication failed\")) {\n            console.error(\"\\uD83D\\uDCA1 Tip: Check your database username and password\");\n        }\n        if (errorMessage.includes(\"database\") && errorMessage.includes(\"does not exist\")) {\n            console.error(\"\\uD83D\\uDCA1 Tip: Make sure the 'corp' database exists in your instance\");\n        }\n        return {\n            success: false,\n            error: errorMessage\n        };\n    }\n}\n// Execute a query with error handling\nasync function query(text, params) {\n    const start = Date.now();\n    try {\n        console.log(\"\\uD83D\\uDD0D Executing query:\", text.substring(0, 100) + (text.length > 100 ? \"...\" : \"\"));\n        const result = await pool.query(text, params);\n        const duration = Date.now() - start;\n        console.log(`✅ Query executed in ${duration}ms, returned ${result.rowCount} rows`);\n        return result;\n    } catch (error) {\n        const duration = Date.now() - start;\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        console.error(`❌ Query failed after ${duration}ms:`, errorMessage);\n        console.error(\"\\uD83D\\uDCDD Query:\", text.substring(0, 200));\n        console.error(\"\\uD83D\\uDCCB Params:\", params);\n        throw error;\n    }\n}\n// Get a client from the pool for transactions\nasync function getClient() {\n    return await pool.connect();\n}\n// Close the pool (for graceful shutdown)\nasync function closePool() {\n    await pool.end();\n    console.log(\"\\uD83D\\uDD12 Database pool closed\");\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEMsUUFBUXNCLEtBQUssQ0FBQyx1QkFBYXNCLEtBQUtLLFNBQVMsQ0FBQyxHQUFHO1FBQzdDakQsUUFBUXNCLEtBQUssQ0FBQyx3QkFBY3VCO1FBQzVCLE1BQU12QjtJQUNSO0FBQ0Y7QUFFQSw4Q0FBOEM7QUFDdkMsZUFBZStCO0lBQ3BCLE9BQU8sTUFBTWxDLEtBQUtRLE9BQU87QUFDM0I7QUFFQSx5Q0FBeUM7QUFDbEMsZUFBZTJCO0lBQ3BCLE1BQU1uQyxLQUFLb0MsR0FBRztJQUNkdkQsUUFBUUMsR0FBRyxDQUFDO0FBQ2Q7QUFFQSxpRUFBZWtCLElBQUlBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vbGliL2RhdGFiYXNlLnRzPzRkNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9vbCwgdHlwZSBQb29sQ2xpZW50IH0gZnJvbSBcInBnXCJcblxuLy8gRGV0ZXJtaW5lIGNvbm5lY3Rpb24gbWV0aG9kIGJhc2VkIG9uIGVudmlyb25tZW50XG5jb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCJcbmNvbnN0IGlzR29vZ2xlQ2xvdWQgPSBwcm9jZXNzLmVudi5HT09HTEVfQ0xPVURfUFJPSkVDVCB8fCBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUk9KRUNUX0lEXG5cbi8vIERhdGFiYXNlIGNvbm5lY3Rpb24gY29uZmlndXJhdGlvblxuY29uc3QgZGJDb25maWcgPSAoKCkgPT4ge1xuICAvLyBNZXRob2QgMTogVW5peCBTb2NrZXQgKGZvciBHb29nbGUgQ2xvdWQgUnVuL0FwcCBFbmdpbmUpXG4gIGlmIChpc1Byb2R1Y3Rpb24gJiYgaXNHb29nbGVDbG91ZCkge1xuICAgIGNvbnNvbGUubG9nKFwi8J+UlyBVc2luZyBVbml4IFNvY2tldCBjb25uZWN0aW9uIGZvciBHb29nbGUgQ2xvdWRcIilcbiAgICByZXR1cm4ge1xuICAgICAgaG9zdDogYC9jbG91ZHNxbC8ke3Byb2Nlc3MuZW52LkZJUkVCQVNFX1BST0pFQ1RfSUR9OnVzLWVhc3Q0OmdnLWluc3RhbmNlYCxcbiAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8IFwiY29ycFwiLFxuICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCBcInBvc3RncmVzXCIsXG4gICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsXG4gICAgICBzc2w6IGZhbHNlLCAvLyBOb3QgbmVlZGVkIGZvciBVbml4IHNvY2tldFxuICAgICAgbWF4OiAyMCxcbiAgICAgIGlkbGVUaW1lb3V0TWlsbGlzOiAzMDAwMCxcbiAgICAgIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAxMDAwMCxcbiAgICB9XG4gIH1cblxuICAvLyBNZXRob2QgMjogUHVibGljIElQIChmb3IgbG9jYWwgZGV2ZWxvcG1lbnQpXG4gIGNvbnNvbGUubG9nKFwi8J+UlyBVc2luZyBQdWJsaWMgSVAgY29ubmVjdGlvbiBmb3IgbG9jYWwgZGV2ZWxvcG1lbnRcIilcbiAgcmV0dXJuIHtcbiAgICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUIHx8IFwiMzQuODYuMTIxLjE0OFwiLFxuICAgIHBvcnQ6IE51bWJlci5wYXJzZUludChwcm9jZXNzLmVudi5EQl9QT1JUIHx8IFwiNTQzMlwiKSxcbiAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcImNvcnBcIixcbiAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8IFwicG9zdGdyZXNcIixcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQsXG4gICAgc3NsOiB7XG4gICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLCAvLyBSZXF1aXJlZCBmb3IgR29vZ2xlIENsb3VkIFNRTCBwdWJsaWMgSVBcbiAgICB9LFxuICAgIG1heDogMjAsXG4gICAgaWRsZVRpbWVvdXRNaWxsaXM6IDMwMDAwLFxuICAgIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAxMDAwMCxcbiAgfVxufSkoKVxuXG4vLyBDcmVhdGUgY29ubmVjdGlvbiBwb29sXG5jb25zdCBwb29sID0gbmV3IFBvb2woZGJDb25maWcpXG5cbi8vIEhhbmRsZSBwb29sIGVycm9yc1xucG9vbC5vbihcImVycm9yXCIsIChlcnI6IEVycm9yKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoXCLinYwgVW5leHBlY3RlZCBlcnJvciBvbiBpZGxlIGNsaWVudFwiLCBlcnIpXG4gIHByb2Nlc3MuZXhpdCgtMSlcbn0pXG5cbi8vIExvZyBjb25uZWN0aW9uIGRldGFpbHMgKHdpdGhvdXQgcGFzc3dvcmQpXG5jb25zb2xlLmxvZyhcIvCflKcgRGF0YWJhc2UgQ29uZmlndXJhdGlvbjpcIiwge1xuICBob3N0OiBkYkNvbmZpZy5ob3N0LFxuICBwb3J0OiBkYkNvbmZpZy5wb3J0IHx8IFwiVW5peCBTb2NrZXRcIixcbiAgZGF0YWJhc2U6IGRiQ29uZmlnLmRhdGFiYXNlLFxuICB1c2VyOiBkYkNvbmZpZy51c2VyLFxuICBzc2w6ICEhZGJDb25maWcuc3NsLFxuICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXG4gIGlzR29vZ2xlQ2xvdWQ6ICEhaXNHb29nbGVDbG91ZCxcbn0pXG5cbi8vIFRlc3QgZGF0YWJhc2UgY29ubmVjdGlvblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRlc3RDb25uZWN0aW9uKCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwi8J+nqiBUZXN0aW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24uLi5cIilcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICAgIFNFTEVDVCBcbiAgICAgICAgTk9XKCkgYXMgY3VycmVudF90aW1lLCBcbiAgICAgICAgdmVyc2lvbigpIGFzIHBvc3RncmVzX3ZlcnNpb24sXG4gICAgICAgIGN1cnJlbnRfZGF0YWJhc2UoKSBhcyBkYXRhYmFzZV9uYW1lLFxuICAgICAgICBjdXJyZW50X3VzZXIgYXMgY3VycmVudF91c2VyLFxuICAgICAgICBpbmV0X3NlcnZlcl9hZGRyKCkgYXMgc2VydmVyX2lwXG4gICAgYClcblxuICAgIGNsaWVudC5yZWxlYXNlKClcblxuICAgIGNvbnN0IGNvbm5lY3Rpb25JbmZvID0gcmVzdWx0LnJvd3NbMF1cbiAgICBjb25zb2xlLmxvZyhcIuKchSBEYXRhYmFzZSBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5IVwiKVxuICAgIGNvbnNvbGUubG9nKFwi8J+VkCBDdXJyZW50IHRpbWU6XCIsIGNvbm5lY3Rpb25JbmZvLmN1cnJlbnRfdGltZSlcbiAgICBjb25zb2xlLmxvZyhcIvCfl4TvuI8gRGF0YWJhc2U6XCIsIGNvbm5lY3Rpb25JbmZvLmRhdGFiYXNlX25hbWUpXG4gICAgY29uc29sZS5sb2coXCLwn5GkIFVzZXI6XCIsIGNvbm5lY3Rpb25JbmZvLmN1cnJlbnRfdXNlcilcbiAgICBjb25zb2xlLmxvZyhcIvCfjJAgU2VydmVyIElQOlwiLCBjb25uZWN0aW9uSW5mby5zZXJ2ZXJfaXAgfHwgXCJVbml4IFNvY2tldFwiKVxuICAgIGNvbnNvbGUubG9nKFwi8J+TiiBQb3N0Z3JlU1FMIHZlcnNpb246XCIsIGNvbm5lY3Rpb25JbmZvLnBvc3RncmVzX3ZlcnNpb24pXG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBjb25uZWN0aW9uSW5mbyB9XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDpcIiwgZXJyb3IpXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIlxuXG4gICAgLy8gUHJvdmlkZSBoZWxwZnVsIGVycm9yIG1lc3NhZ2VzXG4gICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcIkVDT05OUkVGVVNFRFwiKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIvCfkqEgVGlwOiBNYWtlIHN1cmUgeW91ciBHb29nbGUgQ2xvdWQgU1FMIGluc3RhbmNlIGlzIHJ1bm5pbmcgYW5kIGFjY2Vzc2libGVcIilcbiAgICB9XG4gICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcyhcInBhc3N3b3JkIGF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIvCfkqEgVGlwOiBDaGVjayB5b3VyIGRhdGFiYXNlIHVzZXJuYW1lIGFuZCBwYXNzd29yZFwiKVxuICAgIH1cbiAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiZGF0YWJhc2VcIikgJiYgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKFwiZG9lcyBub3QgZXhpc3RcIikpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLwn5KhIFRpcDogTWFrZSBzdXJlIHRoZSAnY29ycCcgZGF0YWJhc2UgZXhpc3RzIGluIHlvdXIgaW5zdGFuY2VcIilcbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTWVzc2FnZSB9XG4gIH1cbn1cblxuLy8gRXhlY3V0ZSBhIHF1ZXJ5IHdpdGggZXJyb3IgaGFuZGxpbmdcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeSh0ZXh0OiBzdHJpbmcsIHBhcmFtcz86IGFueVtdKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpXG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIvCflI0gRXhlY3V0aW5nIHF1ZXJ5OlwiLCB0ZXh0LnN1YnN0cmluZygwLCAxMDApICsgKHRleHQubGVuZ3RoID4gMTAwID8gXCIuLi5cIiA6IFwiXCIpKVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcG9vbC5xdWVyeSh0ZXh0LCBwYXJhbXMpXG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRcblxuICAgIGNvbnNvbGUubG9nKGDinIUgUXVlcnkgZXhlY3V0ZWQgaW4gJHtkdXJhdGlvbn1tcywgcmV0dXJuZWQgJHtyZXN1bHQucm93Q291bnR9IHJvd3NgKVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3Igb2NjdXJyZWRcIlxuICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBRdWVyeSBmYWlsZWQgYWZ0ZXIgJHtkdXJhdGlvbn1tczpgLCBlcnJvck1lc3NhZ2UpXG4gICAgY29uc29sZS5lcnJvcihcIvCfk50gUXVlcnk6XCIsIHRleHQuc3Vic3RyaW5nKDAsIDIwMCkpXG4gICAgY29uc29sZS5lcnJvcihcIvCfk4sgUGFyYW1zOlwiLCBwYXJhbXMpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vLyBHZXQgYSBjbGllbnQgZnJvbSB0aGUgcG9vbCBmb3IgdHJhbnNhY3Rpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2xpZW50KCk6IFByb21pc2U8UG9vbENsaWVudD4ge1xuICByZXR1cm4gYXdhaXQgcG9vbC5jb25uZWN0KClcbn1cblxuLy8gQ2xvc2UgdGhlIHBvb2wgKGZvciBncmFjZWZ1bCBzaHV0ZG93bilcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZVBvb2woKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHBvb2wuZW5kKClcbiAgY29uc29sZS5sb2coXCLwn5SSIERhdGFiYXNlIHBvb2wgY2xvc2VkXCIpXG59XG5cbmV4cG9ydCBkZWZhdWx0IHBvb2xcbiJdLCJuYW1lcyI6WyJQb29sIiwiaXNQcm9kdWN0aW9uIiwicHJvY2VzcyIsImlzR29vZ2xlQ2xvdWQiLCJlbnYiLCJHT09HTEVfQ0xPVURfUFJPSkVDVCIsIkZJUkVCQVNFX1BST0pFQ1RfSUQiLCJkYkNvbmZpZyIsImNvbnNvbGUiLCJsb2ciLCJob3N0IiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwidXNlciIsIkRCX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwic3NsIiwibWF4IiwiaWRsZVRpbWVvdXRNaWxsaXMiLCJjb25uZWN0aW9uVGltZW91dE1pbGxpcyIsIkRCX0hPU1QiLCJwb3J0IiwiTnVtYmVyIiwicGFyc2VJbnQiLCJEQl9QT1JUIiwicmVqZWN0VW5hdXRob3JpemVkIiwicG9vbCIsIm9uIiwiZXJyIiwiZXJyb3IiLCJleGl0IiwiZW52aXJvbm1lbnQiLCJ0ZXN0Q29ubmVjdGlvbiIsImNsaWVudCIsImNvbm5lY3QiLCJyZXN1bHQiLCJxdWVyeSIsInJlbGVhc2UiLCJjb25uZWN0aW9uSW5mbyIsInJvd3MiLCJjdXJyZW50X3RpbWUiLCJkYXRhYmFzZV9uYW1lIiwiY3VycmVudF91c2VyIiwic2VydmVyX2lwIiwicG9zdGdyZXNfdmVyc2lvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJ0ZXh0IiwicGFyYW1zIiwic3RhcnQiLCJEYXRlIiwibm93Iiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiZHVyYXRpb24iLCJyb3dDb3VudCIsImdldENsaWVudCIsImNsb3NlUG9vbCIsImVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2F%5Bid%5D%2Froute&page=%2Fapi%2Fclients%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2F%5Bid%5D%2Froute.ts&appDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmiguelgiraldo%2FDEVSPACE%2Fdev_gladgrade_portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();