(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3618],{5033:function(e,r,a){Promise.resolve().then(a.bind(a,1778))},1778:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return k}});var s=a(7437),t=a(2265),l=a(6070),n=a(2869),d=a(5186),i=a(6815),c=a(5974),o=a(3647),m=a(1828),u=a(6110),x=a(2339),h=a(91),g=a(9397),b=a(4001),p=a(44),y=a(5805),j=a(3247),v=a(6865),N=a(8906),f=a(7855);function k(){let[e,r]=(0,t.useState)(""),[a,k]=(0,t.useState)("all"),[w,_]=(0,t.useState)(!1),[C,S]=(0,t.useState)(!1),[E,D]=(0,t.useState)(!0),[P,q]=(0,t.useState)([]),[F,Z]=(0,t.useState)([]),[R,Q]=(0,t.useState)(!1),[I,T]=(0,t.useState)(null),[O,z]=(0,t.useState)({id:0,email:"",full_name:"",department_id:"",role:"employee",status:"active",permissions:[]}),[A,L]=(0,t.useState)({email:"",full_name:"",department_id:"",role:"employee",create_firebase_account:!0,temporary_password:""});(0,t.useEffect)(()=>{B()},[]);let B=async()=>{D(!0);try{console.log("\uD83D\uDCCA Loading employees and departments...");let e=await f.x.getEmployees();e.success&&(q(e.data),console.log("✅ Employees loaded:",e.data.length));let r=await f.x.getDepartments();r.success&&(Z(r.data),console.log("✅ Departments loaded:",r.data.length))}catch(e){console.error("❌ Error loading data:",e)}finally{D(!1)}},V=async()=>{if(!A.email||!A.full_name){alert("Email and full name are required");return}try{console.log("\uD83D\uDC64 Creating employee with Firebase account:",A.create_firebase_account);let e=await f.x.createEmployee({email:A.email,full_name:A.full_name,department_id:A.department_id?Number.parseInt(A.department_id):void 0,role:A.role,permissions:["basic_access"],create_firebase_account:A.create_firebase_account,temporary_password:A.temporary_password||void 0});e.success&&(q([...P,e.data]),L({email:"",full_name:"",department_id:"",role:"employee",create_firebase_account:!0,temporary_password:""}),_(!1),e.firebase_account_created?alert("✅ Employee created successfully!\n\n\uD83D\uDD25 Firebase account created\n\uD83D\uDD11 Temporary password: ".concat(e.temporary_password||"Auto-generated","\n\n\uD83D\uDCE7 The employee can now log in with their email and password.")):alert("✅ Employee created successfully in database only (no Firebase account)"),console.log("✅ Employee created:",e.data))}catch(e){console.error("❌ Error creating employee:",e),alert("Failed to create employee. Please try again.")}},M=e=>{var r;T(e),z({id:e.id,email:e.email,full_name:e.full_name,department_id:(null===(r=e.department_id)||void 0===r?void 0:r.toString())||"0",role:e.role,status:e.status,permissions:e.permissions||[]}),Q(!0)},G=async()=>{if(!O.email||!O.full_name){alert("Email and full name are required");return}try{console.log("\uD83D\uDD04 Updating employee:",O.id);let e=await f.x.updateEmployee({id:O.id,email:O.email,full_name:O.full_name,department_id:O.department_id?Number.parseInt(O.department_id):void 0,role:O.role,status:O.status,permissions:O.permissions});if(e.success){let r=P.map(r=>r.id===O.id?e.data:r);q(r),Q(!1),T(null),alert("✅ Employee updated successfully!"),console.log("✅ Employee updated:",e.data)}}catch(e){console.error("❌ Error updating employee:",e),alert("Failed to update employee. Please try again.")}},J=[{value:"verified",label:"Verified",color:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800"},{value:"pending",label:"Pending Verification",color:"bg-yellow-50 dark:bg-yellow-950/20 text-yellow-700 dark:text-yellow-300 border-yellow-200 dark:border-yellow-800"},{value:"flagged",label:"Security Review",color:"bg-red-50 dark:bg-red-950/20 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800"},{value:"suspended",label:"Suspended",color:"bg-gray-50 dark:bg-gray-950/20 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-800"}];return E?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading users from database..."})]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"User Management"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 text-primary"}),(0,s.jsx)("span",{className:"text-sm text-primary",children:"PostgreSQL + Firebase Integration"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(u.Vq,{open:w,onOpenChange:_,children:[(0,s.jsx)(u.hg,{asChild:!0,children:(0,s.jsxs)(n.z,{className:"bg-primary hover:bg-primary-dark text-primary-foreground",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Add Employee"]})}),(0,s.jsxs)(u.cZ,{className:"max-w-md bg-background border-border",children:[(0,s.jsxs)(u.fK,{className:"pb-4",children:[(0,s.jsx)(u.$N,{className:"text-xl font-semibold text-foreground",children:"Create New Employee"}),(0,s.jsx)(u.Be,{className:"text-muted-foreground",children:"Add a new GladGrade team member to PostgreSQL and optionally Firebase"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"emp-name",className:"text-foreground",children:"Full Name"}),(0,s.jsx)(d.I,{id:"emp-name",placeholder:"John Doe",value:A.full_name,onChange:e=>L({...A,full_name:e.target.value}),className:"bg-background text-foreground border-border"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"emp-email",className:"text-foreground",children:"Email"}),(0,s.jsx)(d.I,{id:"emp-email",type:"email",placeholder:"john@gladgrade.com",value:A.email,onChange:e=>L({...A,email:e.target.value}),className:"bg-background text-foreground border-border"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"emp-role",className:"text-foreground",children:"Role"}),(0,s.jsxs)(o.Ph,{value:A.role,onValueChange:e=>L({...A,role:e}),children:[(0,s.jsx)(o.i4,{className:"bg-background text-foreground border-border",children:(0,s.jsx)(o.ki,{placeholder:"Select role"})}),(0,s.jsxs)(o.Bw,{className:"bg-white border-gray-300",children:[(0,s.jsx)(o.Ql,{value:"employee",className:"text-black hover:bg-gray-100",children:"Employee"}),(0,s.jsx)(o.Ql,{value:"moderator",className:"text-black hover:bg-gray-100",children:"Moderator"}),(0,s.jsx)(o.Ql,{value:"admin",className:"text-black hover:bg-gray-100",children:"Admin"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"emp-dept",className:"text-foreground",children:"Department"}),(0,s.jsxs)(o.Ph,{value:A.department_id,onValueChange:e=>L({...A,department_id:e}),children:[(0,s.jsx)(o.i4,{className:"bg-background text-foreground border-border",children:(0,s.jsx)(o.ki,{placeholder:"Select department"})}),(0,s.jsx)(o.Bw,{className:"bg-white border-gray-300",children:F.map(e=>(0,s.jsx)(o.Ql,{value:e.id.toString(),className:"text-black hover:bg-gray-100",children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"border-t border-border pt-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),(0,s.jsx)(i._,{htmlFor:"create-firebase",className:"text-foreground",children:"Create Firebase Account"})]}),(0,s.jsx)(m.r,{id:"create-firebase",checked:A.create_firebase_account,onCheckedChange:e=>L({...A,create_firebase_account:e})})]}),A.create_firebase_account&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"temp-password",className:"text-foreground",children:"Temporary Password (optional)"}),(0,s.jsx)(d.I,{id:"temp-password",type:"password",placeholder:"Leave empty for auto-generated",value:A.temporary_password,onChange:e=>L({...A,temporary_password:e.target.value}),className:"bg-background text-foreground border-border"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"If empty, a secure password will be auto-generated"})]})]})]}),(0,s.jsxs)(u.cN,{className:"pt-4 border-t border-border",children:[(0,s.jsx)(n.z,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),(0,s.jsx)(n.z,{onClick:V,className:"bg-primary hover:bg-primary-dark text-primary-foreground",disabled:!A.email||!A.full_name,children:"Create Employee"})]})]})]}),(0,s.jsx)(u.Vq,{open:R,onOpenChange:Q,children:(0,s.jsxs)(u.cZ,{className:"max-w-md bg-background border-border",children:[(0,s.jsxs)(u.fK,{className:"pb-4",children:[(0,s.jsx)(u.$N,{className:"text-xl font-semibold text-foreground",children:"Edit Employee"}),(0,s.jsx)(u.Be,{className:"text-muted-foreground",children:"Update employee information in PostgreSQL and Firebase"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"edit-emp-name",className:"text-foreground",children:"Full Name"}),(0,s.jsx)(d.I,{id:"edit-emp-name",value:O.full_name,onChange:e=>z({...O,full_name:e.target.value}),className:"bg-background text-foreground border-border"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"edit-emp-email",className:"text-foreground",children:"Email"}),(0,s.jsx)(d.I,{id:"edit-emp-email",type:"email",value:O.email,onChange:e=>z({...O,email:e.target.value}),className:"bg-background text-foreground border-border"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"edit-emp-role",className:"text-foreground",children:"Role"}),(0,s.jsxs)(o.Ph,{value:O.role,onValueChange:e=>z({...O,role:e}),children:[(0,s.jsx)(o.i4,{className:"bg-background text-foreground border-border",children:(0,s.jsx)(o.ki,{placeholder:"Select role"})}),(0,s.jsxs)(o.Bw,{className:"bg-white border-gray-300",children:[(0,s.jsx)(o.Ql,{value:"employee",className:"text-black hover:bg-gray-100",children:"Employee"}),(0,s.jsx)(o.Ql,{value:"moderator",className:"text-black hover:bg-gray-100",children:"Moderator"}),(0,s.jsx)(o.Ql,{value:"admin",className:"text-black hover:bg-gray-100",children:"Admin"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"edit-emp-status",className:"text-foreground",children:"Status"}),(0,s.jsxs)(o.Ph,{value:O.status,onValueChange:e=>z({...O,status:e}),children:[(0,s.jsx)(o.i4,{className:"bg-background text-foreground border-border",children:(0,s.jsx)(o.ki,{placeholder:"Select status"})}),(0,s.jsxs)(o.Bw,{className:"bg-white border-gray-300",children:[(0,s.jsx)(o.Ql,{value:"active",className:"text-black hover:bg-gray-100",children:"Active"}),(0,s.jsx)(o.Ql,{value:"inactive",className:"text-black hover:bg-gray-100",children:"Inactive"}),(0,s.jsx)(o.Ql,{value:"suspended",className:"text-black hover:bg-gray-100",children:"Suspended"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"edit-emp-dept",className:"text-foreground",children:"Department"}),(0,s.jsxs)(o.Ph,{value:O.department_id,onValueChange:e=>z({...O,department_id:e}),children:[(0,s.jsx)(o.i4,{className:"bg-background text-foreground border-border",children:(0,s.jsx)(o.ki,{placeholder:"Select department"})}),(0,s.jsxs)(o.Bw,{className:"bg-white border-gray-300",children:[(0,s.jsx)(o.Ql,{value:"0",className:"text-black hover:bg-gray-100",children:"No Department"}),F.map(e=>(0,s.jsx)(o.Ql,{value:e.id.toString(),className:"text-black hover:bg-gray-100",children:e.name},e.id))]})]})]}),(null==I?void 0:I.firebase_uid)&&(0,s.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-orange-600 dark:text-orange-400",children:[(0,s.jsx)(b.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Firebase Account: ",I.firebase_uid.substring(0,20),"..."]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Changes will be synced to Firebase Authentication"})]})]}),(0,s.jsxs)(u.cN,{className:"pt-4 border-t border-border",children:[(0,s.jsx)(n.z,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),(0,s.jsx)(n.z,{onClick:G,className:"bg-primary hover:bg-primary-dark text-primary-foreground",disabled:!O.email||!O.full_name,children:"Save Changes"})]})]})}),(0,s.jsxs)(u.Vq,{open:C,onOpenChange:S,children:[(0,s.jsx)(u.hg,{asChild:!0,children:(0,s.jsxs)(n.z,{variant:"outline",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Add Client"]})}),(0,s.jsxs)(u.cZ,{className:"max-w-md bg-background border-border",children:[(0,s.jsxs)(u.fK,{className:"pb-4",children:[(0,s.jsx)(u.$N,{className:"text-xl font-semibold text-foreground",children:"Register New Client"}),(0,s.jsx)(u.Be,{className:"text-muted-foreground",children:"Add a new business to the GladGrade platform"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"biz-name",className:"text-foreground",children:"Business Name"}),(0,s.jsx)(d.I,{id:"biz-name",placeholder:"Amazing Restaurant",className:"bg-background text-foreground border-border"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"contact-name",className:"text-foreground",children:"Contact Person"}),(0,s.jsx)(d.I,{id:"contact-name",placeholder:"Jane Smith",className:"bg-background text-foreground border-border"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"biz-email",className:"text-foreground",children:"Business Email"}),(0,s.jsx)(d.I,{id:"biz-email",type:"email",placeholder:"jane@amazing-restaurant.com",className:"bg-background text-foreground border-border"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"security-level",className:"text-foreground",children:"Security Level"}),(0,s.jsxs)(o.Ph,{children:[(0,s.jsx)(o.i4,{className:"bg-background text-foreground border-border",children:(0,s.jsx)(o.ki,{placeholder:"Set security level"})}),(0,s.jsxs)(o.Bw,{className:"bg-white border-gray-300",children:[(0,s.jsx)(o.Ql,{value:"pending",className:"text-black hover:bg-gray-100",children:"Pending Verification"}),(0,s.jsx)(o.Ql,{value:"verified",className:"text-black hover:bg-gray-100",children:"Verified"}),(0,s.jsx)(o.Ql,{value:"flagged",className:"text-black hover:bg-gray-100",children:"Security Review Required"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"locations",className:"text-foreground",children:"Number of Locations"}),(0,s.jsx)(d.I,{id:"locations",type:"number",placeholder:"1",className:"bg-background text-foreground border-border"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(i._,{htmlFor:"industry",className:"text-foreground",children:"Industry Category"}),(0,s.jsxs)(o.Ph,{children:[(0,s.jsx)(o.i4,{className:"bg-background text-foreground border-border",children:(0,s.jsx)(o.ki,{placeholder:"Select industry"})}),(0,s.jsxs)(o.Bw,{className:"bg-white border-gray-300",children:[(0,s.jsx)(o.Ql,{value:"restaurant",className:"text-black hover:bg-gray-100",children:"Restaurant & Food"}),(0,s.jsx)(o.Ql,{value:"retail",className:"text-black hover:bg-gray-100",children:"Retail"}),(0,s.jsx)(o.Ql,{value:"healthcare",className:"text-black hover:bg-gray-100",children:"Healthcare"}),(0,s.jsx)(o.Ql,{value:"education",className:"text-black hover:bg-gray-100",children:"Education"}),(0,s.jsx)(o.Ql,{value:"entertainment",className:"text-black hover:bg-gray-100",children:"Entertainment"}),(0,s.jsx)(o.Ql,{value:"services",className:"text-black hover:bg-gray-100",children:"Professional Services"})]})]})]})]}),(0,s.jsxs)(u.cN,{className:"pt-4 border-t border-border",children:[(0,s.jsx)(n.z,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),(0,s.jsx)(n.z,{className:"bg-primary hover:bg-primary-dark text-primary-foreground",children:"Register Client"})]})]})]})]})]}),(0,s.jsxs)(x.mQ,{defaultValue:"employees",className:"space-y-6",children:[(0,s.jsxs)(x.dr,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(x.SP,{value:"employees",className:"flex items-center gap-2",children:[(0,s.jsx)(y.Z,{className:"h-4 w-4"}),"Employees (",P.length,")"]}),(0,s.jsxs)(x.SP,{value:"clients",className:"flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4"}),"Clients"]})]}),(0,s.jsx)(x.nU,{value:"employees",className:"space-y-6",children:(0,s.jsxs)(l.Zb,{className:"border-border",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsxs)(l.ll,{className:"flex items-center gap-2 text-foreground",children:[(0,s.jsx)(y.Z,{className:"h-5 w-5"}),"GladGrade Team Members",(0,s.jsxs)(c.C,{className:"bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800 ml-2",children:[(0,s.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),"PostgreSQL + Firebase"]})]})}),(0,s.jsxs)(l.aY,{children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,s.jsx)(d.I,{placeholder:"Search employees...",value:e,onChange:e=>r(e.target.value),className:"pl-10 bg-background text-foreground border-border"})]})}),(0,s.jsxs)(o.Ph,{value:a,onValueChange:k,children:[(0,s.jsx)(o.i4,{className:"w-48 bg-background text-foreground border-border",children:(0,s.jsx)(o.ki,{placeholder:"Filter by role"})}),(0,s.jsxs)(o.Bw,{className:"bg-white border-gray-300",children:[(0,s.jsx)(o.Ql,{value:"all",className:"text-black hover:bg-gray-100",children:"All Roles"}),(0,s.jsx)(o.Ql,{value:"admin",className:"text-black hover:bg-gray-100",children:"Admin"}),(0,s.jsx)(o.Ql,{value:"moderator",className:"text-black hover:bg-gray-100",children:"Moderator"}),(0,s.jsx)(o.Ql,{value:"employee",className:"text-black hover:bg-gray-100",children:"Employee"})]})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:P.map(e=>{var r;return(0,s.jsxs)("div",{className:"border border-border rounded-lg p-4 hover:bg-muted/30",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-primary font-semibold",children:e.full_name.split(" ").map(e=>e[0]).join("")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:e.full_name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.department_name||"No Department"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)("span",{className:"text-xs text-primary",children:["ID: ",e.id]}),e.firebase_uid&&(0,s.jsxs)(c.C,{variant:"outline",className:"text-xs bg-orange-50 dark:bg-orange-950/20 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:[(0,s.jsx)(b.Z,{className:"h-3 w-3 mr-1"}),"Firebase"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(c.C,{variant:"admin"===e.role?"destructive":"secondary",className:"admin"===e.role?"bg-red-50 dark:bg-red-950/20 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800":"moderator"===e.role?"bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800":"bg-gray-50 dark:bg-gray-950/20 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-800",children:e.role}),(0,s.jsx)(c.C,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800",children:e.status}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e.last_login?"Last: ".concat(new Date(e.last_login).toLocaleDateString()):"Never logged in"}),(0,s.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>M(e),children:"Edit"})]})]}),(0,s.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:null===(r=e.permissions)||void 0===r?void 0:r.map(e=>(0,s.jsx)(c.C,{variant:"outline",className:"text-xs border-border",children:e.replace("_"," ")},e))})]},e.id)})})]})]})}),(0,s.jsx)(x.nU,{value:"clients",className:"space-y-6",children:(0,s.jsxs)(l.Zb,{className:"border-border",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsxs)(l.ll,{className:"flex items-center gap-2 text-foreground",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5"}),"Business Clients"]})}),(0,s.jsxs)(l.aY,{children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,s.jsx)(d.I,{placeholder:"Search businesses...",className:"pl-10 bg-background text-foreground border-border"})]})}),(0,s.jsxs)(o.Ph,{children:[(0,s.jsx)(o.i4,{className:"w-48 bg-background text-foreground border-border",children:(0,s.jsx)(o.ki,{placeholder:"Filter by security"})}),(0,s.jsxs)(o.Bw,{className:"bg-white border-gray-300",children:[(0,s.jsx)(o.Ql,{value:"all",className:"text-black hover:bg-gray-100",children:"All Security Levels"}),(0,s.jsx)(o.Ql,{value:"verified",className:"text-black hover:bg-gray-100",children:"Verified"}),(0,s.jsx)(o.Ql,{value:"pending",className:"text-black hover:bg-gray-100",children:"Pending"}),(0,s.jsx)(o.Ql,{value:"flagged",className:"text-black hover:bg-gray-100",children:"Flagged"})]})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:[{id:1,businessName:"Miami Beach Restaurant",contactName:"Carlos Martinez",email:"carlos@miamibeach.com",securityLevel:"verified",gcsgScore:785,status:"active",joinDate:"2024-01-15",locations:3,monthlyReviews:45},{id:2,businessName:"Downtown Coffee Shop",contactName:"Emma Wilson",email:"emma@downtowncoffee.com",securityLevel:"pending",gcsgScore:692,status:"pending_verification",joinDate:"2024-06-10",locations:1,monthlyReviews:12}].map(e=>{var r,a;return(0,s.jsx)("div",{className:"border border-border rounded-lg p-4 hover:bg-muted/30",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary/20 rounded-lg flex items-center justify-center",children:(0,s.jsx)(p.Z,{className:"h-6 w-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:e.businessName}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.contactName," • ",e.email]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.locations," location",e.locations>1?"s":""," • Joined"," ",new Date(e.joinDate).toLocaleDateString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:e.gcsgScore}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"GCSG Score"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-lg font-semibold text-foreground",children:e.monthlyReviews}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Reviews/month"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)(c.C,{className:(null===(r=J.find(r=>r.value===e.securityLevel))||void 0===r?void 0:r.color)||"bg-gray-50 dark:bg-gray-950/20 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-800",children:["flagged"===e.securityLevel&&(0,s.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),"verified"===e.securityLevel&&(0,s.jsx)(N.Z,{className:"h-3 w-3 mr-1"}),null===(a=J.find(r=>r.value===e.securityLevel))||void 0===a?void 0:a.label]}),(0,s.jsx)(n.z,{variant:"outline",size:"sm",children:"Manage"})]})]})]})},e.id)})})]})]})})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-4",children:[(0,s.jsx)(l.Zb,{className:"border-border",children:(0,s.jsx)(l.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(y.Z,{className:"h-5 w-5 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:P.length}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Employees"})]})]})})}),(0,s.jsx)(l.Zb,{className:"border-border",children:(0,s.jsx)(l.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:P.filter(e=>e.firebase_uid).length}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Firebase Accounts"})]})]})})}),(0,s.jsx)(l.Zb,{className:"border-border",children:(0,s.jsx)(l.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:"247"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Active Clients"})]})]})})}),(0,s.jsx)(l.Zb,{className:"border-border",children:(0,s.jsx)(l.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N.Z,{className:"h-5 w-5 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:"189"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Verified Businesses"})]})]})})})]})]})}},7855:function(e,r,a){"use strict";a.d(r,{x:function(){return l}});var s=a(3301);class t{async request(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.startsWith("http")?e:"/api".concat(e),s={headers:{"Content-Type":"application/json",...r.headers},...r};console.log("\uD83C\uDF10 API Request: ".concat(r.method||"GET"," ").concat(a));try{let e=await fetch(a,s),r=await e.json();if(!e.ok)throw Error(r.error||"HTTP error! status: ".concat(e.status));return console.log("✅ API Response: ".concat(a),r),r}catch(e){throw console.error("❌ API Error: ".concat(a),e),e}}async getAuthToken(){try{let e=(0,s.v0)().currentUser;if(e)return await e.getIdToken();throw Error("No authenticated user")}catch(e){throw console.error("Error getting auth token:",e),e}}async gcRequest(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=e.startsWith("http")?e:"/api/gcloud-proxy".concat(e),s={headers:{"Content-Type":"application/json",...r.headers},...r};console.log("\uD83C\uDF10 GC Proxy Request: ".concat(r.method||"GET"," ").concat(a));let t=await fetch(a,s),l=await t.json();if(!t.ok)throw Error(l.error||"HTTP error! status: ".concat(t.status));return console.log("✅ GC Proxy Response: ".concat(a),l),l}catch(r){throw console.error("❌ GC Proxy Error: ".concat(e),r),r}}async getDepartments(){return this.request("/settings/departments")}async createDepartment(e){return this.request("/settings/departments",{method:"POST",body:JSON.stringify(e)})}async updateDepartment(e){return this.request("/settings/departments",{method:"PUT",body:JSON.stringify(e)})}async deleteDepartment(e){return this.request("/settings/departments?id=".concat(e),{method:"DELETE"})}async getEmployees(){return this.request("/employees")}async createEmployee(e){return this.request("/employees",{method:"POST",body:JSON.stringify(e)})}async updateEmployee(e){return this.request("/employees",{method:"PUT",body:JSON.stringify(e)})}async deleteEmployee(e){return this.request("/employees?id=".concat(e),{method:"DELETE"})}async getClients(){return this.request("/clients")}async createClient(e){return this.request("/clients",{method:"POST",body:JSON.stringify(e)})}async getIndustryCategories(){return this.request("/industry-categories")}async getOrganizationSettings(){return this.request("/settings/organization")}async updateOrganizationSettings(e){return this.request("/settings/organization",{method:"PUT",body:JSON.stringify(e)})}async getNotificationSettings(e){return this.request("/settings/notifications?userId=".concat(e))}async updateNotificationSettings(e,r){return this.request("/settings/notifications",{method:"PUT",body:JSON.stringify({userId:e,...r})})}async searchPlaces(e,r){let a=new URLSearchParams({query:e});return r&&a.append("location",r),this.request("/clients/search-places?".concat(a.toString()))}async getReviewCount(e){return this.gcRequest("/reviews/review-count?placeId=".concat(e.placeId))}async getBulkReviewCounts(e){return this.gcRequest("/reviews/review-counts-bulk",{method:"POST",body:JSON.stringify(e)})}async queryReviews(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gcRequest("/consumerReviews/query",{method:"POST",body:JSON.stringify(e)})}async getReviewImages(e){return this.gcRequest("/reviews/images/".concat(e))}async moderateReview(e,r,a){return this.gcRequest("/reviews/moderate",{method:"POST",body:JSON.stringify({reviewId:e,action:r,notes:a})})}constructor(){this.reviews={getCount:this.getReviewCount.bind(this),getBulkCounts:this.getBulkReviewCounts.bind(this),query:this.queryReviews.bind(this),getImages:this.getReviewImages.bind(this),moderate:this.moderateReview.bind(this)},this.baseUrl="http://localhost:3000"}}let l=new t},91:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});let s=(0,a(9205).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},4001:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});let s=(0,a(9205).Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},9397:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});let s=(0,a(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});let s=(0,a(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5805:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});let s=(0,a(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[139,6137,1709,3301,3774,7005,600,4266,7033,4048,1626,2971,2117,1744],function(){return e(e.s=5033)}),_N_E=e.O()}]);