(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6591],{7427:function(e,s,a){Promise.resolve().then(a.bind(a,751))},751:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return X}});var t=a(7437),r=a(2265),l=a(6070),n=a(2869),o=a(5974),i=a(1828),c=a(6815),d=a(5186),u=a(3647),m=a(9205);let x=(0,m.Z)("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),g=(0,m.Z)("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);var h=a(5868),b=a(9397);let p=(0,m.Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),v=(0,m.Z)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);var f=a(5805);let j=(0,m.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var y=a(525);let N=(0,m.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var _=a(3247),w=a(2489),k=a(740),C=a(6110),D=a(6818),S=a(3774),Z=a(6595),M=a(5800),A=a(7855);let I=[{value:"AL",label:"Alabama"},{value:"AK",label:"Alaska"},{value:"AZ",label:"Arizona"},{value:"AR",label:"Arkansas"},{value:"CA",label:"California"},{value:"CO",label:"Colorado"},{value:"CT",label:"Connecticut"},{value:"DE",label:"Delaware"},{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"HI",label:"Hawaii"},{value:"ID",label:"Idaho"},{value:"IL",label:"Illinois"},{value:"IN",label:"Indiana"},{value:"IA",label:"Iowa"},{value:"KS",label:"Kansas"},{value:"KY",label:"Kentucky"},{value:"LA",label:"Louisiana"},{value:"ME",label:"Maine"},{value:"MD",label:"Maryland"},{value:"MA",label:"Massachusetts"},{value:"MI",label:"Michigan"},{value:"MN",label:"Minnesota"},{value:"MS",label:"Mississippi"},{value:"MO",label:"Missouri"},{value:"MT",label:"Montana"},{value:"NE",label:"Nebraska"},{value:"NV",label:"Nevada"},{value:"NH",label:"New Hampshire"},{value:"NJ",label:"New Jersey"},{value:"NM",label:"New Mexico"},{value:"NY",label:"New York"},{value:"NC",label:"North Carolina"},{value:"ND",label:"North Dakota"},{value:"OH",label:"Ohio"},{value:"OK",label:"Oklahoma"},{value:"OR",label:"Oregon"},{value:"PA",label:"Pennsylvania"},{value:"RI",label:"Rhode Island"},{value:"SC",label:"South Carolina"},{value:"SD",label:"South Dakota"},{value:"TN",label:"Tennessee"},{value:"TX",label:"Texas"},{value:"UT",label:"Utah"},{value:"VT",label:"Vermont"},{value:"VA",label:"Virginia"},{value:"WA",label:"Washington"},{value:"WV",label:"West Virginia"},{value:"WI",label:"Wisconsin"},{value:"WY",label:"Wyoming"},{value:"DC",label:"District of Columbia"}];function P(e,s){let a=e.replace(/[^A-Za-z0-9]/g,"");switch(s){case"US":if(5===a.length)return a;if(9===a.length)return"".concat(a.slice(0,5),"-").concat(a.slice(5));return e;case"CA":if(6===a.length)return"".concat(a.slice(0,3)," ").concat(a.slice(3)).toUpperCase();return e.toUpperCase();case"MX":case"ES":case"IT":if(5===a.length)return a;return e;default:return e}}function F(e){let{trigger:s,onProspectCreated:a}=e,{user:o}=(0,M.a)(),[i,m]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[v,f]=(0,r.useState)(""),[j,y]=(0,r.useState)([]),[N,w]=(0,r.useState)(null),[k,F]=(0,r.useState)(!0),[z,E]=(0,r.useState)(null),[O,Q]=(0,r.useState)(""),[V,L]=(0,r.useState)({business_name:"",contact_name:"",contact_email:"",phone:"",street_address:"",city:"",state:"",zip_code:"",country:"US",formatted_address:"",website:"",business_type:"",estimated_value:"",priority:"medium",notes:"",place_id:""});(0,r.useEffect)(()=>{navigator.geolocation?(console.log("\uD83C\uDF0D Getting user location..."),navigator.geolocation.getCurrentPosition(e=>{let{latitude:s,longitude:a}=e.coords;E({lat:s,lng:a}),console.log("\uD83D\uDCCD User location: ".concat(s,", ").concat(a))},e=>{console.warn("⚠️ Geolocation failed:",e.message),Q("Could not get your location. Using default search area."),E({lat:25.7617,lng:-80.1918})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})):(console.warn("⚠️ Geolocation not supported"),Q("Location services not available. Using default search area."),E({lat:25.7617,lng:-80.1918}))},[]);let R=async()=>{if(v.trim()){if(!z){alert("Please wait while we detect your location...");return}p(!0);try{console.log("\uD83D\uDD0D Searching places via apiClient with user location...");let e="".concat(z.lat,",").concat(z.lng),s=await A.x.searchPlaces(v,e);console.log("✅ Places search results:",s),s.success?y(s.data||[]):(console.error("Search failed:",s.error),y([]))}catch(e){console.error("Search error:",e),y([])}finally{p(!1)}}},U=e=>{w(e);let s=function(e){let s={street_address:"",city:"",state:"",zip_code:"",country:"US"};if(e.address_components){let a="",t="",r="",l="";e.address_components.forEach(e=>{let n=e.types;n.includes("street_number")&&(a=e.long_name),n.includes("route")&&(t=e.long_name),n.includes("subpremise")&&(r=e.long_name),n.includes("premise")&&(l=e.long_name),n.includes("locality")&&(s.city=e.long_name),n.includes("administrative_area_level_1")&&(s.state=e.short_name),n.includes("postal_code")&&(s.zip_code=e.long_name),n.includes("country")&&(s.country=e.short_name)});let n=[];a&&t?n.push("".concat(a," ").concat(t)):t&&n.push(t),l&&n.push(l),r&&(r.toLowerCase().includes("suite")||r.toLowerCase().includes("apt")||r.toLowerCase().includes("unit")||r.toLowerCase().includes("#")||(r=/^\d+$/.test(r)&&parseInt(r)>50?"Suite ".concat(r):/^\d+[A-Za-z]$/.test(r)||50>=parseInt(r)?"Apt ".concat(r):"Unit ".concat(r)),n.push(r)),s.street_address=n.join(", ")}return s}(e);L(a=>({...a,business_name:e.name,place_id:e.place_id,formatted_address:e.formatted_address,street_address:s.street_address,city:s.city,state:s.state,zip_code:s.zip_code,country:s.country})),F(!1)},T=()=>{L({business_name:"",contact_name:"",contact_email:"",phone:"",street_address:"",city:"",state:"",zip_code:"",country:"US",formatted_address:"",website:"",business_type:"",estimated_value:"",priority:"medium",notes:"",place_id:""}),w(null),f(""),y([]),F(!0)},B=async e=>{var s,t,r,l,n,o,i,c,d;if(e.preventDefault(),console.log("\uD83D\uDD0D Form data before validation:",V),!(null===(s=V.business_name)||void 0===s?void 0:s.trim())){alert("Business name is required");return}g(!0);try{let e=P(V.zip_code,V.country);console.log("\uD83D\uDD0D Creating prospect via apiClient...");let s={business_name:V.business_name.trim(),contact_name:(null===(t=V.contact_name)||void 0===t?void 0:t.trim())||"",contact_email:(null===(r=V.contact_email)||void 0===r?void 0:r.trim())||"",phone:(null===(l=V.phone)||void 0===l?void 0:l.trim())||"",website:(null===(n=V.website)||void 0===n?void 0:n.trim())||"",street_address:(null===(o=V.street_address)||void 0===o?void 0:o.trim())||"",city:(null===(i=V.city)||void 0===i?void 0:i.trim())||"",state:V.state||"",zip_code:e||"",country:V.country||"US",formatted_address:V.formatted_address||"".concat(V.street_address,", ").concat(V.city,", ").concat(V.state," ").concat(e),business_type:(null===(c=V.business_type)||void 0===c?void 0:c.trim())||"",estimated_value:Number.parseFloat(V.estimated_value)||0,priority:V.priority||"medium",notes:(null===(d=V.notes)||void 0===d?void 0:d.trim())||"",place_id:V.place_id||"",lead_source:"manual"};console.log("\uD83C\uDFAF Prospect data being sent:",s);let u=await A.x.createProspect(s);console.log("✅ Prospect created successfully:",u),m(!1),T(),null==a||a()}catch(e){console.error("❌ Error creating prospect:",e),alert("Error creating prospect: "+(e instanceof Error?e.message:String(e)))}finally{g(!1)}},q=(e,s)=>{L(a=>({...a,[e]:s}))},Y=e=>{let s=P(e,V.country);L(e=>({...e,zip_code:s}))};return(0,t.jsxs)(C.Vq,{open:i,onOpenChange:e=>{m(e),e||T()},children:[(0,t.jsx)(C.hg,{asChild:!0,children:s||(0,t.jsxs)(n.z,{children:[(0,t.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"New Prospect"]})}),(0,t.jsxs)(C.cZ,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto bg-background text-foreground border-border",children:[(0,t.jsxs)(C.fK,{children:[(0,t.jsx)(C.$N,{className:"text-foreground",children:"Add New Prospect"}),(0,t.jsx)(C.Be,{className:"text-muted-foreground",children:"Search for a business or enter details manually to create a new sales prospect."})]}),k?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(d.I,{placeholder:"Search for business (e.g., 'Miami Beach Restaurant')",value:v,onChange:e=>f(e.target.value),onKeyPress:e=>"Enter"===e.key&&R(),className:"bg-background text-foreground border-border"}),(0,t.jsxs)(n.z,{onClick:R,disabled:h,children:[(0,t.jsx)(_.Z,{className:"h-4 w-4"}),h?"Searching...":"Search"]})]}),j.length>0&&(0,t.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(0,t.jsx)(c._,{className:"text-foreground",children:"Search Results:"}),j.map(e=>(0,t.jsx)(l.Zb,{className:"cursor-pointer hover:bg-muted/50 transition-colors border-border",onClick:()=>U(e),children:(0,t.jsx)(l.aY,{className:"p-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground mt-1",children:[(0,t.jsx)(S.Z,{className:"h-3 w-3 mr-1"}),e.formatted_address]}),e.rating&&(0,t.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground mt-1",children:[(0,t.jsx)(Z.Z,{className:"h-3 w-3 mr-1 fill-yellow-400 text-yellow-400"}),e.rating," (",e.user_ratings_total," reviews)"]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:e.types.slice(0,3).join(", ")})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.business_status})]})})},e.place_id))]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(n.z,{variant:"outline",onClick:()=>{F(!1),w(null),L(e=>({...e,place_id:""}))},children:"Enter Business Details Manually"})})]}):(0,t.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[N&&(0,t.jsx)(l.Zb,{className:"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",children:(0,t.jsx)(l.aY,{className:"p-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-green-800 dark:text-green-300",children:"Selected Business:"}),(0,t.jsx)("p",{className:"text-green-700 dark:text-green-400",children:N.name}),(0,t.jsx)("p",{className:"text-sm text-green-600 dark:text-green-500",children:N.formatted_address})]}),(0,t.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>F(!0),children:"Change"})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"business_name",className:"text-foreground",children:"Business Name *"}),(0,t.jsx)(d.I,{id:"business_name",value:V.business_name,onChange:e=>q("business_name",e.target.value),required:!0,className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"contact_name",className:"text-foreground",children:"Contact Name"}),(0,t.jsx)(d.I,{id:"contact_name",value:V.contact_name,onChange:e=>q("contact_name",e.target.value),placeholder:"Optional - can be added later",className:"bg-background text-foreground border-border"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"contact_email",className:"text-foreground",children:"Contact Email"}),(0,t.jsx)(d.I,{id:"contact_email",type:"email",value:V.contact_email,onChange:e=>q("contact_email",e.target.value),placeholder:"Optional - can be added later",className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"phone",className:"text-foreground",children:"Phone"}),(0,t.jsx)(d.I,{id:"phone",value:V.phone,onChange:e=>q("phone",e.target.value),placeholder:"Optional",className:"bg-background text-foreground border-border"})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t border-border pt-4",children:[(0,t.jsx)("h3",{className:"font-medium text-foreground",children:"Address Information"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"street_address",className:"text-foreground",children:"Street Address"}),(0,t.jsx)(d.I,{id:"street_address",value:V.street_address,onChange:e=>q("street_address",e.target.value),placeholder:"123 Main Street",className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"city",className:"text-foreground",children:"City"}),(0,t.jsx)(d.I,{id:"city",value:V.city,onChange:e=>q("city",e.target.value),placeholder:"Miami",className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"state",className:"text-foreground",children:"State"}),(0,t.jsxs)(u.Ph,{value:V.state,onValueChange:e=>q("state",e),children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{placeholder:"Select state"})}),(0,t.jsx)(u.Bw,{className:"bg-white border-gray-300",children:I.map(e=>(0,t.jsx)(u.Ql,{value:e.value,className:"text-black hover:bg-gray-100",children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"zip_code",className:"text-foreground",children:"ZIP Code"}),(0,t.jsx)(d.I,{id:"zip_code",value:V.zip_code,onChange:e=>Y(e.target.value),placeholder:"33101 or 33101-1234",className:"bg-background text-foreground border-border"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"country",className:"text-foreground",children:"Country"}),(0,t.jsxs)(u.Ph,{value:V.country,onValueChange:e=>q("country",e),children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{})}),(0,t.jsxs)(u.Bw,{className:"bg-white border-gray-300",children:[(0,t.jsx)(u.Ql,{value:"US",className:"text-black hover:bg-gray-100",children:"United States"}),(0,t.jsx)(u.Ql,{value:"CA",className:"text-black hover:bg-gray-100",children:"Canada"}),(0,t.jsx)(u.Ql,{value:"MX",className:"text-black hover:bg-gray-100",children:"Mexico"}),(0,t.jsx)(u.Ql,{value:"ES",className:"text-black hover:bg-gray-100",children:"Spain"}),(0,t.jsx)(u.Ql,{value:"IT",className:"text-black hover:bg-gray-100",children:"Italy"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"website",className:"text-foreground",children:"Website"}),(0,t.jsx)(d.I,{id:"website",value:V.website,onChange:e=>q("website",e.target.value),className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"estimated_value",className:"text-foreground",children:"Estimated Value ($)"}),(0,t.jsx)(d.I,{id:"estimated_value",type:"number",value:V.estimated_value,onChange:e=>q("estimated_value",e.target.value),className:"bg-background text-foreground border-border"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"priority",className:"text-foreground",children:"Priority"}),(0,t.jsxs)(u.Ph,{value:V.priority,onValueChange:e=>q("priority",e),children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{})}),(0,t.jsxs)(u.Bw,{className:"bg-white border-gray-300",children:[(0,t.jsx)(u.Ql,{value:"low",className:"text-black hover:bg-gray-100",children:"Low"}),(0,t.jsx)(u.Ql,{value:"medium",className:"text-black hover:bg-gray-100",children:"Medium"}),(0,t.jsx)(u.Ql,{value:"high",className:"text-black hover:bg-gray-100",children:"High"}),(0,t.jsx)(u.Ql,{value:"urgent",className:"text-black hover:bg-gray-100",children:"Urgent"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"notes",className:"text-foreground",children:"Notes"}),(0,t.jsx)(D.g,{id:"notes",value:V.notes,onChange:e=>q("notes",e.target.value),rows:3,className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)(C.cN,{children:[(0,t.jsx)(n.z,{type:"button",variant:"outline",onClick:()=>F(!0),children:"Back to Search"}),(0,t.jsx)(n.z,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,t.jsx)(n.z,{type:"submit",disabled:x,children:x?"Creating...":"Create Prospect"})]})]})]})]})}var z=a(2369),E=a(9322),O=a(1671),Q=a(1817);function V(e){var s;let{isOpen:a,onClose:l,prospect:o,onSuccess:i}=e,[m,x]=(0,r.useState)(!1),[g,h]=(0,r.useState)(null),[b,p]=(0,r.useState)(null),[v,f]=(0,r.useState)({conversion_value:(null==o?void 0:null===(s=o.estimated_value)||void 0===s?void 0:s.toString())||"",serviceId:"",client_contact_name:(null==o?void 0:o.contact_name)||"",client_contact_email:(null==o?void 0:o.contact_email)||"",client_contact_phone:(null==o?void 0:o.phone)||"",notes:"",send_welcome_email:!0,generate_qr_codes:!0,create_firebase_account:!0}),[j]=(0,r.useState)([{id:"1",name:"Basic Package",price:299,commission_rate:.15},{id:"2",name:"Premium Package",price:599,commission_rate:.2},{id:"3",name:"Enterprise Package",price:999,commission_rate:.25}]),y=j.find(e=>e.id===v.serviceId),_=Number.parseFloat(v.conversion_value||"0"),w=y?_*y.commission_rate:0,k=async e=>{if(e.preventDefault(),x(!0),h(null),p(null),!v.conversion_value||!v.client_contact_name||!v.client_contact_email){h("Please fill in all required fields (conversion value, contact name, and email)"),x(!1);return}if(!v.client_contact_email.includes("@")){h("Please enter a valid email address"),x(!1);return}let s=Number.parseFloat(v.conversion_value);if(isNaN(s)||s<=0){h("Please enter a valid conversion value greater than 0"),x(!1);return}try{console.log("Converting prospect:",{prospect_id:o.id,conversion_value:s,client_contact_name:v.client_contact_name,client_contact_email:v.client_contact_email});let e={conversion_value:s,client_contact_name:v.client_contact_name,client_contact_email:v.client_contact_email,client_contact_phone:v.client_contact_phone,notes:v.notes},a=await A.x.convertProspect(o.id,e);if(console.log("Conversion response:",a),a.success)p(a.message||"Prospect converted to client successfully!"),setTimeout(()=>{i(),l(),S()},2e3);else throw Error(a.error||"Conversion failed")}catch(e){console.error("Conversion error:",e),h(e instanceof Error?e.message:"Failed to convert prospect. Please try again.")}finally{x(!1)}},S=()=>{var e;f({conversion_value:(null==o?void 0:null===(e=o.estimated_value)||void 0===e?void 0:e.toString())||"",serviceId:"",client_contact_name:(null==o?void 0:o.contact_name)||"",client_contact_email:(null==o?void 0:o.contact_email)||"",client_contact_phone:(null==o?void 0:o.phone)||"",notes:"",send_welcome_email:!0,generate_qr_codes:!0,create_firebase_account:!0}),h(null),p(null)},Z=(e,s)=>{f(a=>({...a,[e]:s}))};return(0,t.jsx)(C.Vq,{open:a,onOpenChange:l,children:(0,t.jsxs)(C.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto bg-background text-foreground border-border",children:[(0,t.jsx)(C.fK,{children:(0,t.jsxs)(C.$N,{className:"flex items-center gap-2 text-foreground",children:[(0,t.jsx)(z.Z,{className:"h-5 w-5"}),"Convert Prospect to Client"]})}),g&&(0,t.jsxs)("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-md p-3 flex items-start gap-2",children:[(0,t.jsx)(E.Z,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-red-800 dark:text-red-300",children:"Error"}),(0,t.jsx)("div",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:g})]})]}),b&&(0,t.jsxs)("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-md p-3 flex items-start gap-2",children:[(0,t.jsx)(O.Z,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-green-800 dark:text-green-300",children:"Success!"}),(0,t.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:b})]})]}),(0,t.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg border border-border",children:[(0,t.jsx)("h3",{className:"font-medium mb-2 text-foreground",children:"Prospect Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Business:"}),(0,t.jsx)("span",{className:"text-muted-foreground ml-1",children:null==o?void 0:o.business_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Status:"}),(0,t.jsx)("span",{className:"text-muted-foreground ml-1",children:null==o?void 0:o.status})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Priority:"}),(0,t.jsx)("span",{className:"text-muted-foreground ml-1",children:null==o?void 0:o.priority})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:"Estimated Value:"}),(0,t.jsxs)("span",{className:"text-muted-foreground ml-1",children:["$",(null==o?void 0:o.estimated_value)||0]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"font-medium flex items-center gap-2 text-foreground",children:[(0,t.jsx)(N,{className:"h-4 w-4"}),"Conversion Details"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"conversion_value",className:"text-foreground",children:"Final Sale Value ($) *"}),(0,t.jsx)(d.I,{id:"conversion_value",type:"number",step:"0.01",placeholder:"0.00",value:v.conversion_value,onChange:e=>Z("conversion_value",e.target.value),required:!0,className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"serviceId",className:"text-foreground",children:"Service Package (Optional)"}),(0,t.jsxs)(u.Ph,{onValueChange:e=>Z("serviceId",e),children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{placeholder:"Select service"})}),(0,t.jsx)(u.Bw,{className:"bg-white border-gray-300",children:j.map(e=>(0,t.jsxs)(u.Ql,{value:e.id,className:"text-black hover:bg-gray-100",children:[e.name," - $",e.price," (",100*e.commission_rate,"% commission)"]},e.id))})]})]})]}),w>0&&(0,t.jsx)("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 p-3 rounded-lg",children:(0,t.jsxs)("p",{className:"text-green-800 dark:text-green-300 font-medium",children:["Estimated Commission: $",w.toFixed(2)]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-medium text-foreground",children:"Client Contact Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"client_contact_name",className:"text-foreground",children:"Contact Name *"}),(0,t.jsx)(d.I,{id:"client_contact_name",value:v.client_contact_name,onChange:e=>Z("client_contact_name",e.target.value),required:!0,className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"client_contact_email",className:"text-foreground",children:"Contact Email *"}),(0,t.jsx)(d.I,{id:"client_contact_email",type:"email",value:v.client_contact_email,onChange:e=>Z("client_contact_email",e.target.value),required:!0,className:"bg-background text-foreground border-border"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"client_contact_phone",className:"text-foreground",children:"Contact Phone (Optional)"}),(0,t.jsx)(d.I,{id:"client_contact_phone",value:v.client_contact_phone,onChange:e=>Z("client_contact_phone",e.target.value),className:"bg-background text-foreground border-border"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"notes",className:"text-foreground",children:"Conversion Notes (Optional)"}),(0,t.jsx)(D.g,{id:"notes",placeholder:"Add any notes about this conversion...",value:v.notes,onChange:e=>Z("notes",e.target.value),className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-border",children:[(0,t.jsx)(n.z,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),(0,t.jsx)(n.z,{type:"submit",disabled:m,className:"bg-green-600 hover:bg-green-700 text-white",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Converting..."]}):"Convert to Client"})]})]})]})})}var L=a(2339),R=a(8617),U=a(8906),T=a(3041),B=a(9345),q=a(1047),Y=a(6865),W=a(44);let H=[{value:"AL",label:"Alabama"},{value:"AK",label:"Alaska"},{value:"AZ",label:"Arizona"},{value:"AR",label:"Arkansas"},{value:"CA",label:"California"},{value:"CO",label:"Colorado"},{value:"CT",label:"Connecticut"},{value:"DE",label:"Delaware"},{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"HI",label:"Hawaii"},{value:"ID",label:"Idaho"},{value:"IL",label:"Illinois"},{value:"IN",label:"Indiana"},{value:"IA",label:"Iowa"},{value:"KS",label:"Kansas"},{value:"KY",label:"Kentucky"},{value:"LA",label:"Louisiana"},{value:"ME",label:"Maine"},{value:"MD",label:"Maryland"},{value:"MA",label:"Massachusetts"},{value:"MI",label:"Michigan"},{value:"MN",label:"Minnesota"},{value:"MS",label:"Mississippi"},{value:"MO",label:"Missouri"},{value:"MT",label:"Montana"},{value:"NE",label:"Nebraska"},{value:"NV",label:"Nevada"},{value:"NH",label:"New Hampshire"},{value:"NJ",label:"New Jersey"},{value:"NM",label:"New Mexico"},{value:"NY",label:"New York"},{value:"NC",label:"North Carolina"},{value:"ND",label:"North Dakota"},{value:"OH",label:"Ohio"},{value:"OK",label:"Oklahoma"},{value:"OR",label:"Oregon"},{value:"PA",label:"Pennsylvania"},{value:"RI",label:"Rhode Island"},{value:"SC",label:"South Carolina"},{value:"SD",label:"South Dakota"},{value:"TN",label:"Tennessee"},{value:"TX",label:"Texas"},{value:"UT",label:"Utah"},{value:"VT",label:"Vermont"},{value:"VA",label:"Virginia"},{value:"WA",label:"Washington"},{value:"WV",label:"West Virginia"},{value:"WI",label:"Wisconsin"},{value:"WY",label:"Wyoming"},{value:"DC",label:"District of Columbia"}];function K(e,s){let a=e.replace(/[^A-Za-z0-9]/g,"");switch(s){case"US":if(5===a.length)return a;if(9===a.length)return"".concat(a.slice(0,5),"-").concat(a.slice(5));return e;case"CA":if(6===a.length)return"".concat(a.slice(0,3)," ").concat(a.slice(3)).toUpperCase();return e.toUpperCase();case"MX":case"ES":case"IT":if(5===a.length)return a;return e;default:return e}}function G(e,s){return e.id===s?1:"CEO"===e.position_title?2:"CCO"===e.position_title?3:"Sales Manager"===e.position_title||"sales_manager"===e.role?4:6}function $(e){let{isOpen:s,onClose:a,prospect:i,onSuccess:m,userRole:x}=e,{user:g,role:h}=(0,M.a)(),[b,p]=(0,r.useState)(!1),[v,j]=(0,r.useState)([]),[y,_]=(0,r.useState)(!1),[w,k]=(0,r.useState)([]),[S,I]=(0,r.useState)([]),[P,F]=(0,r.useState)(!1),[E,O]=(0,r.useState)(""),[Q,V]=(0,r.useState)(!1),[$,X]=(0,r.useState)({business_name:"",contact_name:"",contact_email:"",phone:"",street_address:"",city:"",state:"",zip_code:"",country:"US",formatted_address:"",website:"",business_type:"",estimated_value:"",priority:"medium",status:"new",notes:"",assigned_salesperson_id:""}),[J,ee]=(0,r.useState)({activity_type:"call",subject:"",description:""}),es=["super_admin","sales_manager","admin","cco"].includes(x)||["super_admin","sales_manager","admin","cco"].includes(h||"");console.log("\uD83D\uDD0D Permission check result:",{userRole:x,authContextRole:h,canReassignProspects:es,allowedRoles:["super_admin","sales_manager","admin","cco"]}),console.log("\uD83D\uDD0D Edit modal debug:",{userRole:x,authRole:h,prospectOwner:null==i?void 0:i.assigned_salesperson_id,prospectOwnerName:null==i?void 0:i.assigned_salesperson_name}),console.log("\uD83D\uDD0D Permission check result:",{userRole:x,authContextRole:h,canReassignProspects:es,allowedRoles:["super_admin","sales_manager","admin","cco"]}),console.log("\uD83D\uDD0D Edit modal permissions check:",{userRole:x,canReassignProspects:es}),console.log("\uD83D\uDD0D Edit modal debug:",{userRole:x,authRole:h,prospectOwner:null==i?void 0:i.assigned_salesperson_id,prospectOwnerName:null==i?void 0:i.assigned_salesperson_name}),(0,r.useEffect)(()=>{if(i){var e;console.log("\uD83D\uDD0D Loading prospect data:",i),X({business_name:i.business_name||"",contact_name:i.contact_name||"",contact_email:i.contact_email||"",phone:i.phone||"",street_address:i.street_address||"",city:i.city||"",state:i.state||"",zip_code:i.zip_code||"",country:i.country||"US",formatted_address:i.formatted_address||"",website:i.website||"",business_type:i.business_type||"",estimated_value:i.estimated_value?i.estimated_value.toString():"",priority:i.priority||"medium",status:i.status||"new",notes:i.notes||"",assigned_salesperson_id:(null===(e=i.assigned_salesperson_id)||void 0===e?void 0:e.toString())||""}),er(),ea(),et()}},[i]);let ea=async()=>{try{console.log("\uD83D\uDD0D Loading business sectors via apiClient...");let e=await A.x.getBusinessSectors();console.log("✅ Business sectors loaded:",e.data),k(e.data||[])}catch(e){console.error("❌ Error loading business sectors:",e),k([])}},et=async()=>{F(!0);try{let e=await A.x.getEmployees();console.log("\uD83D\uDD0D Raw employee data:",e.data);let s=(e.data||[]).filter(e=>{var s;let a="active"===e.status;if(!a)return console.log("❌ Skipping inactive employee: ".concat(e.full_name," (status: ").concat(e.status,")")),!1;"Sales"===e.department_name||["CEO","CCO","Sales Manager","sales_manager"].includes(e.role)||e.position_title;let t=null===(s=e.department_name)||void 0===s?void 0:s.toLowerCase().includes("sales"),r=e.position_title&&["CEO","CCO","Sales Manager","Sales Director","Sales Representative","Account Manager"].includes(e.position_title);return console.log("\uD83D\uDD0D Employee ".concat(e.full_name,":"),{isActive:a,isInSalesDept:t,hasSalesPosition:r,role:e.role,position_title:e.position_title,department_name:e.department_name,status:e.status}),a&&(t||r)});console.log("\uD83D\uDD0D Filtered sales employees:",s.length);let a=s.sort((e,s)=>{let a=G(e,null==i?void 0:i.assigned_salesperson_id),t=G(s,null==i?void 0:i.assigned_salesperson_id);return a!==t?a-t:e.full_name.localeCompare(s.full_name)});I(a),console.log("✅ Loaded and sorted sales employees:",a.length,a)}catch(e){console.error("Error loading sales employees:",e)}finally{F(!1)}},er=async()=>{if(null==i?void 0:i.id){_(!0);try{console.log("\uD83D\uDD0D Loading activities for prospect ".concat(i.id," via apiClient..."));let e=await A.x.getProspectActivities(i.id);console.log("✅ Activities loaded:",e.data),j(e.data||[])}catch(e){console.error("❌ Error loading activities:",e),j([])}finally{_(!1)}}},el=async()=>{if(!J.subject.trim()){alert("Please enter a subject for the activity");return}try{console.log("\uD83D\uDD0D Adding activity via apiClient...");let e={prospect_id:i.id,activity_type:J.activity_type,subject:J.subject,description:J.description},s=await A.x.createProspectActivity(e);console.log("✅ Activity added successfully:",s),ee({activity_type:"call",subject:"",description:""}),er(),alert("Activity added successfully!")}catch(e){console.error("❌ Error adding activity:",e),alert("Error adding activity: "+(e instanceof Error?e.message:String(e)))}},en=(e,s)=>{X(a=>({...a,[e]:s}))},eo=e=>{let s=K(e,$.country);X(e=>({...e,zip_code:s}))},ei=async e=>{e.preventDefault(),p(!0);try{var s;console.log("\uD83D\uDD0D Submitting prospect update"),console.log("\uD83D\uDD0D Form data:",$);let e=K($.zip_code,$.country),t="".concat($.street_address,", ").concat($.city,", ").concat($.state," ").concat(e).trim(),r=$.assigned_salesperson_id!==(null===(s=i.assigned_salesperson_id)||void 0===s?void 0:s.toString()),l={business_name:$.business_name,contact_name:$.contact_name,contact_email:$.contact_email,phone:$.phone,street_address:$.street_address,city:$.city,state:$.state,zip_code:e,country:$.country,formatted_address:$.formatted_address||t,website:$.website,business_type:$.business_type,estimated_value:Number.parseFloat($.estimated_value)||0,priority:$.priority,status:$.status,notes:$.notes,assigned_salesperson_id:Number.parseInt($.assigned_salesperson_id)||i.assigned_salesperson_id};r&&es&&(l.change_reason=E||"Prospect reassignment via edit modal");let n=await A.x.updateProspect(i.id,l);console.log("✅ Prospect updated successfully:",n),m(),a(),O(""),V(!1)}catch(e){console.error("❌ Error updating prospect:",e),alert("Error updating prospect: "+(e instanceof Error?e.message:String(e)))}finally{p(!1)}};return i?(0,t.jsx)(C.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(C.cZ,{className:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto bg-background text-foreground border-border",children:[(0,t.jsxs)(C.fK,{children:[(0,t.jsxs)(C.$N,{className:"flex items-center gap-3 text-foreground",children:[(0,t.jsx)(W.Z,{className:"h-5 w-5"}),i.business_name,(0,t.jsx)(o.C,{className:"bg-blue-100 text-blue-800 dark:bg-blue-950/20 dark:text-blue-300",children:i.status})]}),(0,t.jsx)(C.Be,{className:"text-muted-foreground",children:"Edit prospect information and manage sales activities"})]}),(0,t.jsxs)(L.mQ,{defaultValue:"details",className:"w-full",children:[(0,t.jsxs)(L.dr,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(L.SP,{value:"details",children:"Details"}),(0,t.jsxs)(L.SP,{value:"activities",children:["Activities (",v.length,")"]})]}),(0,t.jsx)(L.nU,{value:"details",className:"space-y-4",children:(0,t.jsxs)("form",{onSubmit:ei,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"business_name",className:"text-foreground",children:"Business Name *"}),(0,t.jsx)(d.I,{id:"business_name",value:$.business_name,onChange:e=>en("business_name",e.target.value),required:!0,className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"contact_name",className:"text-foreground",children:"Contact Name"}),(0,t.jsx)(d.I,{id:"contact_name",value:$.contact_name,onChange:e=>en("contact_name",e.target.value),className:"bg-background text-foreground border-border"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"contact_email",className:"text-foreground",children:"Contact Email"}),(0,t.jsx)(d.I,{id:"contact_email",type:"email",value:$.contact_email,onChange:e=>en("contact_email",e.target.value),className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"phone",className:"text-foreground",children:"Phone"}),(0,t.jsx)(d.I,{id:"phone",value:$.phone,onChange:e=>en("phone",e.target.value),className:"bg-background text-foreground border-border"})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t border-border pt-4",children:[(0,t.jsxs)("h3",{className:"font-medium flex items-center gap-2 text-foreground",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),"Assignment & Ownership"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(c._,{htmlFor:"assigned_salesperson_id",className:"text-foreground",children:["Assigned Sales Representative *",!es&&(0,t.jsxs)(o.C,{variant:"outline",className:"ml-2 text-xs",children:[(0,t.jsx)(U.Z,{className:"h-3 w-3 mr-1"}),"Read Only"]})]}),(0,t.jsxs)(u.Ph,{value:$.assigned_salesperson_id,onValueChange:e=>{var s;e!==(null===(s=i.assigned_salesperson_id)||void 0===s?void 0:s.toString())&&es&&V(!0),X(s=>({...s,assigned_salesperson_id:e}))},disabled:!es||P,children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{placeholder:P?"Loading employees...":"Select sales representative"})}),(0,t.jsx)(u.Bw,{className:"bg-white border-gray-300",children:S.map(e=>{var s;let a=e.id===i.assigned_salesperson_id;return(0,t.jsx)(u.Ql,{value:e.id.toString(),className:"text-black hover:bg-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(s=i.assigned_salesperson_id,e.id===s?(0,t.jsx)(Z.Z,{className:"h-3 w-3 text-yellow-500"}):"CEO"===e.position_title?(0,t.jsx)(R.Z,{className:"h-3 w-3 text-purple-500"}):"CCO"===e.position_title?(0,t.jsx)(U.Z,{className:"h-3 w-3 text-blue-500"}):"Sales Manager"===e.position_title||"sales_manager"===e.role?(0,t.jsx)(f.Z,{className:"h-3 w-3 text-green-500"}):(0,t.jsx)(z.Z,{className:"h-3 w-3 text-gray-500"})),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:e.full_name}),a&&(0,t.jsx)(o.C,{variant:"outline",className:"text-xs",children:"Current Owner"})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.position_title||e.role,e.department_name&&" • ".concat(e.department_name)]})]})]})},e.id)})})]}),!es&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,t.jsx)(Y.Z,{className:"h-3 w-3 inline mr-1"}),"Only Sales Managers and Super Admins can reassign prospects to other team members."]})]}),Q&&(0,t.jsxs)("div",{className:"space-y-2 p-4 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[(0,t.jsx)(c._,{htmlFor:"change_reason",className:"text-foreground",children:"Reason for Assignment Change"}),(0,t.jsx)(D.g,{id:"change_reason",value:E,onChange:e=>O(e.target.value),placeholder:"Please provide a reason for changing the prospect assignment...",rows:2,className:"bg-background text-foreground border-border"}),(0,t.jsx)("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"This change will be logged in the audit system for compliance tracking."})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t border-border pt-4",children:[(0,t.jsx)("h3",{className:"font-medium text-foreground",children:"Address Information"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"street_address",className:"text-foreground",children:"Street Address"}),(0,t.jsx)(d.I,{id:"street_address",value:$.street_address,onChange:e=>en("street_address",e.target.value),placeholder:"123 Main Street",className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"city",className:"text-foreground",children:"City"}),(0,t.jsx)(d.I,{id:"city",value:$.city,onChange:e=>en("city",e.target.value),placeholder:"Miami",className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"state",className:"text-foreground",children:"State"}),(0,t.jsxs)(u.Ph,{value:$.state,onValueChange:e=>en("state",e),children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{placeholder:"Select state"})}),(0,t.jsx)(u.Bw,{className:"bg-white border-gray-300",children:H.map(e=>(0,t.jsx)(u.Ql,{value:e.value,className:"text-black hover:bg-gray-100",children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"zip_code",className:"text-foreground",children:"ZIP Code"}),(0,t.jsx)(d.I,{id:"zip_code",value:$.zip_code,onChange:e=>eo(e.target.value),placeholder:"33101 or 33101-1234",className:"bg-background text-foreground border-border"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"country",className:"text-foreground",children:"Country"}),(0,t.jsxs)(u.Ph,{value:$.country,onValueChange:e=>en("country",e),children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{})}),(0,t.jsxs)(u.Bw,{className:"bg-white border-gray-300",children:[(0,t.jsx)(u.Ql,{value:"US",className:"text-black hover:bg-gray-100",children:"United States"}),(0,t.jsx)(u.Ql,{value:"CA",className:"text-black hover:bg-gray-100",children:"Canada"}),(0,t.jsx)(u.Ql,{value:"MX",className:"text-black hover:bg-gray-100",children:"Mexico"}),(0,t.jsx)(u.Ql,{value:"ES",className:"text-black hover:bg-gray-100",children:"Spain"}),(0,t.jsx)(u.Ql,{value:"IT",className:"text-black hover:bg-gray-100",children:"Italy"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"website",className:"text-foreground",children:"Website"}),(0,t.jsx)(d.I,{id:"website",value:$.website,onChange:e=>en("website",e.target.value),className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"business_type",className:"text-foreground",children:"Industry"}),(0,t.jsxs)(u.Ph,{value:$.business_type,onValueChange:e=>en("business_type",e),children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{placeholder:"Select industry"})}),(0,t.jsx)(u.Bw,{className:"bg-white border-gray-300",children:w.map(e=>(0,t.jsx)(u.Ql,{value:e.businesssectorname,className:"text-black hover:bg-gray-100",children:e.businesssectorname},e.id))})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"estimated_value",className:"text-foreground",children:"Estimated Value ($)"}),(0,t.jsx)(d.I,{id:"estimated_value",type:"number",step:"0.01",value:$.estimated_value,onChange:e=>en("estimated_value",e.target.value),className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"priority",className:"text-foreground",children:"Priority"}),(0,t.jsxs)(u.Ph,{value:$.priority,onValueChange:e=>en("priority",e),children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{})}),(0,t.jsxs)(u.Bw,{className:"bg-white border-gray-300",children:[(0,t.jsx)(u.Ql,{value:"low",className:"text-black hover:bg-gray-100",children:"Low"}),(0,t.jsx)(u.Ql,{value:"medium",className:"text-black hover:bg-gray-100",children:"Medium"}),(0,t.jsx)(u.Ql,{value:"high",className:"text-black hover:bg-gray-100",children:"High"}),(0,t.jsx)(u.Ql,{value:"urgent",className:"text-black hover:bg-gray-100",children:"Urgent"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"status",className:"text-foreground",children:"Status"}),(0,t.jsxs)(u.Ph,{value:$.status,onValueChange:e=>en("status",e),children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{})}),(0,t.jsxs)(u.Bw,{className:"bg-white border-gray-300",children:[(0,t.jsx)(u.Ql,{value:"new",className:"text-black hover:bg-gray-100",children:"New"}),(0,t.jsx)(u.Ql,{value:"contacted",className:"text-black hover:bg-gray-100",children:"Contacted"}),(0,t.jsx)(u.Ql,{value:"qualified",className:"text-black hover:bg-gray-100",children:"Qualified"}),(0,t.jsx)(u.Ql,{value:"proposal",className:"text-black hover:bg-gray-100",children:"Proposal"}),(0,t.jsx)(u.Ql,{value:"negotiation",className:"text-black hover:bg-gray-100",children:"Negotiation"}),(0,t.jsx)(u.Ql,{value:"converted",className:"text-black hover:bg-gray-100",children:"Converted"}),(0,t.jsx)(u.Ql,{value:"lost",className:"text-black hover:bg-gray-100",children:"Lost"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"notes",className:"text-foreground",children:"Notes"}),(0,t.jsx)(D.g,{id:"notes",value:$.notes,onChange:e=>en("notes",e.target.value),rows:3,className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)(C.cN,{children:[(0,t.jsx)(n.z,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),(0,t.jsx)(n.z,{type:"submit",disabled:b,children:b?"Saving...":"Save Changes"})]})]})}),(0,t.jsxs)(L.nU,{value:"activities",className:"space-y-4",children:[(0,t.jsxs)(l.Zb,{className:"border-border",children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"text-sm flex items-center gap-2 text-foreground",children:[(0,t.jsx)(q.Z,{className:"h-4 w-4"}),"Add New Activity"]})}),(0,t.jsxs)(l.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"activity_type",className:"text-foreground",children:"Activity Type"}),(0,t.jsxs)(u.Ph,{value:J.activity_type,onValueChange:e=>ee(s=>({...s,activity_type:e})),children:[(0,t.jsx)(u.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{})}),(0,t.jsxs)(u.Bw,{className:"bg-white border-gray-300",children:[(0,t.jsx)(u.Ql,{value:"call",className:"text-black hover:bg-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T.Z,{className:"h-4 w-4 text-green-500"}),"Phone Call"]})}),(0,t.jsx)(u.Ql,{value:"email",className:"text-black hover:bg-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(B.Z,{className:"h-4 w-4 text-blue-500"}),"Email"]})}),(0,t.jsx)(u.Ql,{value:"meeting",className:"text-black hover:bg-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(q.Z,{className:"h-4 w-4 text-purple-500"}),"Meeting"]})}),(0,t.jsx)(u.Ql,{value:"note",className:"text-black hover:bg-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(z.Z,{className:"h-4 w-4 text-gray-500"}),"Note"]})}),(0,t.jsx)(u.Ql,{value:"follow_up",className:"text-black hover:bg-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Y.Z,{className:"h-4 w-4 text-yellow-500"}),"Follow Up"]})})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"subject",className:"text-foreground",children:"Subject *"}),(0,t.jsx)(d.I,{id:"subject",value:J.subject,onChange:e=>ee(s=>({...s,subject:e.target.value})),placeholder:"Brief description of activity",required:!0,className:"bg-background text-foreground border-border"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c._,{htmlFor:"description",className:"text-foreground",children:"Description"}),(0,t.jsx)(D.g,{id:"description",value:J.description,onChange:e=>ee(s=>({...s,description:e.target.value})),rows:3,placeholder:"Detailed notes about the activity, outcome, next steps...",className:"bg-background text-foreground border-border"})]}),(0,t.jsxs)(n.z,{onClick:el,disabled:!J.subject.trim(),className:"w-full",children:[(0,t.jsx)(q.Z,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})]}),(0,t.jsxs)(l.Zb,{className:"border-border",children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"text-sm flex items-center gap-2 text-foreground",children:[(0,t.jsx)(W.Z,{className:"h-4 w-4"}),"Activity History (",v.length,")"]})}),(0,t.jsx)(l.aY,{children:y?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Loading activities..."})]}):0===v.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(q.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:"No activities recorded yet"}),(0,t.jsx)("p",{className:"text-sm",children:"Start by adding an activity above to track your sales interactions."})]}):(0,t.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,t.jsxs)("div",{className:"border-l-4 border-blue-200 pl-4 py-3 bg-muted/30 rounded-r-lg",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[function(e){switch(e){case"call":return(0,t.jsx)(T.Z,{className:"h-4 w-4 text-green-500"});case"email":return(0,t.jsx)(B.Z,{className:"h-4 w-4 text-blue-500"});case"meeting":return(0,t.jsx)(q.Z,{className:"h-4 w-4 text-purple-500"});case"proposal":return(0,t.jsx)(N,{className:"h-4 w-4 text-orange-500"});case"follow_up":return(0,t.jsx)(Y.Z,{className:"h-4 w-4 text-yellow-500"});default:return(0,t.jsx)(z.Z,{className:"h-4 w-4 text-gray-500"})}}(e.activity_type),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm text-foreground",children:e.subject}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(z.Z,{className:"h-3 w-3"}),e.employee_name,(0,t.jsx)("span",{children:"•"}),(0,t.jsx)(q.Z,{className:"h-3 w-3"}),new Date(e.completed_at||e.created_at).toLocaleString()]})]})]}),(0,t.jsx)(o.C,{variant:"outline",className:"text-xs capitalize",children:e.activity_type.replace("_"," ")})]}),e.description&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground mt-2 pl-6",children:e.description}),e.outcome&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-1 pl-6",children:[(0,t.jsx)("strong",{children:"Outcome:"})," ",e.outcome]}),e.next_action&&(0,t.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 pl-6",children:[(0,t.jsx)("strong",{children:"Next Action:"})," ",e.next_action]})]},e.id))})})]})]})]})]})}):null}function X(){let{user:e,role:s}=(0,M.a)(),[a,m]=(0,r.useState)({totalProspects:0,totalClients:0,conversionRate:0,totalCommissions:0,pendingCommissions:0,avgSalesCycle:0}),[C,D]=(0,r.useState)([]),[S,Z]=(0,r.useState)(!0),[I,P]=(0,r.useState)(null),[z,E]=(0,r.useState)(!1),[O,Q]=(0,r.useState)(!1),[L,R]=(0,r.useState)("cards"),[U,T]=(0,r.useState)(""),[B,q]=(0,r.useState)(!1),[Y,W]=(0,r.useState)(null),[H,K]=(0,r.useState)(!1),[G,X]=(0,r.useState)(""),[J,ee]=(0,r.useState)("created_at"),[es,ea]=(0,r.useState)("desc"),[et,er]=(0,r.useState)("all"),[el,en]=(0,r.useState)("all");(0,r.useEffect)(()=>{eo()},[e,O]);let eo=async()=>{try{var e,a,t,r,l,n,o,i,c;console.log("\uD83D\uDD04 Loading sales dashboard data...");try{let s=await A.x.getSalesDashboard();m({totalProspects:(null===(a=s.data)||void 0===a?void 0:null===(e=a.prospects)||void 0===e?void 0:e.total)||0,totalClients:(null===(r=s.data)||void 0===r?void 0:null===(t=r.clients)||void 0===t?void 0:t.total)||0,conversionRate:ei(null===(n=s.data)||void 0===n?void 0:null===(l=n.prospects)||void 0===l?void 0:l.total,null===(i=s.data)||void 0===i?void 0:null===(o=i.clients)||void 0===o?void 0:o.total),totalCommissions:0,pendingCommissions:0,avgSalesCycle:0}),console.log("✅ Dashboard stats loaded:",s.data)}catch(e){console.error("❌ Error loading dashboard stats:",e)}try{let e=await A.x.getProspects(O);D(e.data||[]);let a=e.user_role||s||"employee";T(a),q(e.can_view_all||!1),console.log("✅ Loaded ".concat((null===(c=e.data)||void 0===c?void 0:c.length)||0," prospects (viewAll: ").concat(O,", role: ").concat(a,")"))}catch(e){console.error("❌ Error loading prospects:",e),D([])}}catch(e){console.error("❌ Error loading sales data:",e)}finally{Z(!1)}},ei=(e,s)=>e&&0!==e?Math.round(s/e*100):0,ec=e=>{P(e),E(!0)},ed=e=>{W(e),K(!0)},eu=e=>({new:"bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/20",contacted:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-300 border-yellow-500/20",qualified:"bg-green-500/10 text-green-700 dark:text-green-300 border-green-500/20",proposal:"bg-purple-500/10 text-purple-700 dark:text-purple-300 border-purple-500/20",negotiation:"bg-orange-500/10 text-orange-700 dark:text-orange-300 border-orange-500/20",converted:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-500/20",lost:"bg-red-500/10 text-red-700 dark:text-red-300 border-red-500/20"})[e]||"bg-muted text-muted-foreground border-border",em=e=>({low:"bg-muted text-muted-foreground border-border",medium:"bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/20",high:"bg-orange-500/10 text-orange-700 dark:text-orange-300 border-orange-500/20",urgent:"bg-red-500/10 text-red-700 dark:text-red-300 border-red-500/20"})[e]||"bg-muted text-muted-foreground border-border",ex=e=>{J===e?ea("asc"===es?"desc":"asc"):(ee(e),ea("asc"))},eg=(0,r.useMemo)(()=>{let e=[...C];if(G.trim()){let s=G.toLowerCase().trim();e=e.filter(e=>[e.business_name,e.contact_name,e.contact_email,e.phone,e.formatted_address,e.street_address,e.city,e.state,e.zip_code,e.website,e.notes,e.assigned_salesperson_name,e.business_type].some(e=>e&&e.toString().toLowerCase().includes(s)))}return"all"!==et&&(e=e.filter(e=>e.status===et)),"all"!==el&&(e=e.filter(e=>e.priority===el)),J&&e.sort((e,s)=>{let a=e[J],t=s[J];return("estimated_value"===J?(a=Number(a)||0,t=Number(t)||0):"created_at"===J?(a=new Date(a).getTime(),t=new Date(t).getTime()):(a=String(a||"").toLowerCase(),t=String(t||"").toLowerCase()),a<t)?"asc"===es?-1:1:a>t?"asc"===es?1:-1:0}),e},[C,G,et,el,J,es]),eh=()=>{X(""),er("all"),en("all"),ee("created_at"),ea("desc")},eb=(0,r.useMemo)(()=>Array.from(new Set(C.map(e=>e.status))).sort(),[C]),ep=(0,r.useMemo)(()=>Array.from(new Set(C.map(e=>e.priority))).sort(),[C]);if(S)return(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-muted rounded w-1/4 mb-6"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-32 bg-muted rounded"},s))})]})});let ev=e=>{let{field:s,children:a}=e;return(0,t.jsx)("th",{className:"border border-border px-4 py-2 text-left cursor-pointer hover:bg-muted/50 text-foreground",onClick:()=>ex(s),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[a,J===s&&("asc"===es?(0,t.jsx)(x,{className:"h-3 w-3"}):(0,t.jsx)(g,{className:"h-3 w-3"}))]})})};return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Sales Pipeline"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Manage prospects and track sales performance",O?" (All Prospects)":" (My Prospects)"]})]}),(0,t.jsx)(F,{trigger:(0,t.jsxs)(n.z,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),"New Prospect"]}),onProspectCreated:eo})]}),(0,t.jsx)(l.Zb,{children:(0,t.jsx)(l.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[B&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(i.r,{id:"view-all",checked:O,onCheckedChange:Q}),(0,t.jsx)(c._,{htmlFor:"view-all",className:"text-foreground",children:"View All Prospects"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Role: ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:U})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(n.z,{variant:"cards"===L?"default":"outline",size:"sm",onClick:()=>R("cards"),children:[(0,t.jsx)(p,{className:"h-4 w-4 mr-1"}),"Cards"]}),(0,t.jsxs)(n.z,{variant:"table"===L?"default":"outline",size:"sm",onClick:()=>R("table"),children:[(0,t.jsx)(v,{className:"h-4 w-4 mr-1"}),"Table"]})]})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(l.ll,{className:"text-sm font-medium",children:"Total Prospects"}),(0,t.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(l.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:C.length}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[eg.length!==C.length&&"".concat(eg.length," filtered • "),O?"All prospects in system":"Your prospects in pipeline"]})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(l.ll,{className:"text-sm font-medium",children:"Clients"}),(0,t.jsx)(j,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(l.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:a.totalClients}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Converted prospects"})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(l.ll,{className:"text-sm font-medium",children:"Conversion Rate"}),(0,t.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(l.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[a.conversionRate,"%"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Prospects to clients"})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(l.ll,{className:"text-sm font-medium",children:"Commissions"}),(0,t.jsx)(N,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(l.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:["$",a.pendingCommissions]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pending commissions"})]})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.ll,{children:"Prospects Pipeline"}),(0,t.jsx)(l.SZ,{children:"Track and manage sales prospects"})]}),0===C.length&&(0,t.jsx)(F,{trigger:(0,t.jsxs)(n.z,{variant:"outline",className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),"Add First Prospect"]}),onProspectCreated:eo})]}),C.length>0&&(0,t.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(_.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,t.jsx)(d.I,{placeholder:"Search by business name, contact, address, notes...",value:G,onChange:e=>X(e.target.value),className:"pl-10 pr-10"}),G&&(0,t.jsx)(n.z,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>X(""),children:(0,t.jsx)(w.Z,{className:"h-3 w-3"})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c._,{className:"text-sm font-medium text-foreground",children:"Sort by:"}),(0,t.jsxs)(u.Ph,{value:J,onValueChange:ee,children:[(0,t.jsx)(u.i4,{className:"w-40 bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{})}),(0,t.jsxs)(u.Bw,{className:"bg-white border-gray-300",children:[(0,t.jsx)(u.Ql,{value:"business_name",className:"text-black hover:bg-gray-100",children:"Business Name"}),(0,t.jsx)(u.Ql,{value:"contact_name",className:"text-black hover:bg-gray-100",children:"Contact Name"}),(0,t.jsx)(u.Ql,{value:"created_at",className:"text-black hover:bg-gray-100",children:"Created Date"}),(0,t.jsx)(u.Ql,{value:"estimated_value",className:"text-black hover:bg-gray-100",children:"Value"}),(0,t.jsx)(u.Ql,{value:"status",className:"text-black hover:bg-gray-100",children:"Status"}),(0,t.jsx)(u.Ql,{value:"priority",className:"text-black hover:bg-gray-100",children:"Priority"}),(0,t.jsx)(u.Ql,{value:"assigned_salesperson_name",className:"text-black hover:bg-gray-100",children:"Salesperson"})]})]}),(0,t.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>ea("asc"===es?"desc":"asc"),children:"asc"===es?(0,t.jsx)(x,{className:"h-4 w-4"}):(0,t.jsx)(g,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c._,{className:"text-sm font-medium text-foreground",children:"Status:"}),(0,t.jsxs)(u.Ph,{value:et,onValueChange:er,children:[(0,t.jsx)(u.i4,{className:"w-32 bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{})}),(0,t.jsxs)(u.Bw,{className:"bg-white border-gray-300",children:[(0,t.jsx)(u.Ql,{value:"all",className:"text-black hover:bg-gray-100",children:"All Status"}),eb.map(e=>(0,t.jsx)(u.Ql,{value:e,className:"text-black hover:bg-gray-100",children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c._,{className:"text-sm font-medium text-foreground",children:"Priority:"}),(0,t.jsxs)(u.Ph,{value:el,onValueChange:en,children:[(0,t.jsx)(u.i4,{className:"w-32 bg-background text-foreground border-border",children:(0,t.jsx)(u.ki,{})}),(0,t.jsxs)(u.Bw,{className:"bg-white border-gray-300",children:[(0,t.jsx)(u.Ql,{value:"all",className:"text-black hover:bg-gray-100",children:"All Priority"}),ep.map(e=>(0,t.jsx)(u.Ql,{value:e,className:"text-black hover:bg-gray-100",children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]})]}),(G||"all"!==et||"all"!==el)&&(0,t.jsxs)(n.z,{variant:"outline",size:"sm",onClick:eh,children:[(0,t.jsx)(w.Z,{className:"h-3 w-3 mr-1"}),"Clear Filters"]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground ml-auto",children:["Showing ",eg.length," of ",C.length," prospects"]})]})]})]}),(0,t.jsx)(l.aY,{children:0===C.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(f.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No prospects yet"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Start building your sales pipeline by adding your first prospect."})]}):0===eg.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(k.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No prospects match your filters"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search or filter criteria."}),(0,t.jsx)(n.z,{variant:"outline",onClick:eh,children:"Clear All Filters"})]}):(0,t.jsx)(t.Fragment,{children:"cards"===L?(0,t.jsx)("div",{className:"space-y-4",children:eg.map(e=>(0,t.jsx)(l.Zb,{className:"hover:bg-muted/30 transition-colors",children:(0,t.jsxs)(l.aY,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:e.business_name}),(0,t.jsx)(o.C,{variant:"outline",className:eu(e.status),children:e.status}),(0,t.jsx)(o.C,{variant:"outline",className:em(e.priority),children:e.priority})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.contact_name&&(0,t.jsxs)("div",{children:["Contact: ",e.contact_name]}),e.contact_email&&(0,t.jsxs)("div",{children:["Email: ",e.contact_email]}),e.phone&&(0,t.jsxs)("div",{children:["Phone: ",e.phone]}),e.formatted_address&&(0,t.jsxs)("div",{children:["Address: ",e.formatted_address]}),O&&(0,t.jsxs)("div",{className:"font-medium text-primary",children:["Assigned to: ",e.assigned_salesperson_name," (",e.assigned_salesperson_role,")"]})]})]}),(0,t.jsxs)("div",{className:"text-right flex flex-col items-end gap-2",children:[e.estimated_value>0&&(0,t.jsxs)("div",{className:"text-lg font-semibold text-emerald-600 dark:text-emerald-400",children:["$",Number(e.estimated_value).toLocaleString()]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.z,{size:"sm",variant:"outline",onClick:()=>ed(e),children:[(0,t.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),"Edit"]}),"converted"!==e.status&&"lost"!==e.status&&(0,t.jsx)(n.z,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ec(e),children:"Convert to Client"})]})]})]}),e.notes&&(0,t.jsx)("div",{className:"mt-3 text-sm text-muted-foreground bg-muted/50 p-2 rounded border",children:e.notes})]})},e.id))}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-border",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-muted/50",children:[(0,t.jsx)(ev,{field:"business_name",children:"Business"}),(0,t.jsx)(ev,{field:"contact_name",children:"Contact"}),(0,t.jsx)(ev,{field:"assigned_salesperson_name",children:"Salesperson"}),(0,t.jsx)(ev,{field:"status",children:"Status"}),(0,t.jsx)(ev,{field:"priority",children:"Priority"}),(0,t.jsx)(ev,{field:"estimated_value",children:"Value"}),(0,t.jsx)(ev,{field:"created_at",children:"Created"}),(0,t.jsx)("th",{className:"border border-border px-4 py-2 text-left text-foreground",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:eg.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[(0,t.jsxs)("td",{className:"border border-border px-4 py-2",children:[(0,t.jsx)("div",{className:"font-medium text-foreground",children:e.business_name}),e.formatted_address&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.formatted_address})]}),(0,t.jsxs)("td",{className:"border border-border px-4 py-2",children:[e.contact_name&&(0,t.jsx)("div",{className:"text-foreground",children:e.contact_name}),e.contact_email&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.contact_email})]}),(0,t.jsxs)("td",{className:"border border-border px-4 py-2",children:[(0,t.jsx)("div",{className:"font-medium text-foreground",children:e.assigned_salesperson_name}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.assigned_salesperson_role})]}),(0,t.jsx)("td",{className:"border border-border px-4 py-2",children:(0,t.jsx)(o.C,{variant:"outline",className:eu(e.status),children:e.status})}),(0,t.jsx)("td",{className:"border border-border px-4 py-2",children:(0,t.jsx)(o.C,{variant:"outline",className:em(e.priority),children:e.priority})}),(0,t.jsx)("td",{className:"border border-border px-4 py-2",children:e.estimated_value>0&&(0,t.jsxs)("div",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:["$",Number(e.estimated_value).toLocaleString()]})}),(0,t.jsx)("td",{className:"border border-border px-4 py-2",children:(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})}),(0,t.jsx)("td",{className:"border border-border px-4 py-2",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>ed(e),children:(0,t.jsx)(h.Z,{className:"h-3 w-3"})}),"converted"!==e.status&&"lost"!==e.status&&(0,t.jsx)(n.z,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ec(e),children:"Convert"})]})})]},e.id))})]})})})})]}),I&&(0,t.jsx)(V,{isOpen:z,onClose:()=>E(!1),prospect:I,onSuccess:()=>{E(!1),P(null),eo()}}),Y&&(0,t.jsx)($,{isOpen:H,onClose:()=>K(!1),prospect:Y,onSuccess:()=>{K(!1),W(null),eo()},userRole:U})]})}},5800:function(e,s,a){"use strict";a.d(s,{Providers:function(){return x},a:function(){return d}});var t=a(7437),r=a(2265),l=a(3301),n=a(5516),o=a(5922);function i(e){let{children:s,...a}=e;return(0,t.jsx)(o.f,{...a,children:s})}let c=(0,r.createContext)({user:null,role:null,clientRole:null,businessId:null,loading:!0,isFirebaseConfigured:!1}),d=()=>(0,r.useContext)(c);function u(e){if(console.log("\uD83D\uDD0D Determining role for email:",e),!e)return console.log("❌ No email provided, defaulting to client"),"client";let s=e.toLowerCase();return"miguel.giraldo@gladgrade.com"===s?(console.log("\uD83D\uDC51 Super Admin detected!"),"super_admin"):s.endsWith("@gladgrade.com")?(console.log("\uD83C\uDFE2 GladGrade employee detected"),s.includes("admin"))?(console.log("\uD83D\uDEE1️ Admin role assigned"),"admin"):s.includes("moderator")||s.includes("mod")?(console.log("\uD83D\uDD0D Moderator role assigned"),"moderator"):s.includes("support")||s.includes("employee")?(console.log("\uD83D\uDC64 Employee role assigned"),"employee"):(console.log("\uD83D\uDEE1️ Default admin role for GladGrade employee"),"admin"):(console.log("\uD83C\uDFEA Client role assigned"),"client")}function m(e){let{children:s}=e,[a,o]=(0,r.useState)(null),[i,d]=(0,r.useState)(null),[m,x]=(0,r.useState)(null),[g,h]=(0,r.useState)(null),[b,p]=(0,r.useState)(!0),[v,f]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(console.log("\uD83D\uDE80 AuthProvider useEffect running..."),console.log("\uD83D\uDD27 Firebase configured:",!0),f(!0),n.I8){console.log("\uD83D\uDD10 Setting up Firebase auth listener...");let e=(0,l.Aj)(n.I8,async e=>{if(console.log("\uD83D\uDD04 Auth state changed:",e?"User: ".concat(e.email):"No user"),o(e),e&&e.email)try{console.log("\uD83C\uDFAF Getting user role...");let s=await e.getIdTokenResult(),a=s.claims.role,t=null,r=null;console.log("\uD83C\uDFF7️ Custom claim role:",a),"client"===a&&s.claims.businessId&&(t=parseInt(s.claims.businessId),console.log("\uD83C\uDFE2 Client businessId extracted:",t),s.claims.user_role&&(r=s.claims.user_role,console.log("\uD83D\uDC64 Client role extracted:",r))),a||(a=u(e.email),console.log("\uD83D\uDD10 Role assigned based on email domain: ".concat(e.email," → ").concat(a))),d(a),x(r),h(t),console.log("✅ Final role set:",a),console.log("✅ Final clientRole set:",r),console.log("✅ Final businessId set:",t)}catch(a){console.error("❌ Error getting user role:",a);let s=u(e.email);d(s),x(null),h(null),console.log("\uD83D\uDD04 Fallback role assigned: ".concat(e.email," → ").concat(s))}else console.log("\uD83D\uDC64 No user, setting role and businessId to null"),d(null),x(null),h(null);console.log("⏰ Setting loading to false"),p(!1)});return()=>{console.log("\uD83E\uDDF9 Cleaning up auth listener"),e()}}console.log("❌ Firebase not configured or auth not available"),p(!1)},[]),(0,t.jsx)(c.Provider,{value:{user:a,role:i,clientRole:m,businessId:g,loading:b,isFirebaseConfigured:v},children:s})}function x(e){let{children:s}=e;return(0,t.jsx)(i,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!1,children:(0,t.jsx)(m,{children:s})})}},5186:function(e,s,a){"use strict";a.d(s,{I:function(){return n}});var t=a(7437),r=a(2265),l=a(4508);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...n})});n.displayName="Input"},6815:function(e,s,a){"use strict";a.d(s,{_:function(){return c}});var t=a(7437),r=a(2265),l=a(370),n=a(535),o=a(4508);let i=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.f,{ref:s,className:(0,o.cn)(i(),a),...r})});c.displayName=l.f.displayName},3647:function(e,s,a){"use strict";a.d(s,{Bw:function(){return h},Ph:function(){return d},Ql:function(){return b},i4:function(){return m},ki:function(){return u}});var t=a(7437),r=a(2265),l=a(4953),n=a(875),o=a(2135),i=a(401),c=a(4508);let d=l.fC;l.ZA;let u=l.B4,m=r.forwardRef((e,s)=>{let{className:a,children:r,...o}=e;return(0,t.jsxs)(l.xz,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[r,(0,t.jsx)(l.JO,{asChild:!0,children:(0,t.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.xz.displayName;let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(o.Z,{className:"h-4 w-4"})})});x.displayName=l.u_.displayName;let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})});g.displayName=l.$G.displayName;let h=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper",...o}=e;return(0,t.jsx)(l.h_,{children:(0,t.jsxs)(l.VY,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...o,children:[(0,t.jsx)(x,{}),(0,t.jsx)(l.l_,{className:(0,c.cn)("p-1 bg-white","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(g,{})]})})});h.displayName=l.VY.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold text-gray-900",a),...r})}).displayName=l.__.displayName;let b=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(l.ck,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm text-gray-900 outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 hover:bg-gray-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.wU,{children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(l.eT,{children:r})]})});b.displayName=l.ck.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.Z0.displayName},1828:function(e,s,a){"use strict";a.d(s,{r:function(){return o}});var t=a(7437),r=a(2265),l=a(721),n=a(4508);let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:s,children:(0,t.jsx)(l.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});o.displayName=l.fC.displayName},2339:function(e,s,a){"use strict";a.d(s,{SP:function(){return c},dr:function(){return i},mQ:function(){return o},nU:function(){return d}});var t=a(7437),r=a(2265),l=a(1312),n=a(4508);let o=l.fC,i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.aV,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});i.displayName=l.aV.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.xz,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});c.displayName=l.xz.displayName;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});d.displayName=l.VY.displayName},6818:function(e,s,a){"use strict";a.d(s,{g:function(){return n}});var t=a(7437),r=a(2265),l=a(4508);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...r})});n.displayName="Textarea"},1047:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9322:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1671:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8617:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},740:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},1817:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9345:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3774:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3041:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9397:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8906:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5868:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},6595:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},525:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},6865:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2369:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},5516:function(e,s,a){"use strict";a.d(s,{I8:function(){return d}});var t=a(738),r=a(3301),l=a(5978),n=a(62);console.log("Firebase Config Debug:",{apiKey:"✓ Set",authDomain:"✓ Set",projectId:"✓ Set",storageBucket:"✓ Set",messagingSenderId:"✓ Set",appId:"✓ Set"});let o={apiKey:"AIzaSyDD3_U64MVrZp2iNxYWVX9_hHytC9x_WVo",authDomain:"reactgladgrade.firebaseapp.com",projectId:"reactgladgrade",storageBucket:"reactgladgrade.appspot.com",messagingSenderId:"360532994710",appId:"1:360532994710:web:7376b3b3bab542567bf0b7",measurementId:"G-G7Y7B5CME3"},i=["apiKey","authDomain","projectId","appId"].filter(e=>!o[e]);if(i.length>0)throw console.error("Missing Firebase configuration fields:",i),console.error("Current config:",o),console.error("Make sure your .env.local file is in the root directory and restart the dev server"),Error("Missing Firebase configuration: ".concat(i.join(", ")));let c=null,d=null;try{c=(0,t.ZF)(o),d=(0,r.v0)(c),(0,l.ad)(c),(0,n.cF)(c),console.log("✅ Firebase initialized successfully")}catch(e){throw console.error("❌ Firebase initialization failed:",e),e}}},function(e){e.O(0,[139,4358,6137,5605,1709,3774,7005,1153,600,4266,2584,9006,231,2971,2117,1744],function(){return e(e.s=7427)}),_N_E=e.O()}]);