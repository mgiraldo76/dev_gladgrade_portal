(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8198],{8836:function(e,s,a){Promise.resolve().then(a.bind(a,4591))},4591:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Y}});var t=a(7437),l=a(2265),r=a(6070),i=a(2869),n=a(5186),c=a(44),o=a(9397),d=a(3247),u=a(2369),m=a(3041),x=a(3774),h=a(1047),p=a(3417),g=a(6362),v=a(8906),j=a(1671),f=a(9388),_=a(7404),y=a(9202),N=a(5805),b=a(525),w=a(7855),C=a(6110),D=a(6815),S=a(6818),k=a(3647),Z=a(5974),A=a(2339),I=a(9345),L=a(5868),F=a(8930),E=a(6595),z=a(4001),U=a(5800);let P=[{value:"AL",label:"Alabama"},{value:"AK",label:"Alaska"},{value:"AZ",label:"Arizona"},{value:"AR",label:"Arkansas"},{value:"CA",label:"California"},{value:"CO",label:"Colorado"},{value:"CT",label:"Connecticut"},{value:"DE",label:"Delaware"},{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"HI",label:"Hawaii"},{value:"ID",label:"Idaho"},{value:"IL",label:"Illinois"},{value:"IN",label:"Indiana"},{value:"IA",label:"Iowa"},{value:"KS",label:"Kansas"},{value:"KY",label:"Kentucky"},{value:"LA",label:"Louisiana"},{value:"ME",label:"Maine"},{value:"MD",label:"Maryland"},{value:"MA",label:"Massachusetts"},{value:"MI",label:"Michigan"},{value:"MN",label:"Minnesota"},{value:"MS",label:"Mississippi"},{value:"MO",label:"Missouri"},{value:"MT",label:"Montana"},{value:"NE",label:"Nebraska"},{value:"NV",label:"Nevada"},{value:"NH",label:"New Hampshire"},{value:"NJ",label:"New Jersey"},{value:"NM",label:"New Mexico"},{value:"NY",label:"New York"},{value:"NC",label:"North Carolina"},{value:"ND",label:"North Dakota"},{value:"OH",label:"Ohio"},{value:"OK",label:"Oklahoma"},{value:"OR",label:"Oregon"},{value:"PA",label:"Pennsylvania"},{value:"RI",label:"Rhode Island"},{value:"SC",label:"South Carolina"},{value:"SD",label:"South Dakota"},{value:"TN",label:"Tennessee"},{value:"TX",label:"Texas"},{value:"UT",label:"Utah"},{value:"VT",label:"Vermont"},{value:"VA",label:"Virginia"},{value:"WA",label:"Washington"},{value:"WV",label:"West Virginia"},{value:"WI",label:"Wisconsin"},{value:"WY",label:"Wyoming"}];function Q(e){let{isOpen:s,onClose:a,client:p,onSuccess:g,userRole:v}=e,{user:j}=(0,U.a)(),[f,_]=(0,l.useState)(!1),[y,N]=(0,l.useState)([]),[b,Q]=(0,l.useState)(!1),[G,R]=(0,l.useState)([]),[V,M]=(0,l.useState)(!1),[B,O]=(0,l.useState)([]),[T,Y]=(0,l.useState)([]),[q,W]=(0,l.useState)([]),[K,$]=(0,l.useState)(!1),[H,J]=(0,l.useState)(!1),[X,ee]=(0,l.useState)(!1),[es,ea]=(0,l.useState)(null),[et,el]=(0,l.useState)(!1),[er,ei]=(0,l.useState)(null),[en,ec]=(0,l.useState)(!1),[eo,ed]=(0,l.useState)(""),[eu,em]=(0,l.useState)([]),[ex,eh]=(0,l.useState)(!1),[ep,eg]=(0,l.useState)(null),[ev,ej]=(0,l.useState)(!0),[ef,e_]=(0,l.useState)({activity_type:"call",subject:"",description:"",outcome:"",next_action:"",priority:"medium",scheduled_for:""}),ey=()=>{e_({activity_type:"call",subject:"",description:"",outcome:"",next_action:"",priority:"medium",scheduled_for:""})},[eN,eb]=(0,l.useState)({business_name:"",contact_name:"",contact_email:"",phone:"",website:"",business_type:"",business_description:"",claim_status:"unclaimed",security_level:"pending",notes:"",sales_rep_id:""}),[ew,eC]=(0,l.useState)({id:null,location_name:"",address:"",city:"",state:"",country:"USA",postal_code:"",phone:"",manager_name:"",manager_email:"",is_primary:!1,place_id:""}),[eD,eS]=(0,l.useState)({user_email:"",user_name:"",user_role:"client_admin",temporary_password:""}),[ek,eZ]=(0,l.useState)({email:"",full_name:"",role:"client_admin",status:"active",reset_password:!1,new_password:""});(0,l.useEffect)(()=>{p&&(console.log("\uD83D\uDD0D Loading client data:",p),eb({business_name:p.business_name||"",contact_name:p.contact_name||"",contact_email:p.contact_email||"",phone:p.phone||"",website:p.website||"",business_type:p.industry_category_name||"",business_description:p.business_description||"",claim_status:p.claim_status||"unclaimed",security_level:p.security_level||"pending",notes:p.notes||"",sales_rep_id:p.sales_rep_id?p.sales_rep_id.toString():"unassigned"}),eA(),eI(),eL(),eF(),eQ())},[p]);let eA=async()=>{try{let e=await w.x.getIndustryCategories();O(e.data||[])}catch(e){console.error("Error loading industry categories:",e)}},eI=async()=>{try{let e=(await w.x.getEmployees()).data.filter(e=>"Sales"===e.department_name||["CEO","CCO","Sales Manager"].includes(e.role));Y(e)}catch(e){console.error("Error loading sales reps:",e)}},eL=async()=>{M(!0);try{console.log("\uD83D\uDD0D Loading users for client",p.id);let e=await w.x.getClientUsers(p.id);R(e.data||[]),console.log("✅ Loaded users:",e.data)}catch(e){console.error("❌ Error loading users:",e),R([])}finally{M(!1)}},eF=async()=>{if(null==p?void 0:p.id){Q(!0);try{console.log("\uD83D\uDD0D Loading activities for client ".concat(p.id)),N([])}catch(e){console.error("Error loading client activities:",e),N([])}finally{Q(!1)}}},eE=e=>{switch(e){case"call":return(0,t.jsx)(m.Z,{className:"h-4 w-4 text-green-500"});case"email":return(0,t.jsx)(I.Z,{className:"h-4 w-4 text-blue-500"});case"meeting":return(0,t.jsx)(h.Z,{className:"h-4 w-4 text-purple-500"});case"follow_up":return(0,t.jsx)(h.Z,{className:"h-4 w-4 text-yellow-500"});case"support":return(0,t.jsx)(u.Z,{className:"h-4 w-4 text-blue-500"});default:return(0,t.jsx)(u.Z,{className:"h-4 w-4 text-gray-500"})}},ez=async()=>{Q(!0);try{console.log("\uD83D\uDD0D Loading activities for client",p.id);let e=await w.x.getClientActivities(p.id);N(e.data||[]),console.log("✅ Loaded activities:",e.data)}catch(e){console.error("❌ Error loading activities:",e),N([])}finally{Q(!1)}},eU=async e=>{if(e.preventDefault(),!ef.subject.trim()){alert("Subject is required");return}try{var s,a,t;console.log("\uD83D\uDD0D Creating activity:",ef);let e=await w.x.createClientActivity(p.id,{activity_type:ef.activity_type,subject:ef.subject.trim(),description:(null===(s=ef.description)||void 0===s?void 0:s.trim())||"",outcome:(null===(a=ef.outcome)||void 0===a?void 0:a.trim())||"",next_action:(null===(t=ef.next_action)||void 0===t?void 0:t.trim())||"",priority:ef.priority,scheduled_for:ef.scheduled_for||""});console.log("✅ Activity created successfully:",e),ey(),ez(),alert("Activity created successfully!")}catch(e){console.error("❌ Error creating activity:",e),alert("Error creating activity")}},eP=(e,s)=>{e_(a=>({...a,[e]:s}))},eQ=async()=>{$(!0);try{console.log("\uD83D\uDD0D Loading locations for client",p.id);let e=await w.x.getClientLocations(p.id);W(e.data||[]),console.log("✅ Loaded locations:",e.data)}catch(e){console.error("❌ Error loading locations:",e),W([])}finally{$(!1)}},eG=async e=>{if(e.preventDefault(),!ew.location_name.trim()||!ew.address.trim()){alert("Location name and address are required");return}try{var s,a,t,l,r,i,n,c;if(es){console.log("\uD83D\uDD0D Updating location:",ew);let e={location_name:ew.location_name.trim(),address:ew.address.trim(),city:(null===(s=ew.city)||void 0===s?void 0:s.trim())||"",state:(null===(a=ew.state)||void 0===a?void 0:a.trim())||"",postal_code:(null===(t=ew.postal_code)||void 0===t?void 0:t.trim())||"",country:ew.country||"USA",phone:(null===(l=ew.phone)||void 0===l?void 0:l.trim())||"",manager_name:(null===(r=ew.manager_name)||void 0===r?void 0:r.trim())||"",manager_email:(null===(i=ew.manager_email)||void 0===i?void 0:i.trim())||"",is_primary:ew.is_primary||!1,place_id:ew.place_id||""},n=await w.x.updateClientLocation(p.id,es.id,e);console.log("✅ Location updated successfully:",n),alert("Location updated successfully!")}else{console.log("\uD83D\uDD0D Creating location:",ew);let e={location_name:ew.location_name.trim(),address:ew.address.trim(),place_id:(null==ep?void 0:ep.place_id)||ew.place_id||"",is_primary:ew.is_primary||!1,phone:(null===(n=ew.phone)||void 0===n?void 0:n.trim())||"",manager_name:(null===(c=ew.manager_name)||void 0===c?void 0:c.trim())||"",operating_hours:""},s=await w.x.createClientLocation(p.id,e);console.log("✅ Location created successfully:",s),alert("Location created successfully!")}eO(),ee(!1),eQ()}catch(e){console.error("❌ Error saving location:",e),alert("Error saving location")}},eR=async()=>{if(eo.trim()){eh(!0);try{let e=await w.x.searchPlaces(eo,"Miami, FL");e.success?em(e.data||[]):(console.error("Search failed:",e.error),em([]))}catch(e){console.error("Search error:",e),em([])}finally{eh(!1)}}},eV=e=>{eg(e);let s=function(e){let s={street_address:"",city:"",state:"",zip_code:"",country:"US"};if(e.address_components){let a="",t="",l="",r="";e.address_components.forEach(e=>{let i=e.types;i.includes("street_number")&&(a=e.long_name),i.includes("route")&&(t=e.long_name),i.includes("subpremise")&&(l=e.long_name),i.includes("premise")&&(r=e.long_name),i.includes("locality")&&(s.city=e.long_name),i.includes("administrative_area_level_1")&&(s.state=e.short_name),i.includes("postal_code")&&(s.zip_code=e.long_name),i.includes("country")&&(s.country=e.short_name)});let i=[];a&&t?i.push("".concat(a," ").concat(t)):t&&i.push(t),r&&i.push(r),l&&(l.toLowerCase().includes("suite")||l.toLowerCase().includes("apt")||l.toLowerCase().includes("unit")||l.toLowerCase().includes("#")||(l=/^\d+$/.test(l)&&parseInt(l)>50?"Suite ".concat(l):/^\d+[A-Za-z]$/.test(l)||50>=parseInt(l)?"Apt ".concat(l):"Unit ".concat(l)),i.push(l)),s.street_address=i.join(", ")}return s}(e);eC(a=>({...a,location_name:e.name,place_id:e.place_id,address:s.street_address,city:s.city,state:s.state,postal_code:s.zip_code,country:s.country})),ej(!1)},eM=e=>{ea(e),eC({id:e.id,location_name:e.location_name||"",address:e.address||"",city:e.city||"",state:e.state||"",country:e.country||"USA",postal_code:e.postal_code||"",phone:e.phone||"",manager_name:e.manager_name||"",manager_email:e.manager_email||"",is_primary:e.is_primary||!1,place_id:e.place_id||""}),ee(!0)},eB=async e=>{if(confirm("Are you sure you want to delete this location?"))try{let s={};(null==j?void 0:j.email)&&(s["x-user-email"]=j.email);let a=await fetch("/api/clients/".concat(p.id,"/locations/").concat(e),{method:"DELETE",headers:s});if(a.ok)eQ();else{let e=await a.json();alert("Failed to delete location: ".concat(e.error))}}catch(e){console.error("Error deleting location:",e),alert("Error deleting location")}},eO=()=>{ea(null),eC({id:null,location_name:"",address:"",city:"",state:"",country:"USA",postal_code:"",phone:"",manager_name:"",manager_email:"",is_primary:!1,place_id:""}),eg(null),ed(""),em([]),ej(!0)},eT=e=>{ei(e),eZ({email:e.email||e.user_email||"",full_name:e.full_name||e.user_name||"",role:e.role||e.user_role||"client_admin",status:e.status||"active",reset_password:!1,new_password:""}),el(!0)},eY=async()=>{if(!ek.email.trim()||!ek.full_name.trim()){alert("Email and full name are required");return}try{let e={email:ek.email.trim(),full_name:ek.full_name.trim(),role:ek.role,status:ek.status},s=ek.new_password&&ek.new_password.trim(),a=ek.reset_password;(s||a)&&(e.reset_password=!0),s&&(e.new_password=ek.new_password.trim()),console.log("\uD83D\uDD0D Updating user with data:",{...e,new_password:e.new_password?"[REDACTED]":void 0});let t=await w.x.updateClientUser(p.id,er.id,e);console.log("✅ User updated successfully:",t),eL(),el(!1),eK(),alert("User updated successfully!")}catch(e){console.error("❌ Error updating user:",e),alert("Error updating user")}},eq=async e=>{if(confirm("Are you sure you want to deactivate ".concat(e.full_name||e.user_name,"?")))try{console.log("\uD83D\uDD0D Deactivating user:",e.id),await w.x.deleteClientUser(p.id,e.id),console.log("✅ User deactivated successfully"),eL(),alert("User deactivated successfully!")}catch(e){console.error("❌ Error deactivating user:",e),alert("Error deactivating user")}},eW=async e=>{if(confirm("Are you sure you want to reactivate ".concat(e.full_name||e.user_name,"?")))try{console.log("\uD83D\uDD0D Reactivating user:",e.id);let s=await w.x.updateClientUser(p.id,e.id,{email:e.email,full_name:e.full_name,role:e.role,status:"active"});console.log("✅ User reactivated successfully:",s),eL(),alert("User reactivated successfully!")}catch(e){console.error("❌ Error reactivating user:",e),alert("Error reactivating user")}},eK=()=>{ei(null),eZ({email:"",full_name:"",role:"client_admin",status:"active",reset_password:!1,new_password:""})},e$=(e,s)=>{eb(a=>({...a,[e]:s}))},eH=(e,s)=>{eC(a=>({...a,[e]:s}))},eJ=async e=>{e.preventDefault(),_(!0);try{let e={business_name:eN.business_name,contact_name:eN.contact_name,contact_email:eN.contact_email,phone:eN.phone,website:eN.website,business_type:eN.business_type,claim_status:eN.claim_status,security_level:eN.security_level,sales_rep_id:eN.sales_rep_id&&"unassigned"!==eN.sales_rep_id?parseInt(eN.sales_rep_id):null};console.log("\uD83D\uDD04 Updating client with:",e);let s=await w.x.updateClient(p.id,e);s.success?(console.log("✅ Client updated successfully:",s),alert("Client updated successfully!"),g(),a()):(console.error("❌ Failed to update client:",s),alert("Failed to update client: ".concat(s.error)))}catch(e){console.error("Error updating client:",e),alert("Error updating client")}finally{_(!1)}},eX=async()=>{if(!eD.user_name.trim()||!eD.user_email.trim()){alert("Please fill in all required fields");return}try{console.log("\uD83D\uDD0D Creating user with data:",{email:eD.user_email,full_name:eD.user_name,role:eD.user_role,client_id:p.id});let e={email:eD.user_email.trim(),full_name:eD.user_name.trim(),role:eD.user_role,temporary_password:eD.temporary_password.trim(),create_firebase_account:!0},s=await w.x.createClientUser(p.id,e);console.log("✅ API Response:",s),s.success?(setTimeout(()=>{eL()},500),J(!1),eS({user_email:"",user_name:"",user_role:"client_admin",temporary_password:""}),alert("User created successfully! ".concat(s.message))):(console.error("❌ API Error:",s),alert("Failed to create user: ".concat(s.error||"Unknown error")))}catch(e){console.error("❌ Network Error:",e),alert("Network error creating user. Please check your connection and try again.")}};return p?(0,t.jsx)(C.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(C.cZ,{className:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(C.fK,{children:[(0,t.jsxs)(C.$N,{className:"flex items-center gap-3",children:[(0,t.jsx)(c.Z,{className:"h-5 w-5"}),p.business_name,(0,t.jsx)(Z.C,{variant:"verified"===p.claim_status?"default":"secondary",children:"verified"===p.claim_status?"Verified":p.claim_status||"Unclaimed"}),(0,t.jsx)(Z.C,{variant:"verified"===p.security_level?"default":"flagged"===p.security_level?"destructive":"secondary",children:p.security_level||"Pending"})]}),(0,t.jsx)(C.Be,{children:"Manage client information, locations, users, and activities"})]}),(0,t.jsxs)(A.mQ,{defaultValue:"details",className:"w-full",children:[(0,t.jsxs)(A.dr,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(A.SP,{value:"details",children:"Details"}),(0,t.jsx)(A.SP,{value:"locations",children:"Locations"}),(0,t.jsx)(A.SP,{value:"users",children:"Users"}),(0,t.jsx)(A.SP,{value:"activities",children:"Activities"})]}),(0,t.jsx)(A.nU,{value:"details",className:"space-y-4",children:(0,t.jsxs)("form",{onSubmit:eJ,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"business_name",children:"Business Name"}),(0,t.jsx)(n.I,{id:"business_name",value:eN.business_name,onChange:e=>e$("business_name",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"contact_name",children:"Contact Name"}),(0,t.jsx)(n.I,{id:"contact_name",value:eN.contact_name,onChange:e=>e$("contact_name",e.target.value),required:!0})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"contact_email",children:"Contact Email"}),(0,t.jsx)(n.I,{id:"contact_email",type:"email",value:eN.contact_email,onChange:e=>e$("contact_email",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"phone",children:"Phone"}),(0,t.jsx)(n.I,{id:"phone",value:eN.phone,onChange:e=>e$("phone",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"website",children:"Website"}),(0,t.jsx)(n.I,{id:"website",value:eN.website,onChange:e=>e$("website",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"business_type",children:"Industry"}),(0,t.jsxs)(k.Ph,{value:eN.business_type||void 0,onValueChange:e=>e$("business_type",e||""),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{placeholder:"Select industry"})}),(0,t.jsx)(k.Bw,{children:B.filter(e=>e.id&&e.name).map(e=>(0,t.jsx)(k.Ql,{value:e.name,children:e.name},e.id))})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"claim_status",children:"Claim Status"}),(0,t.jsxs)(k.Ph,{value:eN.claim_status,onValueChange:e=>e$("claim_status",e),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{})}),(0,t.jsxs)(k.Bw,{children:[(0,t.jsx)(k.Ql,{value:"unclaimed",children:"Unclaimed"}),(0,t.jsx)(k.Ql,{value:"pending",children:"Pending"}),(0,t.jsx)(k.Ql,{value:"claimed",children:"Claimed"}),(0,t.jsx)(k.Ql,{value:"verified",children:"Verified"}),(0,t.jsx)(k.Ql,{value:"rejected",children:"Rejected"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"security_level",children:"Security Level"}),(0,t.jsxs)(k.Ph,{value:eN.security_level,onValueChange:e=>e$("security_level",e),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{})}),(0,t.jsxs)(k.Bw,{children:[(0,t.jsx)(k.Ql,{value:"pending",children:"Pending"}),(0,t.jsx)(k.Ql,{value:"verified",children:"Verified"}),(0,t.jsx)(k.Ql,{value:"flagged",children:"Flagged"}),(0,t.jsx)(k.Ql,{value:"suspended",children:"Suspended"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"sales_rep_id",children:"Sales Representative"}),(0,t.jsxs)(k.Ph,{value:eN.sales_rep_id||void 0,onValueChange:e=>e$("sales_rep_id",e||""),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{placeholder:"Select sales rep"})}),(0,t.jsxs)(k.Bw,{children:[(0,t.jsx)(k.Ql,{value:"unassigned",children:"Unassigned"}),T.map(e=>(0,t.jsxs)(k.Ql,{value:e.id.toString(),children:[e.full_name," - ",e.role]},e.id))]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"business_description",children:"Business Description"}),(0,t.jsx)(S.g,{id:"business_description",value:eN.business_description,onChange:e=>e$("business_description",e.target.value),rows:3})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"notes",children:"Notes"}),(0,t.jsx)(S.g,{id:"notes",value:eN.notes,onChange:e=>e$("notes",e.target.value),rows:3})]}),(0,t.jsxs)(C.cN,{children:[(0,t.jsx)(i.z,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),(0,t.jsx)(i.z,{type:"submit",disabled:f,children:f?"Saving...":"Save Changes"})]})]})}),(0,t.jsxs)(A.nU,{value:"locations",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Business Locations"}),(0,t.jsxs)(i.z,{size:"sm",onClick:()=>{eO(),ee(!0)},children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Add Location"]})]}),K?(0,t.jsx)("div",{className:"text-center py-4",children:"Loading locations..."}):(0,t.jsx)("div",{className:"space-y-4",children:0===q.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(x.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No locations found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Add your first business location to get started."}),(0,t.jsxs)(i.z,{onClick:()=>{eO(),ee(!0)},children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Add First Location"]})]}):q.map(e=>(0,t.jsx)(r.Zb,{className:e.is_primary?"border-blue-500":"",children:(0,t.jsx)(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:e.location_name}),e.is_primary&&(0,t.jsx)(Z.C,{variant:"default",className:"text-xs",children:"Primary"}),(0,t.jsx)(Z.C,{variant:"outline",className:"text-xs",children:e.status})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Z,{className:"h-3 w-3"}),e.address]}),(0,t.jsxs)("div",{children:[e.city,", ",e.state," ",e.postal_code]}),e.phone&&(0,t.jsxs)("div",{children:["\uD83D\uDCDE ",e.phone]}),e.manager_name&&(0,t.jsxs)("div",{children:["\uD83D\uDC64 Manager: ",e.manager_name]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>eM(e),children:(0,t.jsx)(L.Z,{className:"h-3 w-3"})}),!e.is_primary&&(0,t.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>eB(e.id),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(F.Z,{className:"h-3 w-3"})})]})]})})},e.id))}),(0,t.jsx)(C.Vq,{open:X,onOpenChange:ee,children:(0,t.jsxs)(C.cZ,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(C.fK,{children:[(0,t.jsx)(C.$N,{children:es?"Edit Location":"Add New Location"}),(0,t.jsx)(C.Be,{children:es?"Update location information":"Search for a business or enter details manually to add a new location."})]}),!es&&ev?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.I,{placeholder:"Search for business location (e.g., 'Miami Beach Restaurant')",value:eo,onChange:e=>ed(e.target.value),onKeyPress:e=>"Enter"===e.key&&eR()}),(0,t.jsxs)(i.z,{onClick:eR,disabled:ex,children:[(0,t.jsx)(d.Z,{className:"h-4 w-4"}),ex?"Searching...":"Search"]})]}),eu.length>0&&(0,t.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(0,t.jsx)(D._,{children:"Search Results:"}),eu.map(e=>(0,t.jsx)(r.Zb,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>eV(e),children:(0,t.jsx)(r.aY,{className:"p-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[(0,t.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),e.formatted_address]}),e.rating&&(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[(0,t.jsx)(E.Z,{className:"h-3 w-3 mr-1 fill-yellow-400 text-yellow-400"}),e.rating," (",e.user_ratings_total," reviews)"]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.types.slice(0,3).join(", ")})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.business_status})]})})},e.place_id))]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(i.z,{variant:"outline",onClick:()=>ej(!1),children:"Enter Location Details Manually"})})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[ep&&(0,t.jsx)(r.Zb,{className:"bg-green-50 border-green-200",children:(0,t.jsx)(r.aY,{className:"p-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-green-800",children:"Selected Location:"}),(0,t.jsx)("p",{className:"text-green-700",children:ep.name}),(0,t.jsx)("p",{className:"text-sm text-green-600",children:ep.formatted_address})]}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ej(!0),children:"Change"})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"location_name",children:"Location Name *"}),(0,t.jsx)(n.I,{id:"location_name",value:ew.location_name,onChange:e=>eH("location_name",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"location_phone",children:"Phone"}),(0,t.jsx)(n.I,{id:"location_phone",value:ew.phone,onChange:e=>eH("phone",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"address",children:"Address *"}),(0,t.jsx)(n.I,{id:"address",value:ew.address,onChange:e=>eH("address",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"city",children:"City *"}),(0,t.jsx)(n.I,{id:"city",value:ew.city,onChange:e=>eH("city",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"state",children:"State"}),(0,t.jsxs)(k.Ph,{value:ew.state,onValueChange:e=>eH("state",e),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{placeholder:"Select state"})}),(0,t.jsx)(k.Bw,{children:P.map(e=>(0,t.jsx)(k.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"postal_code",children:"Postal Code"}),(0,t.jsx)(n.I,{id:"postal_code",value:ew.postal_code,onChange:e=>eH("postal_code",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"manager_name",children:"Manager Name"}),(0,t.jsx)(n.I,{id:"manager_name",value:ew.manager_name,onChange:e=>eH("manager_name",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"manager_email",children:"Manager Email"}),(0,t.jsx)(n.I,{id:"manager_email",type:"email",value:ew.manager_email,onChange:e=>eH("manager_email",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"is_primary",checked:ew.is_primary,onChange:e=>eH("is_primary",e.target.checked),className:"rounded"}),(0,t.jsx)(D._,{htmlFor:"is_primary",children:"Set as primary location"})]}),(0,t.jsxs)(C.cN,{children:[!es&&(0,t.jsx)(i.z,{variant:"outline",onClick:()=>ej(!0),children:"Back to Search"}),(0,t.jsx)(i.z,{variant:"outline",onClick:()=>{ee(!1),eO()},children:"Cancel"}),(0,t.jsx)(i.z,{onClick:e=>{e.preventDefault(),eG(e)},children:es?"Update Location":"Add Location"})]})]})]})})]}),(0,t.jsxs)(A.nU,{value:"users",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Client Users"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"show_inactive",checked:en,onChange:e=>ec(e.target.checked),className:"rounded"}),(0,t.jsx)(D._,{htmlFor:"show_inactive",className:"text-sm text-gray-600",children:"Show inactive users"})]}),(0,t.jsxs)(i.z,{size:"sm",onClick:()=>J(!0),children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]}),V?(0,t.jsx)("div",{className:"text-center py-4",children:"Loading users..."}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:["Found ",G.length," total user(s)",!en&&G.filter(e=>"inactive"===e.status).length>0&&(0,t.jsxs)("span",{className:"ml-2 text-blue-600",children:["(",G.filter(e=>"inactive"===e.status).length," inactive hidden)"]}),en&&(0,t.jsx)("span",{className:"ml-2 text-green-600",children:"(showing all users including inactive)"})]}),0===G.filter(e=>en||"inactive"!==e.status).length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(u.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:0===G.length?"No users found":"No active users found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:0===G.length?"Add your first client user to get started.":"All users are inactive. Toggle 'Show inactive users' to see them."}),(0,t.jsxs)(i.z,{onClick:()=>J(!0),children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Add First User"]})]}):G.filter(e=>"inactive"!==e.status||en).map(e=>(0,t.jsx)(r.Zb,{children:(0,t.jsx)(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.full_name||e.user_name}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.email||e.user_email}),e.firebase_uid&&(0,t.jsx)("div",{className:"text-xs text-green-600",children:"✓ Firebase Account"}),e.created_by_name&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Created by: ",e.created_by_name]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Z.C,{variant:"outline",children:e.role||e.user_role}),(0,t.jsx)(Z.C,{variant:"active"===e.status?"default":"secondary",className:"text-xs",children:e.status||"active"})]}),(0,t.jsxs)("div",{className:"flex gap-1 mt-2",children:[(0,t.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>eT(e),className:"h-8 px-2",disabled:"inactive"===e.status,children:(0,t.jsx)(L.Z,{className:"h-3 w-3"})}),"active"===e.status?(0,t.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>eq(e),className:"h-8 px-2 text-red-600 hover:text-red-700",children:(0,t.jsx)(F.Z,{className:"h-3 w-3"})}):(0,t.jsx)(i.z,{size:"sm",variant:"outline",onClick:()=>eW(e),className:"h-8 px-2 text-green-600 hover:text-green-700",title:"Reactivate user",children:(0,t.jsx)(u.Z,{className:"h-3 w-3"})})]})]})]})})},e.id||e.firebase_uid))]}),(0,t.jsx)(C.Vq,{open:H,onOpenChange:J,children:(0,t.jsxs)(C.cZ,{children:[(0,t.jsxs)(C.fK,{children:[(0,t.jsx)(C.$N,{children:"Add New User"}),(0,t.jsx)(C.Be,{children:"Create a new user account for this client"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"user_name",children:"Full Name"}),(0,t.jsx)(n.I,{id:"user_name",value:eD.user_name,onChange:e=>eS({...eD,user_name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"user_email",children:"Email"}),(0,t.jsx)(n.I,{id:"user_email",type:"email",value:eD.user_email,onChange:e=>eS({...eD,user_email:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"user_role",children:"Role"}),(0,t.jsxs)(k.Ph,{value:eD.user_role,onValueChange:e=>eS({...eD,user_role:e}),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{})}),(0,t.jsxs)(k.Bw,{children:[(0,t.jsx)(k.Ql,{value:"client_admin",children:"Admin"}),(0,t.jsx)(k.Ql,{value:"client_moderator",children:"Moderator"}),(0,t.jsx)(k.Ql,{value:"client_user",children:"User"}),(0,t.jsx)(k.Ql,{value:"client_viewer",children:"Viewer"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"temporary_password",children:"Temporary Password"}),(0,t.jsx)(n.I,{id:"temporary_password",type:"password",value:eD.temporary_password,onChange:e=>eS({...eD,temporary_password:e.target.value}),placeholder:"Leave empty to auto-generate"})]})]}),(0,t.jsxs)(C.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),(0,t.jsx)(i.z,{onClick:eX,children:"Create User"})]})]})}),(0,t.jsx)(C.Vq,{open:et,onOpenChange:el,children:(0,t.jsxs)(C.cZ,{children:[(0,t.jsxs)(C.fK,{children:[(0,t.jsx)(C.$N,{children:"Edit User"}),(0,t.jsx)(C.Be,{children:"Update user information and permissions"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"edit_full_name",children:"Full Name"}),(0,t.jsx)(n.I,{id:"edit_full_name",value:ek.full_name,onChange:e=>eZ({...ek,full_name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"edit_email",children:"Email"}),(0,t.jsx)(n.I,{id:"edit_email",type:"email",value:ek.email,onChange:e=>eZ({...ek,email:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"edit_role",children:"Role"}),(0,t.jsxs)(k.Ph,{value:ek.role,onValueChange:e=>eZ({...ek,role:e}),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{})}),(0,t.jsxs)(k.Bw,{children:[(0,t.jsx)(k.Ql,{value:"client_admin",children:"Admin"}),(0,t.jsx)(k.Ql,{value:"client_moderator",children:"Moderator"}),(0,t.jsx)(k.Ql,{value:"client_user",children:"User"}),(0,t.jsx)(k.Ql,{value:"client_viewer",children:"Viewer"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"edit_status",children:"Status"}),(0,t.jsxs)(k.Ph,{value:ek.status,onValueChange:e=>eZ({...ek,status:e}),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{})}),(0,t.jsxs)(k.Bw,{children:[(0,t.jsx)(k.Ql,{value:"active",children:"Active"}),(0,t.jsx)(k.Ql,{value:"inactive",children:"Inactive"}),(0,t.jsx)(k.Ql,{value:"suspended",children:"Suspended"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"reset_password",checked:ek.reset_password,onChange:e=>eZ({...ek,reset_password:e.target.checked}),className:"rounded"}),(0,t.jsxs)(D._,{htmlFor:"reset_password",className:"flex items-center gap-1",children:[(0,t.jsx)(z.Z,{className:"h-3 w-3"}),"Force password reset on next login"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"new_password",children:"Set New Password (Optional)"}),(0,t.jsx)(n.I,{id:"new_password",type:"password",value:ek.new_password,onChange:e=>eZ({...ek,new_password:e.target.value}),placeholder:"Leave empty to keep current password"})]})]})]}),(0,t.jsxs)(C.cN,{children:[(0,t.jsx)(i.z,{variant:"outline",onClick:()=>{el(!1),eK()},children:"Cancel"}),(0,t.jsx)(i.z,{onClick:eY,children:"Save Changes"})]})]})})]}),(0,t.jsxs)(A.nU,{value:"activities",className:"space-y-4",children:[(0,t.jsxs)(r.Zb,{children:[(0,t.jsx)(r.Ol,{children:(0,t.jsxs)(r.ll,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4"}),"Add New Activity"]})}),(0,t.jsx)(r.aY,{className:"space-y-3",children:(0,t.jsxs)("form",{onSubmit:eU,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"activity_type",children:"Activity Type"}),(0,t.jsxs)(k.Ph,{value:ef.activity_type,onValueChange:e=>eP("activity_type",e),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{})}),(0,t.jsxs)(k.Bw,{children:[(0,t.jsx)(k.Ql,{value:"call",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 text-green-500"}),"Phone Call"]})}),(0,t.jsx)(k.Ql,{value:"email",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.Z,{className:"h-4 w-4 text-blue-500"}),"Email"]})}),(0,t.jsx)(k.Ql,{value:"meeting",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 text-purple-500"}),"Meeting"]})}),(0,t.jsx)(k.Ql,{value:"note",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 text-gray-500"}),"Note"]})}),(0,t.jsx)(k.Ql,{value:"follow_up",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 text-yellow-500"}),"Follow Up"]})}),(0,t.jsx)(k.Ql,{value:"support",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 text-blue-500"}),"Support"]})}),(0,t.jsx)(k.Ql,{value:"proposal",children:"Proposal"}),(0,t.jsx)(k.Ql,{value:"contract",children:"Contract"}),(0,t.jsx)(k.Ql,{value:"payment",children:"Payment"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"priority",children:"Priority"}),(0,t.jsxs)(k.Ph,{value:ef.priority,onValueChange:e=>eP("priority",e),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{placeholder:"Select priority"})}),(0,t.jsxs)(k.Bw,{children:[(0,t.jsx)(k.Ql,{value:"low",children:"Low"}),(0,t.jsx)(k.Ql,{value:"medium",children:"Medium"}),(0,t.jsx)(k.Ql,{value:"high",children:"High"}),(0,t.jsx)(k.Ql,{value:"urgent",children:"Urgent"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"subject",children:"Subject *"}),(0,t.jsx)(n.I,{id:"subject",value:ef.subject,onChange:e=>eP("subject",e.target.value),placeholder:"Brief description of activity",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"description",children:"Description"}),(0,t.jsx)(S.g,{id:"description",value:ef.description,onChange:e=>eP("description",e.target.value),rows:3,placeholder:"Detailed notes about the activity, outcome, next steps..."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"outcome",children:"Outcome"}),(0,t.jsxs)(k.Ph,{value:ef.outcome,onValueChange:e=>eP("outcome",e),children:[(0,t.jsx)(k.i4,{className:"bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{placeholder:"Select outcome"})}),(0,t.jsxs)(k.Bw,{children:[(0,t.jsx)(k.Ql,{value:"",children:"No outcome selected"}),(0,t.jsx)(k.Ql,{value:"positive",children:"Positive"}),(0,t.jsx)(k.Ql,{value:"neutral",children:"Neutral"}),(0,t.jsx)(k.Ql,{value:"negative",children:"Negative"}),(0,t.jsx)(k.Ql,{value:"no_response",children:"No Response"}),(0,t.jsx)(k.Ql,{value:"completed",children:"Completed"}),(0,t.jsx)(k.Ql,{value:"pending",children:"Pending"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"scheduled_for",children:"Scheduled For"}),(0,t.jsx)(n.I,{id:"scheduled_for",type:"datetime-local",value:ef.scheduled_for,onChange:e=>eP("scheduled_for",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(D._,{htmlFor:"next_action",children:"Next Action"}),(0,t.jsx)(n.I,{id:"next_action",value:ef.next_action,onChange:e=>eP("next_action",e.target.value),placeholder:"What should be done next?"})]}),(0,t.jsxs)(i.z,{type:"submit",disabled:!ef.subject.trim(),className:"w-full",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})})]}),(0,t.jsxs)(r.Zb,{children:[(0,t.jsx)(r.Ol,{children:(0,t.jsxs)(r.ll,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4"}),"Activity History (",y.length,")"]})}),(0,t.jsx)(r.aY,{children:b?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading activities..."})]}):0===y.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(h.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{className:"font-medium",children:"No activities recorded yet"}),(0,t.jsx)("p",{className:"text-sm",children:"Start by adding an activity above to track your client interactions."})]}):(0,t.jsx)("div",{className:"space-y-4",children:y.map(e=>(0,t.jsxs)("div",{className:"border-l-4 border-blue-200 pl-4 py-3 bg-gray-50 rounded-r-lg",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[eE(e.activity_type),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.subject}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"h-3 w-3"}),e.employee_name,(0,t.jsx)("span",{children:"•"}),(0,t.jsx)(h.Z,{className:"h-3 w-3"}),new Date(e.completed_at||e.created_at).toLocaleString()]})]})]}),(0,t.jsx)(Z.C,{variant:"outline",className:"text-xs capitalize",children:e.activity_type.replace("_"," ")})]}),e.description&&(0,t.jsx)("div",{className:"text-sm text-gray-700 mt-2 pl-6",children:e.description}),e.outcome&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-1 pl-6",children:[(0,t.jsx)("strong",{children:"Outcome:"})," ",e.outcome]}),e.next_action&&(0,t.jsxs)("div",{className:"text-xs text-blue-600 mt-1 pl-6",children:[(0,t.jsx)("strong",{children:"Next Action:"})," ",e.next_action]})]},e.id))})})]})]})]})]})}):null}var G=a(724),R=a(3301);let V=new Map;async function M(){try{let e=(0,R.v0)().currentUser;if(!e)return console.warn("⚠️ No authenticated user for GCSG request"),null;let s=await e.getIdToken();return console.log("\uD83D\uDD11 Firebase token obtained for GCSG request"),s}catch(e){return console.error("❌ Error getting Firebase token:",e),null}}async function B(e){if(!e||""===e.trim())return{score:null,cached:!1,error:"No place ID provided"};let s=e.trim(),a=Date.now(),t=V.get(s);if(t&&a-t.timestamp<144e5)return console.log("\uD83D\uDCCB GCSG cache hit for place ID: ".concat(e)),{score:t.score,cached:!0};try{console.log("\uD83C\uDF10 Fetching GCSG score for place ID: ".concat(e));let t=await M();if(!t)return{score:null,cached:!1,error:"Authentication required"};let l=await fetch("".concat("https://gladgrade-api-360532994710.us-east4.run.app","/api/businesses/gcsg-score?placeId=").concat(encodeURIComponent(e),"&indexed=true"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},signal:AbortSignal.timeout(1e4)});if(!l.ok){if(console.warn("⚠️ GCSG API returned ".concat(l.status," for place ID: ").concat(e)),401===l.status)return{score:null,cached:!1,error:"Authentication failed - please refresh the page"};return V.set(s,{score:null,timestamp:a,placeId:e}),{score:null,cached:!1,error:"API returned ".concat(l.status)}}let r=await l.json(),i="number"==typeof r.averageRating?r.averageRating:null;return V.set(s,{score:i,timestamp:a,placeId:e}),console.log("✅ GCSG score fetched and cached: ".concat(i," for place ID: ").concat(e)),{score:i,cached:!1}}catch(l){console.error("❌ Error fetching GCSG score for place ID ".concat(e,":"),l),V.set(s,{score:null,timestamp:a,placeId:e});let t=l instanceof Error?l.message:"Unknown error";if(t.includes("timeout")||t.includes("aborted"))return{score:null,cached:!1,error:"Request timeout - please try again"};return{score:null,cached:!1,error:t}}}async function O(e){let s=e.filter(e=>e&&""!==e.trim());if(0===s.length)return new Map;console.log("\uD83D\uDD0D Fetching GCSG scores for ".concat(s.length," place IDs"));let a=s.map(async e=>{let s=await B(e);return[e,s]});return new Map(await Promise.all(a))}var T=a(7648);function Y(){let{role:e,user:s}=(0,U.a)(),[a,C]=(0,l.useState)(""),[D,S]=(0,l.useState)(!0),[Z,A]=(0,l.useState)([]),[I,L]=(0,l.useState)(null),[F,E]=(0,l.useState)(!1),[z,P]=(0,l.useState)("business_name"),[M,B]=(0,l.useState)("asc"),[Y,q]=(0,l.useState)("all"),[W,K]=(0,l.useState)("all"),[$,H]=(0,l.useState)(!1),[J,X]=(0,l.useState)(new Map),[ee,es]=(0,l.useState)(!1),[ea,et]=(0,l.useState)({}),[el,er]=(0,l.useState)(!1),[ei,en]=(0,l.useState)(!1),[ec,eo]=(0,l.useState)(null),ed=async e=>{er(!0);try{let s=e.filter(e=>e.place_id).map(e=>e.place_id);if(s.length>0){console.log("\uD83D\uDCCA Loading review counts for ".concat(s.length," clients with place IDs"));let e={"Content-Type":"application/json"},a=(0,R.v0)().currentUser;if(a){let s=await a.getIdToken();e.Authorization="Bearer ".concat(s)}let t=await fetch("/api/gcloud-proxy/review-counts-bulk",{method:"POST",headers:e,body:JSON.stringify({placeIds:s})});if(t.ok){let e=await t.json();et(e.data||{}),console.log("✅ Loaded review counts for ".concat(Object.keys(e.data||{}).length," places"))}else console.error("Failed to load review counts:",t.status),et({})}else console.log("ℹ️ No clients have place IDs for review lookup"),et({})}catch(e){console.error("❌ Error loading review counts:",e),et({})}finally{er(!1)}},eu=async e=>{es(!0);try{!function(){let e=Date.now(),s=0;for(let[a,t]of V.entries())e-t.timestamp>=144e5&&(V.delete(a),s++);s>0&&console.log("\uD83E\uDDF9 Cleaned ".concat(s," expired GCSG cache entries"))}();let s=e.filter(e=>e.place_id).map(e=>e.place_id);if(s.length>0){console.log("\uD83C\uDFAF Loading GCSG scores for ".concat(s.length," clients with place IDs"));let e=await O(s);X(e),console.log("✅ Loaded ".concat(e.size," GCSG scores"))}else console.log("ℹ️ No clients have place IDs for GCSG lookup"),X(new Map)}catch(e){console.error("❌ Error loading GCSG scores:",e),X(new Map)}finally{es(!1)}},em=e=>{if(!e.place_id)return{count:"N/A",className:"text-muted-foreground",tooltip:"No Place ID available"};if(el)return{count:"...",className:"text-muted-foreground",tooltip:"Loading review count"};let s=ea[e.place_id];return s?{count:s.total_reviews.toString(),className:s.total_reviews>0?"text-primary hover:text-primary/80 cursor-pointer":"text-muted-foreground",tooltip:"".concat(s.total_reviews," reviews • Avg: ").concat(s.average_rating||"N/A"," • Recent: ").concat(s.recent_reviews)}:{count:"0",className:"text-muted-foreground",tooltip:"No reviews found"}},ex=e=>{if(!e.place_id)return{score:"N/A",className:"text-muted-foreground",tooltip:"No Place ID available"};if(ee)return{score:"...",className:"text-muted-foreground",tooltip:"Loading GCSG score"};let s=J.get(e.place_id);if(!s)return{score:"N/A",className:"text-muted-foreground",tooltip:"GCSG score not available"};if(s.error)return{score:"Error",className:"text-red-500 dark:text-red-400",tooltip:"Error: ".concat(s.error)};if(null===s.score)return{score:"N/A",className:"text-muted-foreground",tooltip:"No GCSG score found"};let a="text-muted-foreground";a=s.score>=800?"text-green-600 dark:text-green-400 font-semibold":s.score>=700?"text-green-500 dark:text-green-400":s.score>=600?"text-yellow-600 dark:text-yellow-400":s.score>=500?"text-orange-500 dark:text-orange-400":"text-red-500 dark:text-red-400";let t="GCSG Score: ".concat(s.score).concat(s.cached?" (cached)":"");return{score:s.score.toString(),className:a,tooltip:t}};(0,l.useEffect)(()=>{eh()},[]);let eh=async()=>{S(!0);try{console.log("\uD83D\uDCCA Loading business clients...");let e=await w.x.getClients();e.success&&(A(e.data),console.log("✅ Clients loaded:",e.data.length),await Promise.all([eu(e.data),ed(e.data)]))}catch(e){console.error("❌ Error loading clients:",e)}finally{S(!1)}},ep=e=>{L(e),E(!0)},eg=e=>{eo(e),en(!0)},ev=Z.filter(e=>{var s,t,l,r;if(!$&&!e.isactive)return!1;let i=(null===(s=e.business_name)||void 0===s?void 0:s.toLowerCase().includes(a.toLowerCase()))||(null===(t=e.contact_name)||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null===(l=e.contact_email)||void 0===l?void 0:l.toLowerCase().includes(a.toLowerCase()))||(null===(r=e.business_address)||void 0===r?void 0:r.toLowerCase().includes(a.toLowerCase())),n="all"===Y||e.industry_category_name===Y,c="all"===W||"verified"===W&&e.isverified||"active"===W&&e.isactive||"pending"===W&&!e.isverified;return i&&n&&c}).sort((e,s)=>{let a=e[z],t=s[z];return("datecreated"===z&&(a=new Date(a).getTime(),t=new Date(t).getTime()),"string"==typeof a&&(a=a.toLowerCase(),t=t.toLowerCase()),"asc"===M)?a>t?1:-1:a<t?1:-1});return([...new Set(Z.map(e=>e.industry_category_name).filter(Boolean))],D)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading business clients..."})]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Business Clients"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("span",{className:"text-sm text-primary",children:"GladGrade Portal Management"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.z,{variant:"outline",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Claim Business"]}),(0,t.jsx)(i.z,{variant:"outline",onClick:()=>{eu(Z),ed(Z)},disabled:ee||el,children:ee||el?"Loading...":"Refresh Data"})]})]}),(0,t.jsx)(r.Zb,{className:"border-border",children:(0,t.jsx)(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,t.jsx)(n.I,{placeholder:"Search by business name, contact, email, or address...",value:a,onChange:e=>C(e.target.value),className:"pl-10 bg-background text-foreground border-border"})]})}),(0,t.jsxs)(k.Ph,{value:W,onValueChange:K,children:[(0,t.jsx)(k.i4,{className:"w-48 bg-background text-foreground border-border",children:(0,t.jsx)(k.ki,{placeholder:"Filter by status"})}),(0,t.jsxs)(k.Bw,{className:"bg-white border-gray-300",children:[(0,t.jsx)(k.Ql,{value:"all",className:"text-black hover:bg-gray-100",children:"All Businesses"}),(0,t.jsx)(k.Ql,{value:"verified",className:"text-black hover:bg-gray-100",children:"Verified"}),(0,t.jsx)(k.Ql,{value:"active",className:"text-black hover:bg-gray-100",children:"Active"}),(0,t.jsx)(k.Ql,{value:"pending",className:"text-black hover:bg-gray-100",children:"Pending"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"showInactive",checked:$,onChange:e=>H(e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("label",{htmlFor:"showInactive",className:"text-sm text-foreground",children:"Show Inactive"})]})]})})}),(0,t.jsx)("div",{className:"space-y-4",children:ev.map(e=>{var s;let a=em(e),l=ex(e);return(0,t.jsx)(r.Zb,{className:"hover:shadow-md transition-shadow border-border",children:(0,t.jsxs)(r.aY,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary/20 rounded-lg flex items-center justify-center",children:(0,t.jsx)(c.Z,{className:"h-6 w-6 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:e.business_name||"Unnamed Business"}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[e.contact_name&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:e.contact_name})]}),e.contact_email&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:e.contact_email})]}),e.phone&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:e.phone})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[e.business_address&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Z,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[e.business_address,e.city&&", ".concat(e.city),e.state&&", ".concat(e.state)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.Z,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:["Created ",new Date(e.created_at).toLocaleDateString()]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold ".concat(l.className),title:l.tooltip,children:l.score}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["GCSG Score",e.place_id&&(null===(s=J.get(e.place_id))||void 0===s?void 0:s.cached)&&(0,t.jsx)("span",{className:"text-primary ml-1",title:"Cached result",children:"\uD83D\uDCCB"})]})]}),(0,t.jsxs)("div",{className:"text-center",children:[e.place_id&&"N/A"!==a.count&&"..."!==a.count?(0,t.jsx)(T.default,{href:"/dashboard/reviews?clientId=".concat(e.id,"&placeId=").concat(e.place_id),className:a.className,title:a.tooltip,children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-semibold",children:a.count}),(0,t.jsx)(g.Z,{className:"h-3 w-3"})]})}):(0,t.jsx)("div",{className:a.className,title:a.tooltip,children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-semibold",children:a.count})]})}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Reviews",el&&(0,t.jsx)("span",{className:"text-primary ml-1",title:"Loading...",children:"⏳"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,t.jsxs)("div",{className:"relative group",children:["verified"===e.claim_status?(0,t.jsx)(v.Z,{className:"h-5 w-5 text-green-500 dark:text-green-400 cursor-pointer fill-current"}):"pending"===e.claim_status?(0,t.jsx)(v.Z,{className:"h-5 w-5 text-orange-400 dark:text-orange-300 cursor-pointer fill-current"}):"claimed"===e.claim_status?(0,t.jsx)(v.Z,{className:"h-5 w-5 text-purple-300 dark:text-purple-400 cursor-pointer fill-current"}):"rejected"===e.claim_status?(0,t.jsx)(v.Z,{className:"h-5 w-5 text-red-500 dark:text-red-400 cursor-pointer fill-current"}):(0,t.jsx)(v.Z,{className:"h-5 w-5 text-muted-foreground cursor-pointer fill-current"}),(0,t.jsx)("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10 pointer-events-none",children:"verified"===e.claim_status?"Verified":"pending"===e.claim_status?"Pending Verification":"claimed"===e.claim_status?"Claimed":"rejected"===e.claim_status?"Rejected":"Unclaimed"})]}),(0,t.jsxs)("div",{className:"relative group",children:[e.isactive?(0,t.jsx)(j.Z,{className:"h-5 w-5 text-green-500 dark:text-green-400 cursor-pointer"}):(0,t.jsx)(f.Z,{className:"h-5 w-5 text-red-500 dark:text-red-400 cursor-pointer"}),(0,t.jsx)("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10 pointer-events-none",children:e.isactive?"Active":"Inactive"})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-foreground",children:e.sales_rep_name||"Unassigned"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Sales Representative"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ep(e),children:"Manage"}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>eg(e),className:"flex items-center gap-1",children:[(0,t.jsx)(_.Z,{className:"h-3 w-3"}),"QR Code"]}),e.website&&(0,t.jsx)(i.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,t.jsxs)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(y.Z,{className:"h-3 w-3 mr-1"}),"Website"]})})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Industry: ",e.industry_category_name||"Not specified"]}),e.business_description&&(0,t.jsxs)("span",{children:["• ",e.business_description.substring(0,100),"..."]}),!e.isactive&&(0,t.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"• INACTIVE"})]})]})},e.id)})}),(0,t.jsx)(Q,{client:I,isOpen:F,onClose:()=>{E(!1),L(null)},onSuccess:()=>{eh()},userRole:e||""}),ec&&(0,t.jsx)(G.W,{isOpen:ei,onClose:()=>{en(!1),eo(null)},businessId:ec.id,businessName:ec.business_name,placeId:ec.place_id,businessAddress:ec.business_address}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-4",children:[(0,t.jsx)(r.Zb,{className:"border-border",children:(0,t.jsx)(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:ev.length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:$?"Total Clients":"Active Clients"})]})]})})}),(0,t.jsx)(r.Zb,{className:"border-border",children:(0,t.jsx)(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Z,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:ev.filter(e=>"verified"===e.claim_status).length}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Verified"})]})]})})}),(0,t.jsx)(r.Zb,{className:"border-border",children:(0,t.jsx)(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:Object.values(ea).reduce((e,s)=>e+s.total_reviews,0)}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Reviews"})]})]})})}),(0,t.jsx)(r.Zb,{className:"border-border",children:(0,t.jsx)(r.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:Z.length>0&&Math.round(Z.reduce((e,s)=>{let a=J.get(s.place_id);return e+((null==a?void 0:a.score)||0)},0)/Z.filter(e=>{var s;return null===(s=J.get(e.place_id))||void 0===s?void 0:s.score}).length)||0}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Avg GCSG"})]})]})})})]})]})}},5186:function(e,s,a){"use strict";a.d(s,{I:function(){return i}});var t=a(7437),l=a(2265),r=a(4508);let i=l.forwardRef((e,s)=>{let{className:a,type:l,...i}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});i.displayName="Input"},6815:function(e,s,a){"use strict";a.d(s,{_:function(){return o}});var t=a(7437),l=a(2265),r=a(370),i=a(535),n=a(4508);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.f,{ref:s,className:(0,n.cn)(c(),a),...l})});o.displayName=r.f.displayName},3647:function(e,s,a){"use strict";a.d(s,{Bw:function(){return p},Ph:function(){return d},Ql:function(){return g},i4:function(){return m},ki:function(){return u}});var t=a(7437),l=a(2265),r=a(4953),i=a(875),n=a(2135),c=a(401),o=a(4508);let d=r.fC;r.ZA;let u=r.B4,m=l.forwardRef((e,s)=>{let{className:a,children:l,...n}=e;return(0,t.jsxs)(r.xz,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-white px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[l,(0,t.jsx)(r.JO,{asChild:!0,children:(0,t.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let x=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=r.$G.displayName;let p=l.forwardRef((e,s)=>{let{className:a,children:l,position:i="popper",...n}=e;return(0,t.jsx)(r.h_,{children:(0,t.jsxs)(r.VY,{ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-white text-gray-900 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,t.jsx)(x,{}),(0,t.jsx)(r.l_,{className:(0,o.cn)("p-1 bg-white","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(h,{})]})})});p.displayName=r.VY.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold text-gray-900",a),...l})}).displayName=r.__.displayName;let g=l.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(r.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm text-gray-900 outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 hover:bg-gray-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.wU,{children:(0,t.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(r.eT,{children:l})]})});g.displayName=r.ck.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=r.Z0.displayName},2339:function(e,s,a){"use strict";a.d(s,{SP:function(){return o},dr:function(){return c},mQ:function(){return n},nU:function(){return d}});var t=a(7437),l=a(2265),r=a(1312),i=a(4508);let n=r.fC,c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.aV,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...l})});c.displayName=r.aV.displayName;let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...l})});o.displayName=r.xz.displayName;let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...l})});d.displayName=r.VY.displayName},6818:function(e,s,a){"use strict";a.d(s,{g:function(){return i}});var t=a(7437),l=a(2265),r=a(4508);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...l})});i.displayName="Textarea"}},function(e){e.O(0,[139,4358,6137,5605,1709,3774,7005,1153,600,4266,2584,6631,4868,231,724,2971,2117,1744],function(){return e(e.s=8836)}),_N_E=e.O()}]);