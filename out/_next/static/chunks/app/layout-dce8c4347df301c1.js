(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{6007:function(e,o,l){Promise.resolve().then(l.bind(l,5800)),Promise.resolve().then(l.t.bind(l,4742,23)),Promise.resolve().then(l.t.bind(l,7960,23))},5800:function(e,o,l){"use strict";l.d(o,{Providers:function(){return D},a:function(){return c}});var n=l(7437),t=l(2265),s=l(3301),r=l(5516),i=l(5922);function a(e){let{children:o,...l}=e;return(0,n.jsx)(i.f,{...l,children:o})}let u=(0,t.createContext)({user:null,role:null,clientRole:null,businessId:null,loading:!0,isFirebaseConfigured:!1}),c=()=>(0,t.useContext)(u);function d(e){if(console.log("\uD83D\uDD0D Determining role for email:",e),!e)return console.log("❌ No email provided, defaulting to client"),"client";let o=e.toLowerCase();return"miguel.giraldo@gladgrade.com"===o?(console.log("\uD83D\uDC51 Super Admin detected!"),"super_admin"):o.endsWith("@gladgrade.com")?(console.log("\uD83C\uDFE2 GladGrade employee detected"),o.includes("admin"))?(console.log("\uD83D\uDEE1️ Admin role assigned"),"admin"):o.includes("moderator")||o.includes("mod")?(console.log("\uD83D\uDD0D Moderator role assigned"),"moderator"):o.includes("support")||o.includes("employee")?(console.log("\uD83D\uDC64 Employee role assigned"),"employee"):(console.log("\uD83D\uDEE1️ Default admin role for GladGrade employee"),"admin"):(console.log("\uD83C\uDFEA Client role assigned"),"client")}function g(e){let{children:o}=e,[l,i]=(0,t.useState)(null),[a,c]=(0,t.useState)(null),[g,D]=(0,t.useState)(null),[m,f]=(0,t.useState)(null),[b,p]=(0,t.useState)(!0),[h,C]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{if(console.log("\uD83D\uDE80 AuthProvider useEffect running..."),console.log("\uD83D\uDD27 Firebase configured:",!0),C(!0),r.I8){console.log("\uD83D\uDD10 Setting up Firebase auth listener...");let e=(0,s.Aj)(r.I8,async e=>{if(console.log("\uD83D\uDD04 Auth state changed:",e?"User: ".concat(e.email):"No user"),i(e),e&&e.email)try{console.log("\uD83C\uDFAF Getting user role...");let o=await e.getIdTokenResult(),l=o.claims.role,n=null,t=null;console.log("\uD83C\uDFF7️ Custom claim role:",l),"client"===l&&o.claims.businessId&&(n=parseInt(o.claims.businessId),console.log("\uD83C\uDFE2 Client businessId extracted:",n),o.claims.user_role&&(t=o.claims.user_role,console.log("\uD83D\uDC64 Client role extracted:",t))),l||(l=d(e.email),console.log("\uD83D\uDD10 Role assigned based on email domain: ".concat(e.email," → ").concat(l))),c(l),D(t),f(n),console.log("✅ Final role set:",l),console.log("✅ Final clientRole set:",t),console.log("✅ Final businessId set:",n)}catch(l){console.error("❌ Error getting user role:",l);let o=d(e.email);c(o),D(null),f(null),console.log("\uD83D\uDD04 Fallback role assigned: ".concat(e.email," → ").concat(o))}else console.log("\uD83D\uDC64 No user, setting role and businessId to null"),c(null),D(null),f(null);console.log("⏰ Setting loading to false"),p(!1)});return()=>{console.log("\uD83E\uDDF9 Cleaning up auth listener"),e()}}console.log("❌ Firebase not configured or auth not available"),p(!1)},[]),(0,n.jsx)(u.Provider,{value:{user:l,role:a,clientRole:g,businessId:m,loading:b,isFirebaseConfigured:h},children:o})}function D(e){let{children:o}=e;return(0,n.jsx)(a,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!1,children:(0,n.jsx)(g,{children:o})})}},5516:function(e,o,l){"use strict";l.d(o,{I8:function(){return c}});var n=l(738),t=l(3301),s=l(5978),r=l(62);console.log("Firebase Config Debug:",{apiKey:"✓ Set",authDomain:"✓ Set",projectId:"✓ Set",storageBucket:"✓ Set",messagingSenderId:"✓ Set",appId:"✓ Set"});let i={apiKey:"AIzaSyDD3_U64MVrZp2iNxYWVX9_hHytC9x_WVo",authDomain:"reactgladgrade.firebaseapp.com",projectId:"reactgladgrade",storageBucket:"reactgladgrade.appspot.com",messagingSenderId:"360532994710",appId:"1:360532994710:web:7376b3b3bab542567bf0b7",measurementId:"G-G7Y7B5CME3"},a=["apiKey","authDomain","projectId","appId"].filter(e=>!i[e]);if(a.length>0)throw console.error("Missing Firebase configuration fields:",a),console.error("Current config:",i),console.error("Make sure your .env.local file is in the root directory and restart the dev server"),Error("Missing Firebase configuration: ".concat(a.join(", ")));let u=null,c=null;try{u=(0,n.ZF)(i),c=(0,t.v0)(u),(0,s.ad)(u),(0,r.cF)(u),console.log("✅ Firebase initialized successfully")}catch(e){throw console.error("❌ Firebase initialization failed:",e),e}},7960:function(){},4742:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(e){e.O(0,[3042,3587,139,4358,5605,1153,2971,2117,1744],function(){return e(e.s=6007)}),_N_E=e.O()}]);