(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{6007:function(e,o,n){Promise.resolve().then(n.bind(n,5800)),Promise.resolve().then(n.t.bind(n,4742,23)),Promise.resolve().then(n.t.bind(n,7960,23))},5800:function(e,o,n){"use strict";n.d(o,{Providers:function(){return D},a:function(){return c}});var t=n(7437),l=n(2265),r=n(3301),i=n(5516),s=n(5922);function a(e){let{children:o,...n}=e;return(0,t.jsx)(s.f,{...n,children:o})}let u=(0,l.createContext)({user:null,role:null,businessId:null,loading:!0,isFirebaseConfigured:!1}),c=()=>(0,l.useContext)(u);function d(e){if(console.log("\uD83D\uDD0D Determining role for email:",e),!e)return console.log("❌ No email provided, defaulting to client"),"client";let o=e.toLowerCase();return"miguel.giraldo@gladgrade.com"===o?(console.log("\uD83D\uDC51 Super Admin detected!"),"super_admin"):o.endsWith("@gladgrade.com")?(console.log("\uD83C\uDFE2 GladGrade employee detected"),o.includes("admin"))?(console.log("\uD83D\uDEE1️ Admin role assigned"),"admin"):o.includes("moderator")||o.includes("mod")?(console.log("\uD83D\uDD0D Moderator role assigned"),"moderator"):o.includes("support")||o.includes("employee")?(console.log("\uD83D\uDC64 Employee role assigned"),"employee"):(console.log("\uD83D\uDEE1️ Default admin role for GladGrade employee"),"admin"):(console.log("\uD83C\uDFEA Client role assigned"),"client")}function g(e){let{children:o}=e,[n,s]=(0,l.useState)(null),[a,c]=(0,l.useState)(null),[g,D]=(0,l.useState)(null),[f,p]=(0,l.useState)(!0),[m,b]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(console.log("\uD83D\uDE80 AuthProvider useEffect running..."),console.log("\uD83D\uDD27 Firebase configured:",!0),b(!0),i.I8){console.log("\uD83D\uDD10 Setting up Firebase auth listener...");let e=(0,r.Aj)(i.I8,async e=>{if(console.log("\uD83D\uDD04 Auth state changed:",e?"User: ".concat(e.email):"No user"),s(e),e&&e.email)try{console.log("\uD83C\uDFAF Getting user role...");let o=await e.getIdTokenResult(),n=o.claims.role,t=null;console.log("\uD83C\uDFF7️ Custom claim role:",n),"client"===n&&o.claims.businessId&&(t=parseInt(o.claims.businessId),console.log("\uD83C\uDFE2 Client businessId extracted:",t)),n||(n=d(e.email),console.log("\uD83D\uDD10 Role assigned based on email domain: ".concat(e.email," → ").concat(n))),c(n),D(t),console.log("✅ Final role set:",n),console.log("✅ Final businessId set:",t)}catch(n){console.error("❌ Error getting user role:",n);let o=d(e.email);c(o),D(null),console.log("\uD83D\uDD04 Fallback role assigned: ".concat(e.email," → ").concat(o))}else console.log("\uD83D\uDC64 No user, setting role and businessId to null"),c(null),D(null);console.log("⏰ Setting loading to false"),p(!1)});return()=>{console.log("\uD83E\uDDF9 Cleaning up auth listener"),e()}}console.log("❌ Firebase not configured or auth not available"),p(!1)},[]),(0,t.jsx)(u.Provider,{value:{user:n,role:a,businessId:g,loading:f,isFirebaseConfigured:m},children:o})}function D(e){let{children:o}=e;return(0,t.jsx)(a,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!1,children:(0,t.jsx)(g,{children:o})})}},5516:function(e,o,n){"use strict";n.d(o,{I8:function(){return c}});var t=n(738),l=n(3301),r=n(5978),i=n(62);console.log("Firebase Config Debug:",{apiKey:"✓ Set",authDomain:"✓ Set",projectId:"✓ Set",storageBucket:"✓ Set",messagingSenderId:"✓ Set",appId:"✓ Set"});let s={apiKey:"AIzaSyDD3_U64MVrZp2iNxYWVX9_hHytC9x_WVo",authDomain:"reactgladgrade.firebaseapp.com",projectId:"reactgladgrade",storageBucket:"reactgladgrade.appspot.com",messagingSenderId:"360532994710",appId:"1:360532994710:web:7376b3b3bab542567bf0b7",measurementId:"G-G7Y7B5CME3"},a=["apiKey","authDomain","projectId","appId"].filter(e=>!s[e]);if(a.length>0)throw console.error("Missing Firebase configuration fields:",a),console.error("Current config:",s),console.error("Make sure your .env.local file is in the root directory and restart the dev server"),Error("Missing Firebase configuration: ".concat(a.join(", ")));let u=null,c=null;try{u=(0,t.ZF)(s),c=(0,l.v0)(u),(0,r.ad)(u),(0,i.cF)(u),console.log("✅ Firebase initialized successfully")}catch(e){throw console.error("❌ Firebase initialization failed:",e),e}},7960:function(){},4742:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}},6200:function(e,o,n){"use strict";n.d(o,{_T:function(){return l},ev:function(){return r},pi:function(){return t}});var t=function(){return(t=Object.assign||function(e){for(var o,n=1,t=arguments.length;n<t;n++)for(var l in o=arguments[n])Object.prototype.hasOwnProperty.call(o,l)&&(e[l]=o[l]);return e}).apply(this,arguments)};function l(e,o){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>o.indexOf(t)&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,t=Object.getOwnPropertySymbols(e);l<t.length;l++)0>o.indexOf(t[l])&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]]);return n}function r(e,o,n){if(n||2==arguments.length)for(var t,l=0,r=o.length;l<r;l++)!t&&l in o||(t||(t=Array.prototype.slice.call(o,0,l)),t[l]=o[l]);return e.concat(t||Array.prototype.slice.call(o))}"function"==typeof SuppressedError&&SuppressedError}},function(e){e.O(0,[3042,3587,139,4358,3301,1153,2971,2117,1744],function(){return e(e.s=6007)}),_N_E=e.O()}]);